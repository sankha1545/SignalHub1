{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["E:/Attack Capital/SignalHub/frontend/src/components/profile/EditProfile.tsx"],"sourcesContent":["// components/profile/EditProfile.tsx\r\n\"use client\";\r\n\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\n/**\r\n * NOTE: replace GEONAMES_USERNAME with your GeoNames username if you want live country/state lists.\r\n */\r\nconst GEONAMES_USERNAME = \"sankha\"; // <-- replace or leave\r\n\r\nconst TIMEZONES_38 = [\r\n  \"UTC-12:00 - Baker Island\",\r\n  \"UTC-11:00 - Niue / American Samoa\",\r\n  \"UTC-10:00 - Hawaii-Aleutian Standard Time\",\r\n  \"UTC-09:00 - Alaska Standard Time\",\r\n  \"UTC-08:00 - Pacific Standard Time\",\r\n  \"UTC-07:00 - Mountain Standard Time\",\r\n  \"UTC-06:00 - Central Standard Time\",\r\n  \"UTC-05:00 - Eastern Standard Time\",\r\n  \"UTC-04:00 - Atlantic Standard Time\",\r\n  \"UTC-03:30 - Newfoundland Standard Time\",\r\n  \"UTC-03:00 - Argentina / Brasilia\",\r\n  \"UTC-02:00 - South Georgia Time\",\r\n  \"UTC-01:00 - Azores\",\r\n  \"UTC+00:00 - Greenwich Mean Time\",\r\n  \"UTC+01:00 - Central European Time\",\r\n  \"UTC+02:00 - Eastern European Time\",\r\n  \"UTC+03:00 - Moscow / Arabia\",\r\n  \"UTC+03:30 - Iran Standard Time\",\r\n  \"UTC+04:00 - Azerbaijan / UAE\",\r\n  \"UTC+04:30 - Afghanistan\",\r\n  \"UTC+05:00 - Pakistan Standard Time\",\r\n  \"UTC+05:30 - India Standard Time\",\r\n  \"UTC+05:45 - Nepal Time\",\r\n  \"UTC+06:00 - Bangladesh / Bhutan\",\r\n  \"UTC+06:30 - Cocos / Myanmar\",\r\n  \"UTC+07:00 - Indochina Time\",\r\n  \"UTC+08:00 - China / Singapore\",\r\n  \"UTC+09:00 - Japan / Korea\",\r\n  \"UTC+09:30 - Australian Central Standard Time\",\r\n  \"UTC+10:00 - Australian Eastern Standard Time\",\r\n  \"UTC+10:30 - Lord Howe\",\r\n  \"UTC+11:00 - Solomon Is. / New Caledonia\",\r\n  \"UTC+12:00 - Fiji / New Zealand\",\r\n  \"UTC+12:45 - Chatham Islands\",\r\n  \"UTC+13:00 - Tonga / Phoenix Is.\",\r\n  \"UTC+14:00 - Line Islands\"\r\n];\r\n\r\ntype CountryEntry = {\r\n  geonameId: number;\r\n  countryName: string;\r\n  countryCode: string;\r\n};\r\n\r\ntype StateEntry = {\r\n  geonameId: number;\r\n  name: string;\r\n};\r\n\r\ntype User = {\r\n  id: string;\r\n  email: string;\r\n  name?: string | null;\r\n  profile?: any;\r\n};\r\n\r\ntype Props = {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  user: User | null;\r\n  // onSave should ideally return boolean or Promise<boolean>. This component will\r\n  // accept either boolean, Promise<boolean>, or a returned updated user object.\r\n  onSave: (payload: Partial<User & { profile?: any }>) => Promise<boolean | any> | boolean | any;\r\n};\r\n\r\nconst MAX_AVATAR_BYTES = 2 * 1024 * 1024; // 2 MB\r\nconst COOKIE_CANDIDATES = [\"session\", \"token\", \"auth_token\", \"authToken\", \"auth\"];\r\n\r\nexport default function EditProfile({ open, onClose, user, onSave }: Props) {\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  const [fullName, setFullName] = useState(\"\");\r\n  const [displayName, setDisplayName] = useState(\"\");\r\n  const [gender, setGender] = useState(\"\");\r\n  const [countryGeonameId, setCountryGeonameId] = useState<number | \"\">(\"\");\r\n  const [countryCode, setCountryCode] = useState(\"\");\r\n  const [countryName, setCountryName] = useState(\"\");\r\n  const [stateGeonameId, setStateGeonameId] = useState<number | \"\">(\"\");\r\n  const [stateName, setStateName] = useState(\"\");\r\n  const [language, setLanguage] = useState(\"\");\r\n  const [timezone, setTimezone] = useState(\"\");\r\n\r\n  const [avatarPreview, setAvatarPreview] = useState<string | null>(null);\r\n  const [avatarFileSize, setAvatarFileSize] = useState<number | null>(null);\r\n  const [avatarRemoved, setAvatarRemoved] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\r\n\r\n  const [countries, setCountries] = useState<CountryEntry[]>([]);\r\n  const [states, setStates] = useState<StateEntry[]>([]);\r\n  const [loadingCountries, setLoadingCountries] = useState(false);\r\n  const [loadingStates, setLoadingStates] = useState(false);\r\n\r\n  const primaryRef = useRef<HTMLButtonElement | null>(null);\r\n\r\n  // init form from user\r\n  useEffect(() => {\r\n    if (!user) return;\r\n    setFullName(user.name ?? \"\");\r\n    const p = user.profile ?? {};\r\n    setDisplayName(p.displayName ?? \"\");\r\n    setGender(p.gender ?? \"\");\r\n    setCountryGeonameId(p.countryGeonameId ?? \"\");\r\n    setCountryCode(p.countryCode ?? \"\");\r\n    setCountryName(p.countryName ?? \"\");\r\n    setStateGeonameId(p.stateGeonameId ?? \"\");\r\n    setStateName(p.stateName ?? \"\");\r\n    setLanguage(p.language ?? \"\");\r\n    setTimezone(p.timezone ?? \"\");\r\n    setAvatarPreview(p.avatarUrl ?? p.avatarBase64 ?? null);\r\n    setAvatarFileSize(null);\r\n    setAvatarRemoved(false);\r\n    console.debug(\"[EditProfile] initialized form from user:\", { id: user.id, name: user.name, profile: user.profile });\r\n  }, [user, open]);\r\n\r\n  // load countries (cached)\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function loadCountries() {\r\n      setLoadingCountries(true);\r\n      try {\r\n        const cached = sessionStorage.getItem(\"geonames_countries_v1\");\r\n        if (cached) {\r\n          const parsed: CountryEntry[] = JSON.parse(cached);\r\n          if (mounted) setCountries(parsed);\r\n          setLoadingCountries(false);\r\n          return;\r\n        }\r\n\r\n        if (!GEONAMES_USERNAME) {\r\n          setCountries([]);\r\n          setLoadingCountries(false);\r\n          return;\r\n        }\r\n\r\n        const res = await fetch(`http://api.geonames.org/countryInfoJSON?username=${GEONAMES_USERNAME}`);\r\n        if (!res.ok) throw new Error(\"Failed to fetch countries from GeoNames\");\r\n        const json = await res.json();\r\n        const list: CountryEntry[] = (json.geonames || []).map((c: any) => ({\r\n          geonameId: c.geonameId,\r\n          countryName: c.countryName,\r\n          countryCode: c.countryCode\r\n        }));\r\n        sessionStorage.setItem(\"geonames_countries_v1\", JSON.stringify(list));\r\n        if (mounted) setCountries(list);\r\n      } catch (err) {\r\n        console.error(\"[EditProfile] Error loading countries:\", err);\r\n        if (mounted) setCountries([]);\r\n      } finally {\r\n        if (mounted) setLoadingCountries(false);\r\n      }\r\n    }\r\n    loadCountries();\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  // load states when country changes\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function loadStates() {\r\n      if (!countryGeonameId) {\r\n        if (mounted) {\r\n          setStates([]);\r\n          setStateGeonameId(\"\");\r\n          setStateName(\"\");\r\n        }\r\n        return;\r\n      }\r\n\r\n      setLoadingStates(true);\r\n      setStates([]);\r\n      try {\r\n        if (!GEONAMES_USERNAME) {\r\n          setStates([]);\r\n          setLoadingStates(false);\r\n          return;\r\n        }\r\n        const res = await fetch(`http://api.geonames.org/childrenJSON?geonameId=${countryGeonameId}&username=${GEONAMES_USERNAME}`);\r\n        if (!res.ok) throw new Error(\"Failed to fetch states from GeoNames\");\r\n        const json = await res.json();\r\n        const st: StateEntry[] = (json.geonames || []).map((g: any) => ({ geonameId: g.geonameId, name: g.name }));\r\n        if (mounted) {\r\n          setStates(st);\r\n          setLoadingStates(false);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"[EditProfile] Error loading states:\", err);\r\n        if (mounted) setLoadingStates(false);\r\n      }\r\n    }\r\n\r\n    if (countryGeonameId) {\r\n      const found = countries.find((c) => c.geonameId === countryGeonameId);\r\n      if (found) {\r\n        setCountryCode(found.countryCode);\r\n        setCountryName(found.countryName);\r\n      }\r\n    } else {\r\n      setCountryCode(\"\");\r\n      setCountryName(\"\");\r\n    }\r\n\r\n    loadStates();\r\n    return () => { mounted = false; };\r\n  }, [countryGeonameId, countries]);\r\n\r\n  useEffect(() => {\r\n    if (!open) return;\r\n    const prev = document.body.style.overflow;\r\n    document.body.style.overflow = \"hidden\";\r\n    const t = setTimeout(() => primaryRef.current?.focus(), 80);\r\n    return () => {\r\n      document.body.style.overflow = prev;\r\n      clearTimeout(t);\r\n    };\r\n  }, [open]);\r\n\r\n  useEffect(() => {\r\n    function onKey(e: KeyboardEvent) {\r\n      if (e.key === \"Escape\") onClose();\r\n    }\r\n    if (open) window.addEventListener(\"keydown\", onKey);\r\n    return () => window.removeEventListener(\"keydown\", onKey);\r\n  }, [open, onClose]);\r\n\r\n  if (!open) return null;\r\n\r\n  // avatar helpers\r\n  function handleFileChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n    pickAvatarFile(file);\r\n  }\r\n\r\n  function pickAvatarFile(file: File) {\r\n    if (!file.type.startsWith(\"image/\")) {\r\n      alert(\"Please select an image file.\");\r\n      return;\r\n    }\r\n    if (file.size > MAX_AVATAR_BYTES) {\r\n      alert(\"Avatar must be 2 MB or smaller.\");\r\n      return;\r\n    }\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      const dataUrl = reader.result as string;\r\n      setAvatarPreview(dataUrl);\r\n      setAvatarFileSize(file.size);\r\n      setAvatarRemoved(false);\r\n      console.debug(\"[EditProfile] avatar picked, size:\", file.size);\r\n    };\r\n    reader.onerror = (err) => {\r\n      console.error(\"[EditProfile] Failed to read avatar file:\", err);\r\n      alert(\"Failed to read the selected file.\");\r\n    };\r\n    reader.readAsDataURL(file);\r\n  }\r\n\r\n  function triggerFilePicker() {\r\n    fileInputRef.current?.click();\r\n  }\r\n\r\n  function removeAvatar() {\r\n    setAvatarPreview(null);\r\n    setAvatarFileSize(null);\r\n    setAvatarRemoved(true);\r\n    if (fileInputRef.current) fileInputRef.current.value = \"\";\r\n    console.debug(\"[EditProfile] avatar removed by user\");\r\n  }\r\n\r\n  // ---------- submit handler (with debug + robust fallback) ----------\r\nasync function submit(e?: React.FormEvent) {\r\n  e?.preventDefault();\r\n  if (!user) {\r\n    console.warn(\"[EditProfile] submit called but user is null\");\r\n    return;\r\n  }\r\n  if (!fullName || typeof fullName !== \"string\") {\r\n    alert(\"Full name is required.\");\r\n    return;\r\n  }\r\n\r\n  setSaving(true);\r\n  try {\r\n    const profilePatch: any = {\r\n      displayName: displayName || undefined,\r\n      gender: gender || undefined,\r\n      countryGeonameId: countryGeonameId || null,\r\n      countryCode: countryCode || null,\r\n      countryName: countryName || null,\r\n      stateGeonameId: stateGeonameId || null,\r\n      stateName: stateName || null,\r\n      language: language || undefined,\r\n      timezone: timezone || undefined\r\n    };\r\n\r\n    if (avatarRemoved) {\r\n      profilePatch.avatarBase64 = null;\r\n      profilePatch.avatarUrl = null;\r\n    } else if (avatarPreview && avatarPreview.startsWith(\"data:\")) {\r\n      profilePatch.avatarBase64 = avatarPreview;\r\n      profilePatch.avatarUrl = avatarPreview;\r\n    }\r\n\r\n    const payload: any = {\r\n      name: fullName,\r\n      profile: profilePatch\r\n    };\r\n\r\n    console.debug(\"[EditProfile] submit payload:\", payload);\r\n\r\n    // Call parent onSave and capture result\r\n    let okResult: boolean | any = false;\r\n    try {\r\n      const maybe = onSave(payload);\r\n      okResult = typeof maybe === \"boolean\" ? maybe : await maybe;\r\n      console.debug(\"[EditProfile] onSave returned:\", okResult);\r\n    } catch (err) {\r\n      console.error(\"[EditProfile] onSave threw error:\", err);\r\n      okResult = false;\r\n    }\r\n\r\n    // If parent returned a truthy object (updated user), use it; if boolean true, proceed to fetch /api/me.\r\n    let updatedUser: any = null;\r\n    if (okResult && typeof okResult === \"object\") {\r\n      updatedUser = okResult;\r\n      console.debug(\"[EditProfile] using updated user returned by parent onSave\");\r\n    } else if (okResult === true) {\r\n      // parent signalled success but didn't return user => fetch authoritative /api/me\r\n      try {\r\n        const r = await fetch(\"/api/me\", { method: \"GET\", credentials: \"include\", cache: \"no-store\" });\r\n        console.debug(\"[EditProfile] GET /api/me after save status:\", r.status);\r\n        if (r.ok) {\r\n          const b = await r.json().catch(() => null);\r\n          updatedUser = b?.user ?? null;\r\n          console.debug(\"[EditProfile] GET /api/me returned:\", updatedUser);\r\n        } else {\r\n          console.warn(\"[EditProfile] GET /api/me after save returned non-ok:\", r.status);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"[EditProfile] failed to fetch /api/me after save:\", err);\r\n      }\r\n    } else {\r\n      // Parent returned falsy value or failure — attempt direct PATCH as a fallback\r\n      try {\r\n        console.debug(\"[EditProfile] parent onSave failed or returned falsy — trying direct PATCH to /api/me\");\r\n        const r = await fetch(\"/api/me\", {\r\n          method: \"PATCH\",\r\n          credentials: \"include\",\r\n          headers: { \"Content-Type\": \"application/json\", Accept: \"application/json\" },\r\n          body: JSON.stringify(payload),\r\n        });\r\n        console.debug(\"[EditProfile] direct PATCH /api/me status:\", r.status);\r\n        if (r.ok) {\r\n          const b = await r.json().catch(() => null);\r\n          updatedUser = b?.user ?? null;\r\n          console.debug(\"[EditProfile] direct PATCH response body:\", b);\r\n        } else {\r\n          const txt = await r.text().catch(() => null);\r\n          console.warn(\"[EditProfile] direct PATCH returned non-ok:\", r.status, txt);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"[EditProfile] direct PATCH failed:\", err);\r\n      }\r\n    }\r\n\r\n    // If we have updatedUser, dispatch event so app can update global state\r\n    if (updatedUser) {\r\n      try {\r\n        window.dispatchEvent(new CustomEvent(\"user:updated\", { detail: updatedUser }));\r\n        console.debug(\"[EditProfile] dispatched user:updated event\", updatedUser);\r\n      } catch (e) {\r\n        console.error(\"[EditProfile] dispatch user:updated failed:\", e);\r\n      }\r\n\r\n      // close modal\r\n      onClose?.();\r\n      return;\r\n    }\r\n\r\n    // Nothing worked — dispatch null detail and reload as last resort\r\n    try {\r\n      window.dispatchEvent(new CustomEvent(\"user:updated\", { detail: null }));\r\n      console.debug(\"[EditProfile] dispatched user:updated null fallback\");\r\n    } catch (e) {\r\n      console.debug(\"[EditProfile] dispatch fallback failed\", e);\r\n    }\r\n\r\n    console.warn(\"[EditProfile] could not obtain updated user after save; reloading page as fallback\");\r\n    // Reload to show server-side updated state as a last resort\r\n    window.location.reload();\r\n  } catch (err) {\r\n    console.error(\"[EditProfile] submit unexpected error:\", err);\r\n  } finally {\r\n    setSaving(false);\r\n  }\r\n}\r\n\r\n  // end submit\r\n  // ---------- JSX below ----------\r\n  return ReactDOM.createPortal(\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n      <div className=\"absolute inset-0 bg-black/40\" onClick={onClose} aria-hidden />\r\n      <div\r\n        role=\"dialog\"\r\n        aria-modal=\"true\"\r\n        aria-labelledby=\"edit-profile-title\"\r\n        className=\"relative z-10 w-full max-w-2xl bg-white rounded-2xl p-6 shadow-lg border\"\r\n      >\r\n        <div className=\"flex items-start justify-between gap-4\">\r\n          <div>\r\n            <h3 id=\"edit-profile-title\" className=\"text-lg font-semibold\">Edit profile</h3>\r\n            <p className=\"text-sm text-slate-600 mt-1\">Update your name, display name, timezone and country/state. Email is read-only.</p>\r\n          </div>\r\n          <div>\r\n            <button onClick={onClose} className=\"text-slate-500 hover:text-slate-700\" aria-label=\"Close\">✕</button>\r\n          </div>\r\n        </div>\r\n\r\n        <form className=\"mt-6 space-y-4\" onSubmit={submit}>\r\n          <div className=\"flex items-start gap-6\">\r\n            <div className=\"flex flex-col items-center gap-3\">\r\n              <div className=\"relative\">\r\n                <div className=\"w-24 h-24 rounded-full overflow-hidden bg-slate-100 flex items-center justify-center border\">\r\n                  {avatarPreview ? (\r\n                    // eslint-disable-next-line @next/next/no-img-element\r\n                    <img src={avatarPreview} alt=\"avatar preview\" className=\"w-full h-full object-cover\" />\r\n                  ) : (\r\n                    <div className=\"text-3xl font-semibold text-slate-700\">\r\n                      {(user?.name || user?.email || \"U\").charAt(0).toUpperCase()}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"absolute -bottom-2 -right-2 flex gap-1\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={triggerFilePicker}\r\n                    className=\"bg-white border rounded-full p-1 shadow hover:bg-slate-50\"\r\n                    title=\"Change avatar\"\r\n                  >\r\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden>\r\n                      <path d=\"M12 5v14\" stroke=\"#0F172A\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\r\n                      <path d=\"M5 12h14\" stroke=\"#0F172A\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\r\n                    </svg>\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={removeAvatar}\r\n                    className=\"bg-white border rounded-full p-1 shadow hover:bg-slate-50\"\r\n                    title=\"Remove avatar\"\r\n                  >\r\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden>\r\n                      <path d=\"M6 6l12 12M6 18L18 6\" stroke=\"#ef4444\" strokeWidth=\"1.5\" strokeLinecap=\"round\" />\r\n                    </svg>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"text-xs text-slate-500 text-center\">\r\n                {avatarFileSize ? `${Math.round(avatarFileSize / 1024)} KB` : \"Max 2 MB\"}\r\n              </div>\r\n\r\n              <input\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                onChange={handleFileChange}\r\n                className=\"sr-only\"\r\n                aria-hidden\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex-1 grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"text-xs text-slate-600 block\">Full name</label>\r\n                <input\r\n                  className=\"mt-1 w-full rounded-lg border px-3 py-2\"\r\n                  value={fullName}\r\n                  onChange={(e) => setFullName(e.target.value)}\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs text-slate-600 block\">Display name</label>\r\n                <input\r\n                  className=\"mt-1 w-full rounded-lg border px-3 py-2\"\r\n                  value={displayName}\r\n                  onChange={(e) => setDisplayName(e.target.value)}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs text-slate-600 block\">Email (read-only)</label>\r\n                <input className=\"mt-1 w-full rounded-lg border px-3 py-2 bg-slate-50\" value={user?.email ?? \"\"} readOnly />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs text-slate-600 block\">Gender</label>\r\n                <select className=\"mt-1 w-full rounded-lg border px-3 py-2\" value={gender} onChange={(e) => setGender(e.target.value)}>\r\n                  <option value=\"\">Prefer not to say</option>\r\n                  <option value=\"female\">Female</option>\r\n                  <option value=\"male\">Male</option>\r\n                  <option value=\"other\">Other</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs text-slate-600 block\">Country/Region</label>\r\n                <select\r\n                  value={countryGeonameId || \"\"}\r\n                  onChange={(e) => {\r\n                    const val = e.target.value;\r\n                    setCountryGeonameId(val ? Number(val) : \"\");\r\n                    setStateGeonameId(\"\");\r\n                    setStateName(\"\");\r\n                  }}\r\n                  className=\"mt-1 w-full rounded-lg border px-3 py-2\"\r\n                >\r\n                  <option value=\"\">Select Country</option>\r\n                  {loadingCountries ? (\r\n                    <option value=\"\">Loading countries...</option>\r\n                  ) : (\r\n                    countries.map((c) => (\r\n                      <option key={c.geonameId} value={c.geonameId}>\r\n                        {c.countryName} ({c.countryCode})\r\n                      </option>\r\n                    ))\r\n                  )}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs text-slate-600 block\">State</label>\r\n                <select\r\n                  value={stateGeonameId || \"\"}\r\n                  onChange={(e) => {\r\n                    const val = e.target.value;\r\n                    setStateGeonameId(val ? Number(val) : \"\");\r\n                    const found = states.find((s) => s.geonameId === Number(val));\r\n                    setStateName(found ? found.name : \"\");\r\n                  }}\r\n                  className=\"mt-1 w-full rounded-lg border px-3 py-2\"\r\n                  disabled={!countryGeonameId || loadingStates || states.length === 0}\r\n                >\r\n                  <option value=\"\">{countryGeonameId ? (loadingStates ? \"Loading states...\" : \"Select State\") : \"Select Country First\"}</option>\r\n                  {states.map((s) => (\r\n                    <option key={s.geonameId} value={s.geonameId}>\r\n                      {s.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs text-slate-600 block\">Language</label>\r\n                <input value={language} onChange={(e) => setLanguage(e.target.value)} className=\"mt-1 w-full rounded-lg border px-3 py-2\" />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs text-slate-600 block\">Time zone</label>\r\n                <select value={timezone} onChange={(e) => setTimezone(e.target.value)} className=\"mt-1 w-full rounded-lg border px-3 py-2\">\r\n                  <option value=\"\">Select timezone</option>\r\n                  {TIMEZONES_38.map((tz) => (\r\n                    <option key={tz} value={tz}>\r\n                      {tz}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-3 mt-2\">\r\n            <button type=\"button\" onClick={onClose} className=\"px-4 py-2 rounded-lg border\">Cancel</button>\r\n            <button\r\n              ref={primaryRef}\r\n              type=\"submit\"\r\n              disabled={saving}\r\n              className=\"px-4 py-2 rounded-lg bg-gradient-to-r from-blue-600 to-indigo-600 text-white\"\r\n            >\r\n              {saving ? \"Saving...\" : \"Save changes\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>,\r\n    document.body\r\n  );\r\n}\r\n"],"names":["React","useEffect","useRef","useState","ReactDOM","GEONAMES_USERNAME","TIMEZONES_38","CountryEntry","geonameId","countryName","countryCode","StateEntry","name","User","id","email","profile","Props","open","onClose","user","onSave","payload","Partial","Promise","MAX_AVATAR_BYTES","COOKIE_CANDIDATES","EditProfile","saving","setSaving","fullName","setFullName","displayName","setDisplayName","gender","setGender","countryGeonameId","setCountryGeonameId","setCountryCode","setCountryName","stateGeonameId","setStateGeonameId","stateName","setStateName","language","setLanguage","timezone","setTimezone","avatarPreview","setAvatarPreview","avatarFileSize","setAvatarFileSize","avatarRemoved","setAvatarRemoved","fileInputRef","HTMLInputElement","countries","setCountries","states","setStates","loadingCountries","setLoadingCountries","loadingStates","setLoadingStates","primaryRef","HTMLButtonElement","p","avatarUrl","avatarBase64","console","debug","mounted","loadCountries","cached","sessionStorage","getItem","parsed","JSON","parse","res","fetch","ok","Error","json","list","geonames","map","c","setItem","stringify","err","error","loadStates","st","g","found","find","prev","document","body","style","overflow","t","setTimeout","current","focus","clearTimeout","onKey","e","KeyboardEvent","key","window","addEventListener","removeEventListener","handleFileChange","ChangeEvent","file","target","files","pickAvatarFile","File","type","startsWith","alert","size","reader","FileReader","onload","dataUrl","result","onerror","readAsDataURL","triggerFilePicker","click","removeAvatar","value","submit","FormEvent","preventDefault","warn","profilePatch","undefined","okResult","maybe","updatedUser","r","method","credentials","cache","status","b","catch","headers","Accept","txt","text","dispatchEvent","CustomEvent","detail","location","reload","createPortal","charAt","toUpperCase","Math","round","val","Number","s","length","tz"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 1027, "column": 0}, "map": {"version":3,"sources":["E:/Attack Capital/SignalHub/frontend/src/components/modals/ConfirmModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useRef } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\ntype ConfirmModalProps = {\r\n  open: boolean;\r\n  title?: string;\r\n  message?: string;\r\n  confirmLabel?: string;\r\n  cancelLabel?: string;\r\n  onConfirm: () => Promise<void> | void;\r\n  onCancel: () => void;\r\n};\r\n\r\nexport default function ConfirmModal({\r\n  open,\r\n  title = \"Confirm\",\r\n  message = \"Are you sure?\",\r\n  confirmLabel = \"Yes\",\r\n  cancelLabel = \"Cancel\",\r\n  onConfirm,\r\n  onCancel,\r\n}: ConfirmModalProps) {\r\n  const ref = useRef<HTMLDivElement | null>(null);\r\n  const primaryBtnRef = useRef<HTMLButtonElement | null>(null);\r\n\r\n  // prevent background scroll\r\n  useEffect(() => {\r\n    if (!open) return;\r\n    const prev = document.body.style.overflow;\r\n    document.body.style.overflow = \"hidden\";\r\n    primaryBtnRef.current?.focus();\r\n    return () => {\r\n      document.body.style.overflow = prev;\r\n    };\r\n  }, [open]);\r\n\r\n  // close on ESC\r\n  useEffect(() => {\r\n    function onKey(e: KeyboardEvent) {\r\n      if (e.key === \"Escape\") onCancel();\r\n    }\r\n    if (open) window.addEventListener(\"keydown\", onKey);\r\n    return () => window.removeEventListener(\"keydown\", onKey);\r\n  }, [open, onCancel]);\r\n\r\n  if (!open) return null;\r\n\r\n  return ReactDOM.createPortal(\r\n    <div\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n      aria-labelledby=\"confirm-title\"\r\n      className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\r\n    >\r\n      <div\r\n        className=\"absolute inset-0 bg-black/40 backdrop-blur-sm\"\r\n        onClick={onCancel}\r\n        aria-hidden\r\n      />\r\n      <div\r\n        ref={ref}\r\n        className=\"relative z-10 max-w-lg w-full bg-white rounded-2xl shadow-xl border p-6\"\r\n      >\r\n        <h3 id=\"confirm-title\" className=\"text-lg font-semibold text-slate-900\">\r\n          {title}\r\n        </h3>\r\n        <p className=\"mt-2 text-sm text-slate-600\">{message}</p>\r\n\r\n        <div className=\"mt-6 flex justify-end gap-3\">\r\n          <button\r\n            onClick={onCancel}\r\n            className=\"px-4 py-2 rounded-lg border text-sm text-slate-700 hover:bg-slate-50\"\r\n          >\r\n            {cancelLabel}\r\n          </button>\r\n          <button\r\n            ref={primaryBtnRef}\r\n            onClick={() => void onConfirm()}\r\n            className=\"px-4 py-2 rounded-lg bg-red-600 text-white text-sm hover:opacity-95\"\r\n          >\r\n            {confirmLabel}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>,\r\n    document.body\r\n  );\r\n}\r\n"],"names":["c","_c","React","useEffect","useRef","ReactDOM","ConfirmModalProps","open","title","message","confirmLabel","cancelLabel","onConfirm","Promise","onCancel","ConfirmModal","t0","$","$i","Symbol","for","t1","t2","t3","t4","undefined","ref","primaryBtnRef","t5","t6","ConfirmModal[useEffect()]","prev","document","body","style","overflow","current","focus","t7","t8","onKey","e","key","window","addEventListener","removeEventListener","t9","t10","t11","t12","t13","t14","ConfirmModal[<button>.onClick]","t15","t16","t17","t18","createPortal"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 1297, "column": 0}, "map": {"version":3,"sources":["E:/Attack Capital/SignalHub/frontend/src/components/profile/ProfileMenu.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport ConfirmModal from \"../modals/ConfirmModal\";\r\n\r\nexport default function ProfileMenu({ avatarUrl, email }: { avatarUrl?: string; email?: string }) {\r\n  const router = useRouter();\r\n  const [open, setOpen] = useState(false);\r\n  const [confirmOpen, setConfirmOpen] = useState(false);\r\n  const [loggingOut, setLoggingOut] = useState(false);\r\n  const menuRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  // close on outside click\r\n  useEffect(() => {\r\n    function onDocClick(e: MouseEvent) {\r\n      if (!menuRef.current) return;\r\n      if (!(e.target instanceof Node)) return;\r\n      if (!menuRef.current.contains(e.target)) setOpen(false);\r\n    }\r\n    document.addEventListener(\"mousedown\", onDocClick);\r\n    return () => document.removeEventListener(\"mousedown\", onDocClick);\r\n  }, []);\r\n\r\n  // keyboard support\r\n  useEffect(() => {\r\n    function onKey(e: KeyboardEvent) {\r\n      if (e.key === \"Escape\") setOpen(false);\r\n    }\r\n    if (open) window.addEventListener(\"keydown\", onKey);\r\n    return () => window.removeEventListener(\"keydown\", onKey);\r\n  }, [open]);\r\n\r\n  async function handleLogout() {\r\n    try {\r\n      setLoggingOut(true);\r\n      const res = await fetch(\"/api/auth/logout\", { method: \"POST\" });\r\n      // ignore body; route clears cookie\r\n      setConfirmOpen(false);\r\n      setOpen(false);\r\n      // redirect to login page\r\n      router.replace(\"/auth/login\");\r\n    } catch (err) {\r\n      console.error(\"Logout failed\", err);\r\n      setLoggingOut(false);\r\n      setConfirmOpen(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"relative\" ref={menuRef}>\r\n      <button\r\n        aria-haspopup=\"menu\"\r\n        aria-expanded={open}\r\n        onClick={() => setOpen((v) => !v)}\r\n        className=\"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center shadow-sm hover:opacity-95\"\r\n        title=\"Account menu\"\r\n      >\r\n        {avatarUrl ? (\r\n          <img src={avatarUrl} alt=\"avatar\" className=\"w-10 h-10 rounded-full object-cover\" />\r\n        ) : (\r\n          <span className=\"text-sm font-medium text-slate-700\">{(email || \"U\").charAt(0).toUpperCase()}</span>\r\n        )}\r\n      </button>\r\n\r\n      {open && (\r\n        <div\r\n          role=\"menu\"\r\n          aria-label=\"Profile\"\r\n          className=\"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border py-2 z-20\"\r\n        >\r\n          <button\r\n            role=\"menuitem\"\r\n            onClick={() => {\r\n              setOpen(false);\r\n              router.push(\"/profile\");\r\n            }}\r\n            className=\"w-full text-left px-3 py-2 hover:bg-slate-50 text-sm text-slate-700\"\r\n          >\r\n            View profile\r\n          </button>\r\n\r\n          <button\r\n            role=\"menuitem\"\r\n            onClick={() => {\r\n              setConfirmOpen(true);\r\n            }}\r\n            className=\"w-full text-left px-3 py-2 hover:bg-slate-50 text-sm text-slate-700\"\r\n          >\r\n            Logout\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      <ConfirmModal\r\n        open={confirmOpen}\r\n        title=\"Log out?\"\r\n        message=\"Do you want to logout?\"\r\n        confirmLabel={loggingOut ? \"Logging out...\" : \"Yes, log out\"}\r\n        cancelLabel=\"Cancel\"\r\n        onCancel={() => setConfirmOpen(false)}\r\n        onConfirm={async () => {\r\n          await handleLogout();\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":["c","_c","React","useEffect","useRef","useState","useRouter","ConfirmModal","ProfileMenu","t0","$","$i","Symbol","for","avatarUrl","email","router","open","setOpen","confirmOpen","setConfirmOpen","loggingOut","setLoggingOut","menuRef","t1","t2","ProfileMenu[useEffect()]","onDocClick","e","current","target","Node","contains","document","addEventListener","removeEventListener","t3","t4","onKey","e_0","key","window","t5","handleLogout","fetch","method","replace","t6","err","console","error","ProfileMenu[<button>.onClick]","_ProfileMenuButtonOnClickSetOpen","t7","charAt","toUpperCase","t8","t9","push","t10","t11","ProfileMenu[<ConfirmModal>.onCancel]","t12","ProfileMenu[<ConfirmModal>.onConfirm]","t13","t14","v"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 1595, "column": 0}, "map": {"version":3,"sources":["E:/Attack Capital/SignalHub/frontend/src/components/profile/AddEmailModal.tsx"],"sourcesContent":["// components/profile/AddEmailModal.tsx\r\n\"use client\";\r\n\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\ntype Props = {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onAdd: (email: string) => Promise<boolean> | boolean;\r\n};\r\n\r\nexport default function AddEmailModal({ open, onClose, onAdd }: Props) {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [saving, setSaving] = useState(false);\r\n  const primaryRef = useRef<HTMLButtonElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!open) return;\r\n    const prev = document.body.style.overflow;\r\n    document.body.style.overflow = \"hidden\";\r\n    const t = setTimeout(() => primaryRef.current?.focus(), 80);\r\n    return () => {\r\n      document.body.style.overflow = prev;\r\n      clearTimeout(t);\r\n    };\r\n  }, [open]);\r\n\r\n  useEffect(() => {\r\n    function onKey(e: KeyboardEvent) {\r\n      if (e.key === \"Escape\") onClose();\r\n    }\r\n    if (open) window.addEventListener(\"keydown\", onKey);\r\n    return () => window.removeEventListener(\"keydown\", onKey);\r\n  }, [open, onClose]);\r\n\r\n  if (!open) return null;\r\n\r\n  function validEmail(e: string) {\r\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(e);\r\n  }\r\n\r\n  async function submit(e?: React.FormEvent) {\r\n    e?.preventDefault();\r\n    if (!validEmail(email)) {\r\n      alert(\"Enter a valid email address.\");\r\n      return;\r\n    }\r\n    setSaving(true);\r\n    try {\r\n      const ok = await onAdd(email);\r\n      if (!ok) {\r\n        // onAdd handles error messages\r\n      }\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  }\r\n\r\n  return ReactDOM.createPortal(\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n      <div className=\"absolute inset-0 bg-black/40\" onClick={onClose} aria-hidden />\r\n      <div className=\"relative z-10 w-full max-w-md bg-white rounded-2xl p-6 shadow-lg border\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <h3 className=\"text-lg font-semibold\">Add an email address</h3>\r\n          <button onClick={onClose} className=\"text-slate-500 hover:text-slate-700\">✕</button>\r\n        </div>\r\n\r\n        <form className=\"mt-4 space-y-4\" onSubmit={submit}>\r\n          <div>\r\n            <label className=\"text-xs text-slate-600 block\">Email</label>\r\n            <input className=\"mt-1 w-full rounded-lg border px-3 py-2\" value={email} onChange={(e) => setEmail(e.target.value)} required />\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-3\">\r\n            <button type=\"button\" onClick={onClose} className=\"px-4 py-2 rounded-lg border\">Cancel</button>\r\n            <button ref={primaryRef} type=\"submit\" disabled={saving} className=\"px-4 py-2 rounded-lg bg-blue-600 text-white\">\r\n              {saving ? \"Adding...\" : \"Add email\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>,\r\n    document.body\r\n  );\r\n}\r\n"],"names":["React","useEffect","useRef","useState","ReactDOM","Props","open","onClose","onAdd","email","Promise","AddEmailModal","setEmail","saving","setSaving","primaryRef","HTMLButtonElement","prev","document","body","style","overflow","t","setTimeout","current","focus","clearTimeout","onKey","e","KeyboardEvent","key","window","addEventListener","removeEventListener","validEmail","test","submit","FormEvent","preventDefault","alert","ok","createPortal","target","value"],"mappings":"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","ignoreList":[],"debugId":null}},
    {"offset": {"line": 1796, "column": 0}, "map": {"version":3,"sources":["E:/Attack Capital/SignalHub/frontend/src/app/profile/page.tsx"],"sourcesContent":["// app/profile/page.tsx\r\n\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport EditProfileModal from \"@/components/profile/EditProfile\";\r\nimport ProfileMenu from \"@/components/profile/ProfileMenu\";\r\nimport AddEmailModal from \"@/components/profile/AddEmailModal\";\r\n\r\n/**\r\n * Profile page (Next.js client component)\r\n *\r\n * Notes:\r\n * - Inline PhoneVerifyModal defined at bottom of file for convenience.\r\n * - Server endpoints expected:\r\n *    GET  /api/me           -> { user, activity? }\r\n *    PATCH /api/me          -> accepts partial { profile, name, ... } and returns { user, activity? }\r\n *    POST  /api/phone/send-otp  -> { ok: true } or { error }\r\n *    POST  /api/phone/verify-otp-> { ok: true, user? } or { error }\r\n */\r\n\r\ntype Profile = {\r\n  displayName?: string;\r\n  gender?: string;\r\n  country?: string;\r\n  state?: string;\r\n  language?: string;\r\n  timezone?: string;\r\n  avatarUrl?: string;\r\n  avatarBase64?: string;\r\n  extraEmail?: string | null;\r\n  phoneNumber?: string | null;\r\n  phoneVerified?: boolean;\r\n  phoneVerifiedAt?: string | null;\r\n  countryCode?: string | null; // ISO alpha-2\r\n  // possible server names:\r\n  countryName?: string | null;\r\n  stateName?: string | null;\r\n  countryGeonameId?: number | null;\r\n  stateGeonameId?: number | null;\r\n};\r\n\r\ntype User = {\r\n  id: string;\r\n  email: string;\r\n  name?: string;\r\n  role?: string;\r\n  profile?: Profile | any;\r\n  updatedAt?: string; // ISO timestamp\r\n};\r\n\r\nconst DEFAULT_DIAL = \"+1\";\r\nconst DEFAULT_NATIONAL_LENGTH = 10;\r\nconst OTP_LEN = 4;\r\n\r\n/** Format time relative with extended granularity:\r\n *  ... (kept as original)\r\n */\r\nfunction formatRelativeExtended(iso?: string | null) {\r\n  if (!iso) return \"—\";\r\n  const then = new Date(iso).getTime();\r\n  if (isNaN(then)) return \"—\";\r\n  const diffMs = Date.now() - then;\r\n  const diffMins = Math.floor(diffMs / 60000);\r\n  if (diffMins < 1) return \"just now\";\r\n  if (diffMins < 60) return `${diffMins}m ago`;\r\n  const diffHours = Math.floor(diffMins / 60);\r\n  if (diffHours < 24) return `${diffHours}h ago`;\r\n  const diffDays = Math.floor(diffHours / 24);\r\n  if (diffDays < 7) return `${diffDays}d ago`;\r\n  if (diffDays < 30) {\r\n    const weeks = Math.floor(diffDays / 7);\r\n    return `${weeks}w ago`;\r\n  }\r\n  if (diffDays < 365) {\r\n    const months = Math.floor(diffDays / 30);\r\n    return `${months}mo ago`;\r\n  }\r\n  const years = Math.floor(diffDays / 365);\r\n  return `${years}y ago`;\r\n}\r\n\r\n/** Small fallback table for national length where restcountries can't tell us */\r\nconst FALLBACK_LENGTH: Record<string, number> = {\r\n  IN: 10,\r\n  US: 10,\r\n  CA: 10,\r\n  GB: 10,\r\n  AU: 9,\r\n  SG: 8,\r\n  BD: 10,\r\n  NP: 10,\r\n  PK: 10,\r\n};\r\n\r\n/**\r\n * normalizeUser:\r\n * - maps server-returned profile.countryName / profile.stateName -> profile.country / profile.state\r\n * - ensures UI always reads from profile.country / profile.state\r\n */\r\nfunction normalizeUser(user: any): any {\r\n  if (!user) return user;\r\n  const p = user.profile ?? {};\r\n  const normalizedProfile = {\r\n    ...p,\r\n    country: p.country ?? p.countryName ?? p.country_name ?? null,\r\n    state: p.state ?? p.stateName ?? p.state_name ?? null,\r\n  };\r\n  return { ...user, profile: normalizedProfile };\r\n}\r\n\r\nexport default function ProfilePage() {\r\n  const router = useRouter();\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [editOpen, setEditOpen] = useState(false);\r\n  const [addEmailOpen, setAddEmailOpen] = useState(false);\r\n  const [activity, setActivity] = useState<{ logins30d: number; changes30d: number } | null>(null);\r\n\r\n  // phone verify modal state\r\n  const [verifyOpen, setVerifyOpen] = useState(false);\r\n\r\n  // tick to refresh relative labels (every 30s)\r\n  const [, setTick] = useState(0);\r\n  useEffect(() => {\r\n    const id = setInterval(() => setTick((s) => s + 1), 30000);\r\n    return () => clearInterval(id);\r\n  }, []);\r\n\r\n  // fetch /api/me on mount — include credentials so cookies are sent\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    const ac = new AbortController();\r\n\r\n    async function load() {\r\n      try {\r\n        const res = await fetch(\"/api/me\", { signal: ac.signal, credentials: \"include\" });\r\n        if (!res.ok) {\r\n          if (!mounted) return;\r\n          setUser(null);\r\n          setActivity(null);\r\n          return;\r\n        }\r\n        const json = await res.json();\r\n        if (!mounted) return;\r\n        // normalize so UI always has profile.country / profile.state\r\n        setUser(normalizeUser(json.user ?? null));\r\n        setActivity(json.activity ?? null);\r\n      } catch (err: any) {\r\n        if (err?.name === \"AbortError\") return;\r\n        console.error(\"fetch /api/me error\", err);\r\n        if (!mounted) return;\r\n        setUser(null);\r\n        setActivity(null);\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    }\r\n\r\n    load();\r\n    return () => {\r\n      mounted = false;\r\n      ac.abort();\r\n    };\r\n  }, []);\r\n\r\n  // unified save handler used by EditProfileModal (and other callers)\r\n  async function handleSave(updated: Partial<User & { profile?: any }>) {\r\n    const prev = user;\r\n    // optimistic update: merge shallow\r\n    setUser((prevU) => (prevU ? { ...prevU, ...updated } : prevU));\r\n\r\n    try {\r\n      const res = await fetch(\"/api/me\", {\r\n        method: \"PATCH\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        credentials: \"include\",\r\n        body: JSON.stringify(updated),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const txt = await res.text().catch(() => \"(no body)\");\r\n        console.error(\"Save failed:\", txt);\r\n        setUser(prev ?? null);\r\n        alert(\"Save failed. See console for details.\");\r\n        return false;\r\n      }\r\n\r\n      const json = await res.json().catch(() => null);\r\n      console.debug(\"PATCH response :\", json);\r\n      if (json?.user) {\r\n        setUser(normalizeUser(json.user));\r\n      } else if (json) {\r\n        // merge partial response\r\n        setUser((u) => (u ? { ...u, ...json } : u));\r\n      } else {\r\n        setUser(prev ?? null);\r\n      }\r\n\r\n      if (json?.activity) setActivity(json.activity);\r\n      return true;\r\n    } catch (err) {\r\n      console.error(\"handleSave error:\", err);\r\n      setUser(prev ?? null);\r\n      alert(\"Save failed due to network/server error.\");\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Add extra email (only one allowed)\r\n  async function handleAddEmail(email: string) {\r\n    if (!user) return false;\r\n    if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)) {\r\n      alert(\"Invalid email\");\r\n      return false;\r\n    }\r\n    const prev = user;\r\n    const updatedProfile = { ...(user.profile ?? {}), extraEmail: email };\r\n    setUser({ ...user, profile: updatedProfile });\r\n\r\n    try {\r\n      const res = await fetch(\"/api/me\", {\r\n        method: \"PATCH\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        credentials: \"include\",\r\n        body: JSON.stringify({ profile: updatedProfile }),\r\n      });\r\n      if (!res.ok) {\r\n        const txt = await res.text().catch(() => \"(no body)\");\r\n        console.error(\"Add email failed:\", txt);\r\n        setUser(prev);\r\n        alert(\"Failed to add email.\");\r\n        return false;\r\n      }\r\n      const json = await res.json().catch(() => null);\r\n      if (json?.user) setUser(normalizeUser(json.user));\r\n      if (json?.activity) setActivity(json.activity);\r\n      setAddEmailOpen(false);\r\n      return true;\r\n    } catch (err) {\r\n      console.error(err);\r\n      setUser(prev);\r\n      alert(\"Failed to add email (network).\");\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Remove extra email (send explicit null so backend can remove the field)\r\n  async function handleRemoveExtraEmail() {\r\n    if (!user) return false;\r\n    const prev = user;\r\n    const updatedProfile = { ...(user.profile ?? {}), extraEmail: null };\r\n    setUser({ ...user, profile: updatedProfile });\r\n\r\n    try {\r\n      const res = await fetch(\"/api/me\", {\r\n        method: \"PATCH\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        credentials: \"include\",\r\n        body: JSON.stringify({ profile: updatedProfile }),\r\n      });\r\n      if (!res.ok) {\r\n        const txt = await res.text().catch(() => \"(no body)\");\r\n        console.error(\"Remove email failed:\", txt);\r\n        setUser(prev);\r\n        alert(\"Failed to remove email.\");\r\n        return false;\r\n      }\r\n      const json = await res.json().catch(() => null);\r\n      if (json?.user) setUser(normalizeUser(json.user));\r\n      if (json?.activity) setActivity(json.activity);\r\n      return true;\r\n    } catch (err) {\r\n      console.error(err);\r\n      setUser(prev);\r\n      alert(\"Failed to remove email (network).\");\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // When child modal returns an updated user object, accept it; otherwise re-fetch /api/me\r\n  async function applyUpdatedUserFromChild(updatedUser: any) {\r\n    if (updatedUser && updatedUser.id && updatedUser.email) {\r\n      setUser(normalizeUser(updatedUser));\r\n      if (updatedUser.activity) setActivity(updatedUser.activity);\r\n      return;\r\n    }\r\n    // fallback refetch\r\n    try {\r\n      const r = await fetch(\"/api/me\", { credentials: \"include\", cache: \"no-store\" });\r\n      if (!r.ok) return;\r\n      const j = await r.json().catch(() => null);\r\n      if (j?.user) setUser(normalizeUser(j.user));\r\n      if (j?.activity) setActivity(j.activity);\r\n    } catch (err) {\r\n      console.error(\"refetch after child update failed\", err);\r\n    }\r\n  }\r\n\r\n  if (loading) return <div className=\"p-6\">Loading...</div>;\r\n  if (!user) return <div className=\"p-6\">Not logged in</div>;\r\n\r\n  const profile = (user.profile ?? {}) as Profile;\r\n  const role = (user.role ?? \"viewer\").toString().toUpperCase();\r\n\r\n  // compute updated label live (updates via tick)\r\n  const lastUpdatedISO = user.updatedAt ?? profile?.updatedAt ?? null;\r\n  const lastUpdatedLabel = formatRelativeExtended(lastUpdatedISO);\r\n  const headerUpdatedLabel = lastUpdatedLabel === \"just now\" ? \"Updated just now\" : `Updated ${lastUpdatedLabel}`;\r\n\r\n  return (\r\n    <main className=\"min-h-screen bg-gradient-to-b from-slate-50 via-white to-slate-50\">\r\n      <div className=\"max-w-7xl mx-auto px-6 py-8\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"h-12 w-12 rounded-xl bg-gradient-to-br from-blue-600 to-indigo-600 flex items-center justify-center shadow-md\">\r\n              <svg width=\"26\" height=\"26\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden>\r\n                <path d=\"M3 12h18\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" />\r\n                <path d=\"M7 6v12\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" />\r\n              </svg>\r\n            </div>\r\n            <div>\r\n              <div className=\"text-lg font-semibold text-slate-900\">Profile</div>\r\n              <div className=\"text-xs text-slate-500\">Manage your personal details and contact info</div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"hidden sm:inline-flex items-center gap-2 rounded-full px-3 py-1 bg-slate-100 text-slate-800 text-sm\">\r\n              <strong className=\"uppercase\">{role}</strong>\r\n              <span className=\"text-xs text-slate-600\">access</span>\r\n            </div>\r\n\r\n            <ProfileMenu email={user.email} avatarUrl={profile?.avatarUrl} />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6\">\r\n          {/* Left column: profile card + contacts */}\r\n          <div className=\"lg:col-span-8\">\r\n            <section className=\"bg-white/60 backdrop-blur-md rounded-3xl p-8 shadow-lg border border-slate-100\">\r\n              <div className=\"flex items-start gap-6\">\r\n                <div className=\"w-24 h-24 rounded-full overflow-hidden bg-slate-100 flex items-center justify-center\">\r\n                  {profile?.avatarUrl ? (\r\n                    // eslint-disable-next-line @next/next/no-img-element\r\n                    <img src={profile.avatarUrl} alt=\"avatar\" className=\"w-full h-full object-cover\" />\r\n                  ) : (\r\n                    <div className=\"text-3xl font-semibold text-slate-700\">{(user.name || user.email || \"U\").charAt(0).toUpperCase()}</div>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center gap-4\">\r\n                    <div>\r\n                      <h1 className=\"text-2xl font-bold text-slate-900\">{user.name ?? \"—\"}</h1>\r\n                      <div className=\"text-sm text-slate-500\">{user.email}</div>\r\n                    </div>\r\n\r\n                    <div className=\"ml-auto flex items-center gap-3\">\r\n                      <button onClick={() => setEditOpen(true)} className=\"px-4 py-2 rounded-lg bg-blue-700 text-white shadow hover:opacity-95\">\r\n                        Edit\r\n                      </button>\r\n                      {/* Settings removed per request */}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"mt-4 text-xs text-slate-500\">\r\n                    Last profile update: <span className=\"font-medium text-slate-700\">{lastUpdatedLabel}</span>\r\n                  </div>\r\n\r\n                  <div className=\"mt-6 grid grid-cols-2 gap-4 text-sm text-slate-600\">\r\n                    <div>\r\n                      <div className=\"text-xs text-slate-400\">Full Name</div>\r\n                      <div className=\"mt-1\">{user.name ?? \"—\"}</div>\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"text-xs text-slate-400\">Display Name</div>\r\n                      <div className=\"mt-1\">{profile.displayName ?? user.name ?? \"—\"}</div>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <div className=\"text-xs text-slate-400\">Gender</div>\r\n                      <div className=\"mt-1\">{profile.gender ?? \"I'd prefer not to say\"}</div>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <div className=\"text-xs text-slate-400\">Country/Region</div>\r\n                      <div className=\"mt-1\">{profile.country ?? \"—\"}</div>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <div className=\"text-xs text-slate-400\">State</div>\r\n                      <div className=\"mt-1\">{profile.state ?? \"—\"}</div>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <div className=\"text-xs text-slate-400\">Language</div>\r\n                      <div className=\"mt-1\">{profile.language ?? \"English\"}</div>\r\n                    </div>\r\n\r\n                    <div className=\"col-span-2\">\r\n                      <div className=\"text-xs text-slate-400\">Time zone</div>\r\n                      <div className=\"mt-1 text-sm text-slate-600\">{profile.timezone ?? \"(GMT +05:30) India Standard Time (Asia/Kolkata)\"}</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"mt-6\">\r\n                <h3 className=\"text-sm font-semibold text-slate-700 mb-2\">About</h3>\r\n                <p className=\"text-sm text-slate-600\">Use this profile page to keep your contact details up to date. Your name, display name and timezone are used across the app for messaging and notifications.</p>\r\n              </div>\r\n            </section>\r\n\r\n            {/* Email Addresses */}\r\n            <section className=\"mt-6 bg-white rounded-3xl p-6 shadow border border-slate-100\">\r\n              <div className=\"flex items-start justify-between\">\r\n                <div>\r\n                  <h2 className=\"text-lg font-semibold mb-1\">My Email Addresses</h2>\r\n                  <p className=\"text-sm text-slate-500 mb-4\">View and manage the email addresses associated with your account.</p>\r\n                </div>\r\n\r\n                <div className=\"text-sm text-slate-500\">{headerUpdatedLabel}</div>\r\n              </div>\r\n\r\n              <div className=\"border rounded-lg p-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-10 h-10 rounded-full bg-rose-100 flex items-center justify-center text-rose-600\">📧</div>\r\n                    <div>\r\n                      <div className=\"font-medium\">{user.email}</div>\r\n                      <div className=\"text-xs text-slate-400\">primary • added on account creation</div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center gap-3\">\r\n                    {/* Extra email flow: only one extra allowed */}\r\n                    {!profile?.extraEmail ? (\r\n                      <button className=\"px-3 py-2 text-sm rounded bg-slate-50 text-blue-600\" onClick={() => setAddEmailOpen(true)}>\r\n                        + Add Email Address\r\n                      </button>\r\n                    ) : (\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <div className=\"text-sm\">{profile.extraEmail}</div>\r\n                        <button className=\"px-3 py-2 text-sm rounded bg-red-50 text-red-600\" onClick={() => void handleRemoveExtraEmail()}>\r\n                          Remove\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </section>\r\n\r\n            {/* Mobile Numbers — display + verify modal */}\r\n            <section className=\"mt-6 bg-white rounded-3xl p-6 shadow border border-slate-100\">\r\n              <h2 className=\"text-lg font-semibold mb-2\">My Mobile Numbers</h2>\r\n              <p className=\"text-sm text-slate-500 mb-4\">View and manage the mobile numbers associated with your account.</p>\r\n\r\n              <div className=\"border rounded-lg p-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center text-amber-600\">📞</div>\r\n                    <div>\r\n                      <div className=\"font-medium\">{profile?.phoneNumber ?? \"—\"}</div>\r\n                      <div className={`text-xs ${profile?.phoneVerified ? \"text-green-600\" : \"text-slate-400\"}`}>\r\n                        {profile?.phoneVerified ? `verified • ${profile.phoneVerifiedAt ? new Date(profile.phoneVerifiedAt).toLocaleString() : \"\"}` : \"not verified\"}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center gap-3\">\r\n                    {!profile?.phoneVerified ? (\r\n                      <button className=\"px-3 py-2 text-sm rounded bg-blue-600 text-white\" onClick={() => setVerifyOpen(true)}>\r\n                        Verify number\r\n                      </button>\r\n                    ) : (\r\n                      <button className=\"px-3 py-2 text-sm rounded bg-slate-50 text-slate-700\" onClick={() => setVerifyOpen(true)}>\r\n                        Manage\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </section>\r\n          </div>\r\n\r\n          {/* Right column: activity & quick actions */}\r\n          <aside className=\"lg:col-span-4 space-y-4\">\r\n            <div className=\"bg-white rounded-2xl p-4 shadow-sm border border-slate-100\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h3 className=\"text-sm font-semibold text-slate-700\">Profile Activity (30 days)</h3>\r\n                <span className=\"text-xs text-slate-500\">{headerUpdatedLabel}</span>\r\n              </div>\r\n\r\n              <div className=\"mt-3\">\r\n                <div className=\"flex items-end gap-6\">\r\n                  <div>\r\n                    <div className=\"text-2xl font-bold\">{activity ? activity.logins30d : \"—\"}</div>\r\n                    <div className=\"text-xs text-slate-500\">Logins (30d)</div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"text-2xl font-bold\">{activity ? activity.changes30d : \"—\"}</div>\r\n                    <div className=\"text-xs text-slate-500\">Profile changes (30d)</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white rounded-2xl p-4 shadow-sm border border-slate-100\">\r\n              <h4 className=\"text-sm font-semibold text-slate-700 mb-2\">Quick actions</h4>\r\n              <div className=\"flex flex-col gap-2\">\r\n                <button className=\"text-left px-3 py-2 rounded-lg bg-slate-50\" onClick={() => router.push(\"/inbox\")}>Open Inbox</button>\r\n                <Link className=\"text-left px-3 py-2 rounded-lg bg-slate-50\" href=\"/settings\">Settings & Integrations</Link>\r\n                <Link className=\"text-left px-3 py-2 rounded-lg bg-slate-50\" href=\"/security\">Security</Link>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"text-center text-sm text-slate-500\">Built for the Attack Capital assignment — profile management UI.</div>\r\n          </aside>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Edit modal */}\r\n      <EditProfileModal\r\n        open={editOpen}\r\n        onClose={() => setEditOpen(false)}\r\n        user={user}\r\n        onSave={async (payload) => {\r\n          const ok = await handleSave(payload);\r\n          if (ok) setEditOpen(false);\r\n          return ok;\r\n        }}\r\n      />\r\n\r\n      {/* Add email modal */}\r\n      <AddEmailModal\r\n        open={addEmailOpen}\r\n        onClose={() => setAddEmailOpen(false)}\r\n        onAdd={handleAddEmail}\r\n      />\r\n\r\n      {/* Phone verify modal (inline component) */}\r\n      {verifyOpen && (\r\n        <PhoneVerifyModal\r\n          initialProfile={profile}\r\n          onClose={() => setVerifyOpen(false)}\r\n          onVerified={(updatedUser) => {\r\n            applyUpdatedUserFromChild(updatedUser);\r\n            setVerifyOpen(false);\r\n          }}\r\n        />\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n\r\n/* -------------------------------------------------------------------------- */\r\n/* Inline PhoneVerifyModal\r\n   - client-side restcountries for dial codes (fallback to local table)\r\n   - responsive layout (stack on narrow, inline on wide)\r\n   - 6-digit OTP, paste support, focus management\r\n   - expects /api/phone/send-otp and /api/phone/verify-otp endpoints\r\n/* -------------------------------------------------------------------------- */\r\n\r\nfunction PhoneVerifyModal({\r\n  initialProfile,\r\n  onClose,\r\n  onVerified,\r\n}: {\r\n  initialProfile: Profile;\r\n  onClose: () => void;\r\n  onVerified: (updatedUser: any) => void;\r\n}) {\r\n  const [countries, setCountries] = useState<Array<{ cca2: string; name: string; dial?: string }>>([]);\r\n  const [loadingCountries, setLoadingCountries] = useState(true);\r\n  const [countriesError, setCountriesError] = useState<string | null>(null);\r\n\r\n  const initialCca2 = ((initialProfile?.countryCode ?? \"IN\") as string).toUpperCase() ?? \"IN\";\r\n  const [countryCca2, setCountryCca2] = useState<string>(initialCca2);\r\n\r\n  const [dialCode, setDialCode] = useState<string>(DEFAULT_DIAL);\r\n  const [digitCount, setDigitCount] = useState<number>(FALLBACK_LENGTH[initialCca2] ?? DEFAULT_NATIONAL_LENGTH);\r\n\r\n  // digits local state => ensure it resizes when digitCount changes\r\n  const [digits, setDigits] = useState<string[]>(() => Array(digitCount).fill(\"\"));\r\n  useEffect(() => {\r\n    setDigits((prev) => {\r\n      const next = Array(digitCount).fill(\"\");\r\n      for (let i = 0; i < Math.min(prev.length, next.length); i++) next[i] = prev[i];\r\n      return next;\r\n    });\r\n  }, [digitCount]);\r\n\r\n  const digitInputsRef = React.useRef<Array<HTMLInputElement | null>>([]);\r\n\r\n  // store e164 phone used for verification\r\n  const [phoneE164, setPhoneE164] = useState<string | null>(initialProfile?.phoneNumber ?? null);\r\n\r\n  const [otpSent, setOtpSent] = useState(false);\r\n  const [otpExpiry, setOtpExpiry] = useState<number | null>(null);\r\n  const [otpDigits, setOtpDigits] = useState<string[]>(() => Array(OTP_LEN).fill(\"\"));\r\n  const otpInputsRef = React.useRef<Array<HTMLInputElement | null>>([]);\r\n  const [sending, setSending] = useState(false);\r\n  const [verifying, setVerifying] = useState(false);\r\n  const [message, setMessage] = useState<{ text: string; ok: boolean } | null>(null);\r\n\r\n  // load countries (restcountries). lightweight fields\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    setLoadingCountries(true);\r\n    setCountriesError(null);\r\n    (async () => {\r\n      try {\r\n        const res = await fetch(\"https://restcountries.com/v3.1/all?fields=cca2,name,idd\");\r\n        if (!res.ok) throw new Error(\"Failed to load countries\");\r\n        const arr = await res.json();\r\n        if (cancelled) return;\r\n        const list = arr\r\n          .map((c: any) => {\r\n            const cca2 = (c.cca2 || \"\").toString().toUpperCase();\r\n            const name = (c.name && (c.name.common || c.name.official)) || cca2;\r\n            let dial: string | undefined = undefined;\r\n            try {\r\n              const idd = c.idd || {};\r\n              const root = idd.root ?? \"\";\r\n              const suffixes: string[] = idd.suffixes ?? [];\r\n              if (root) {\r\n                dial = suffixes && suffixes.length > 0 && suffixes[0] ? `${root}${suffixes[0]}` : root;\r\n              }\r\n            } catch (e) {\r\n              dial = undefined;\r\n            }\r\n            return { cca2, name, dial };\r\n          })\r\n          .filter(Boolean)\r\n          .sort((a: any, b: any) => a.name.localeCompare(b.name));\r\n        setCountries(list);\r\n      } catch (err) {\r\n        console.error(\"load countries error:\", err);\r\n        setCountriesError(\"Failed to load countries\");\r\n      } finally {\r\n        if (!cancelled) setLoadingCountries(false);\r\n      }\r\n    })();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, []);\r\n\r\n  // when countries list or selected country changes, update dial and digitCount\r\n  useEffect(() => {\r\n    const info = countries.find((c) => c.cca2 === countryCca2);\r\n    if (info && info.dial) setDialCode(info.dial);\r\n    else setDialCode(DEFAULT_DIAL);\r\n\r\n    const len = FALLBACK_LENGTH[countryCca2] ?? DEFAULT_NATIONAL_LENGTH;\r\n    setDigitCount(len);\r\n  }, [countryCca2, countries]);\r\n\r\n  // focus management & ESC to close\r\n  useEffect(() => {\r\n    const t = setTimeout(() => digitInputsRef.current[0]?.focus(), 80);\r\n    function onKey(e: KeyboardEvent) {\r\n      if (e.key === \"Escape\") onClose();\r\n    }\r\n    window.addEventListener(\"keydown\", onKey);\r\n    return () => {\r\n      clearTimeout(t);\r\n      window.removeEventListener(\"keydown\", onKey);\r\n    };\r\n  }, [onClose]);\r\n\r\n  const onlyDigits = (s: string) => s.replace(/\\D/g, \"\");\r\n  const setLocalDigit = (i: number, val: string) => {\r\n    const d = onlyDigits(val).slice(0, 1);\r\n    setDigits((prev) => {\r\n      const next = prev.slice();\r\n      next[i] = d;\r\n      return next;\r\n    });\r\n    if (d && i < digitCount - 1) digitInputsRef.current[i + 1]?.focus();\r\n  };\r\n  const onDigitKey = (i: number, e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === \"Backspace\" && digits[i] === \"\" && i > 0) digitInputsRef.current[i - 1]?.focus();\r\n  };\r\n\r\n  const localNumber = digits.join(\"\");\r\n  const localComplete = localNumber.length === digitCount;\r\n\r\n  // OTP handlers\r\n  const onOtpChange = (i: number, v: string) => {\r\n    const d = onlyDigits(v).slice(0, 1);\r\n    setOtpDigits((prev) => {\r\n      const next = prev.slice();\r\n      next[i] = d;\r\n      return next;\r\n    });\r\n    if (d && i < OTP_LEN - 1) otpInputsRef.current[i + 1]?.focus();\r\n  };\r\n  const onOtpKey = (i: number, e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === \"Backspace\" && otpDigits[i] === \"\" && i > 0) otpInputsRef.current[i - 1]?.focus();\r\n    if (e.key === \"Enter\") tryVerifyOtp();\r\n  };\r\n  const otpValue = otpDigits.join(\"\");\r\n\r\n  async function sendOtp() {\r\n    if (!localComplete) {\r\n      setMessage({ text: `Enter ${digitCount} digits`, ok: false });\r\n      return;\r\n    }\r\n    const e164 = `${dialCode}${localNumber}`;\r\n    // persist e164 so tryVerifyOtp can reference it\r\n    setPhoneE164(e164);\r\n\r\n    setSending(true);\r\n    setMessage(null);\r\n    try {\r\n      const res = await fetch(\"/api/phone/send-otp\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        credentials: \"include\",\r\n        body: JSON.stringify({ phone: e164, otpLen: OTP_LEN }),\r\n      });\r\n      const json = await res.json().catch(() => null);\r\n      console.debug(\"[PhoneVerifyModal] send-otp response:\", res.status, json);\r\n      if (!res.ok || json?.error) {\r\n        setMessage({ text: json?.error || \"Failed to send OTP\", ok: false });\r\n        setOtpSent(false);\r\n      } else {\r\n        setMessage({ text: \"OTP sent — check your phone (or console in dev)\", ok: true });\r\n        setOtpSent(true);\r\n        setOtpExpiry(Date.now() + 5 * 60 * 1000);\r\n        setTimeout(() => otpInputsRef.current[0]?.focus(), 120);\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage({ text: \"Network error sending OTP\", ok: false });\r\n      setOtpSent(false);\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  }\r\n\r\n  async function tryVerifyOtp() {\r\n    if (!phoneE164) {\r\n      setMessage({ text: \"Send OTP first\", ok: false });\r\n      return;\r\n    }\r\n\r\n    const otpValueLocal = otpDigits.join(\"\");\r\n    if (otpValueLocal.length !== OTP_LEN) {\r\n      setMessage({ text: `Enter ${OTP_LEN}-digit code`, ok: false });\r\n      return;\r\n    }\r\n\r\n    setVerifying(true);\r\n    setMessage(null);\r\n\r\n    const payload = { phone: phoneE164, otp: otpValueLocal };\r\n    console.debug(\"[PhoneVerifyModal] verify payload:\", payload);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/phone/verify-otp\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        credentials: \"include\",\r\n        body: JSON.stringify(payload),\r\n      });\r\n\r\n      let body: any = null;\r\n      try {\r\n        body = await res.json().catch(() => null);\r\n      } catch (e) {\r\n        body = null;\r\n      }\r\n\r\n      console.debug(\"[PhoneVerifyModal] verify response status:\", res.status, \"body:\", body);\r\n\r\n      if (!res.ok) {\r\n        const errMsg =\r\n          (body && (body.error || body.message)) ||\r\n          (await res.text().catch(() => null)) ||\r\n          `HTTP ${res.status}`;\r\n        setMessage({ text: errMsg, ok: false });\r\n        setOtpDigits(Array(OTP_LEN).fill(\"\"));\r\n        otpInputsRef.current[0]?.focus();\r\n        return;\r\n      }\r\n\r\n      // success\r\n      setMessage({ text: \"Phone number verified\", ok: true });\r\n      setOtpSent(false);\r\n      setOtpDigits(Array(OTP_LEN).fill(\"\"));\r\n\r\n      if (body && body.user) {\r\n        // call parent callback that the caller passed (onVerified)\r\n        try {\r\n          onVerified(body.user);\r\n        } catch (e) {\r\n          console.warn(\"[PhoneVerifyModal] onVerified threw:\", e);\r\n        }\r\n      } else {\r\n        // fallback: try re-fetch /api/me and call onVerified with the new user (or null)\r\n        try {\r\n          const r = await fetch(\"/api/me\", { credentials: \"include\", cache: \"no-store\" });\r\n          if (r.ok) {\r\n            const j = await r.json().catch(() => null);\r\n            onVerified(j?.user ?? null);\r\n          } else {\r\n            onVerified(null);\r\n          }\r\n        } catch (err) {\r\n          console.error(\"[PhoneVerifyModal] fallback fetch /api/me failed:\", err);\r\n          onVerified(null);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error(\"[PhoneVerifyModal] verify network error:\", err);\r\n      setMessage({ text: \"Network error verifying OTP\", ok: false });\r\n    } finally {\r\n      setVerifying(false);\r\n    }\r\n  }\r\n\r\n  function resetOtp() {\r\n    setOtpSent(false);\r\n    setOtpDigits(Array(OTP_LEN).fill(\"\"));\r\n    setOtpExpiry(null);\r\n    setMessage(null);\r\n    setTimeout(() => digitInputsRef.current[0]?.focus(), 80);\r\n  }\r\n\r\n  function handlePasteNumber(e: React.ClipboardEvent<HTMLInputElement>) {\r\n    const text = e.clipboardData.getData(\"Text\");\r\n    const only = onlyDigits(text).slice(0, digitCount);\r\n    if (only.length === digitCount) {\r\n      setDigits(only.split(\"\"));\r\n      setTimeout(() => sendOtp(), 80);\r\n    }\r\n  }\r\n\r\n  const digitBoxClass = \"w-9 sm:w-10 md:w-12 h-10 rounded border text-center\";\r\n  const otpBoxClass = \"w-9 sm:w-10 md:w-12 h-10 rounded border text-center\";\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6\">\r\n      <div className=\"absolute inset-0 bg-black/40\" onClick={onClose} aria-hidden />\r\n      <div className=\"relative z-10 w-full max-w-2xl bg-white rounded-xl shadow-lg border ring-1 ring-slate-200 overflow-hidden\">\r\n        <div className=\"flex items-start justify-between gap-4 p-5 border-b\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-slate-900\">Verify phone number</h3>\r\n            <p className=\"text-sm text-slate-500 mt-1\">Select country (dial code derived automatically), enter your phone and verify with a {OTP_LEN}-digit code.</p>\r\n          </div>\r\n          <div>\r\n            <button aria-label=\"Close\" onClick={onClose} className=\"rounded-md p-2 text-slate-600 hover:bg-slate-100\">✕</button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-5 space-y-4\">\r\n          {/* country select + dial + digits */}\r\n          <div className=\"flex flex-col md:flex-row md:items-center gap-3\">\r\n            <div className=\"flex-1 min-w-0\">\r\n              <label className=\"sr-only\">Country</label>\r\n              <select\r\n                value={countryCca2}\r\n                onChange={(e) => setCountryCca2(e.target.value)}\r\n                className=\"w-full rounded border px-3 py-2 text-sm\"\r\n              >\r\n                {loadingCountries ? (\r\n                  <option>Loading countries...</option>\r\n                ) : (\r\n                  <>\r\n                    {countries.map((c) => (\r\n                      <option key={c.cca2} value={c.cca2}>\r\n                        {c.name} {c.dial ? `(${c.dial})` : \"\"}\r\n                      </option>\r\n                    ))}\r\n                    <option value=\"OTHER\">Other</option>\r\n                  </>\r\n                )}\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-3 w-full md:w-auto\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"px-3 py-2 rounded border bg-slate-50 text-sm font-medium\">{dialCode}</div>\r\n\r\n                <div onPaste={handlePasteNumber} className=\"flex gap-1 flex-wrap\" style={{ maxWidth: \"36ch\" }}>\r\n                  {Array.from({ length: digitCount }).map((_, i) => (\r\n                    <input\r\n                      key={i}\r\n                      ref={(el) => (digitInputsRef.current[i] = el)}\r\n                      inputMode=\"numeric\"\r\n                      maxLength={1}\r\n                      value={digits[i] ?? \"\"}\r\n                      onChange={(e) => setLocalDigit(i, e.target.value)}\r\n                      onKeyDown={(e) => onDigitKey(i, e)}\r\n                      className={`${digitBoxClass}`}\r\n                      aria-label={`phone-digit-${i + 1}`}\r\n                      style={{ textAlign: \"center\" }}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"ml-auto\">\r\n                {!otpSent ? (\r\n                  <button\r\n                    onClick={() => sendOtp()}\r\n                    disabled={!localComplete || sending}\r\n                    className={`px-3 py-2 rounded ${localComplete ? \"bg-blue-600 text-white\" : \"bg-slate-100 text-slate-500\"}`}\r\n                  >\r\n                    {sending ? \"Sending...\" : \"Send OTP\"}\r\n                  </button>\r\n                ) : (\r\n                  <button onClick={() => resetOtp()} className=\"px-3 py-2 rounded bg-slate-50 text-slate-700\">Cancel</button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* OTP inputs */}\r\n          {otpSent && (\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center gap-3\">\r\n              <div className=\"flex gap-2 flex-wrap\">\r\n                {Array.from({ length: OTP_LEN }).map((_, i) => (\r\n                  <input\r\n                    key={i}\r\n                    ref={(el) => (otpInputsRef.current[i] = el)}\r\n                    inputMode=\"numeric\"\r\n                    maxLength={1}\r\n                    value={otpDigits[i] ?? \"\"}\r\n                    onChange={(e) => onOtpChange(i, e.target.value)}\r\n                    onKeyDown={(e) => onOtpKey(i, e)}\r\n                    className={`${otpBoxClass}`}\r\n                    aria-label={`otp-${i + 1}`}\r\n                  />\r\n                ))}\r\n              </div>\r\n\r\n              <div className=\"ml-auto flex items-center gap-3\">\r\n                <button onClick={() => tryVerifyOtp()} disabled={verifying} className=\"px-3 py-2 rounded bg-green-600 text-white\">\r\n                  {verifying ? \"Verifying...\" : \"Verify OTP\"}\r\n                </button>\r\n                <div className=\"text-sm text-slate-500\">{otpExpiry ? `Expires in ${Math.max(0, Math.ceil((otpExpiry - Date.now()) / 1000))}s` : \"\"}</div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {message && <div className={`text-sm ${message.ok ? \"text-green-600\" : \"text-rose-600\"}`}>{message.text}</div>}\r\n          {countriesError && <div className=\"text-xs text-rose-600\">{countriesError}</div>}\r\n\r\n          <div className=\"flex justify-end gap-3 pt-3\">\r\n            <button onClick={onClose} className=\"px-4 py-2 rounded-lg border\">Close</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":["React","useEffect","useState","Link","useRouter","EditProfileModal","ProfileMenu","AddEmailModal","Profile","displayName","gender","country","state","language","timezone","avatarUrl","avatarBase64","extraEmail","phoneNumber","phoneVerified","phoneVerifiedAt","countryCode","countryName","stateName","countryGeonameId","stateGeonameId","User","id","email","name","role","profile","updatedAt","DEFAULT_DIAL","DEFAULT_NATIONAL_LENGTH","OTP_LEN","formatRelativeExtended","iso","then","Date","getTime","isNaN","diffMs","now","diffMins","Math","floor","diffHours","diffDays","weeks","months","years","FALLBACK_LENGTH","Record","IN","US","CA","GB","AU","SG","BD","NP","PK","normalizeUser","user","p","normalizedProfile","country_name","state_name","ProfilePage","router","setUser","loading","setLoading","editOpen","setEditOpen","addEmailOpen","setAddEmailOpen","activity","setActivity","logins30d","changes30d","verifyOpen","setVerifyOpen","setTick","setInterval","s","clearInterval","mounted","ac","AbortController","load","res","fetch","signal","credentials","ok","json","err","console","error","abort","handleSave","updated","Partial","prev","prevU","method","headers","body","JSON","stringify","txt","text","catch","alert","debug","u","handleAddEmail","test","updatedProfile","handleRemoveExtraEmail","applyUpdatedUserFromChild","updatedUser","r","cache","j","toString","toUpperCase","lastUpdatedISO","lastUpdatedLabel","headerUpdatedLabel","charAt","toLocaleString","push","payload","PhoneVerifyModal","initialProfile","onClose","onVerified","countries","setCountries","Array","cca2","dial","loadingCountries","setLoadingCountries","countriesError","setCountriesError","initialCca2","countryCca2","setCountryCca2","dialCode","setDialCode","digitCount","setDigitCount","digits","setDigits","fill","next","i","min","length","digitInputsRef","useRef","HTMLInputElement","phoneE164","setPhoneE164","otpSent","setOtpSent","otpExpiry","setOtpExpiry","otpDigits","setOtpDigits","otpInputsRef","sending","setSending","verifying","setVerifying","message","setMessage","cancelled","Error","arr","list","map","c","common","official","undefined","idd","root","suffixes","e","filter","Boolean","sort","a","b","localeCompare","info","find","len","t","setTimeout","current","focus","onKey","KeyboardEvent","key","window","addEventListener","clearTimeout","removeEventListener","onlyDigits","replace","setLocalDigit","val","d","slice","onDigitKey","localNumber","join","localComplete","onOtpChange","v","onOtpKey","tryVerifyOtp","otpValue","sendOtp","e164","phone","otpLen","status","otpValueLocal","otp","errMsg","warn","resetOtp","handlePasteNumber","ClipboardEvent","clipboardData","getData","only","split","digitBoxClass","otpBoxClass","target","value","maxWidth","from","_","el","textAlign","max","ceil"],"mappings":"AAAA,uBAAA;;;;;;AAGA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,IAAI,MAAM,WAAW;AAC5B,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,OAAOC,gBAAgB,MAAM,kCAAkC;AAC/D,OAAOC,WAAW,MAAM,kCAAkC;AAC1D,OAAOC,aAAa,MAAM,oCAAoC;;;AAP9D,YAAY;;;;;;;AAmDZ,MAAM0B,YAAY,GAAG,IAAI;AACzB,MAAMC,uBAAuB,GAAG,EAAE;AAClC,MAAMC,OAAO,GAAG,CAAC;AAEjB;;CAEA,GACA,SAASC,sBAAsBA,CAACC,GAAmB,CAAf,CAAiB,CAAf,MAAM,GAAG;IAC7C,IAAI,CAACA,GAAG,EAAE,OAAO,GAAG;IACpB,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,GAAG,CAAC,CAACG,OAAO,CAAC,CAAC;IACpC,IAAIC,KAAK,CAACH,IAAI,CAAC,EAAE,OAAO,GAAG;IAC3B,MAAMI,MAAM,GAAGH,IAAI,CAACI,GAAG,CAAC,CAAC,GAAGL,IAAI;IAChC,MAAMM,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACJ,MAAM,GAAG,KAAK,CAAC;IAC3C,IAAIE,QAAQ,GAAG,CAAC,EAAE,OAAO,UAAU;IACnC,IAAIA,QAAQ,GAAG,EAAE,EAAE,OAAO,GAAGA,QAAQ,CAAA,KAAA,CAAO;IAC5C,MAAMG,SAAS,GAAGF,IAAI,CAACC,KAAK,CAACF,QAAQ,GAAG,EAAE,CAAC;IAC3C,IAAIG,SAAS,GAAG,EAAE,EAAE,OAAO,GAAGA,SAAS,CAAA,KAAA,CAAO;IAC9C,MAAMC,QAAQ,GAAGH,IAAI,CAACC,KAAK,CAACC,SAAS,GAAG,EAAE,CAAC;IAC3C,IAAIC,QAAQ,GAAG,CAAC,EAAE,OAAO,GAAGA,QAAQ,CAAA,KAAA,CAAO;IAC3C,IAAIA,QAAQ,GAAG,EAAE,EAAE;QACjB,MAAMC,KAAK,GAAGJ,IAAI,CAACC,KAAK,CAACE,QAAQ,GAAG,CAAC,CAAC;QACtC,OAAO,GAAGC,KAAK,CAAA,KAAA,CAAO;IACxB;IACA,IAAID,QAAQ,GAAG,GAAG,EAAE;QAClB,MAAME,MAAM,GAAGL,IAAI,CAACC,KAAK,CAACE,QAAQ,GAAG,EAAE,CAAC;QACxC,OAAO,GAAGE,MAAM,CAAA,MAAA,CAAQ;IAC1B;IACA,MAAMC,KAAK,GAAGN,IAAI,CAACC,KAAK,CAACE,QAAQ,GAAG,GAAG,CAAC;IACxC,OAAO,GAAGG,KAAK,CAAA,KAAA,CAAO;AACxB;AAEA,+EAAA,GACA,MAAMC,eAAe,EAAEC,CAAyB,KAAnB,CAAC,MAAM,EAAE,MAAM,CAAC;IAC3CC,EAAE,EAAE,EAAE;IACNC,EAAE,EAAE,EAAE;IACNC,EAAE,EAAE,EAAE;IACNC,EAAE,EAAE,EAAE;IACNC,EAAE,EAAE,CAAC;IACLC,EAAE,EAAE,CAAC;IACLC,EAAE,EAAE,EAAE;IACNC,EAAE,EAAE,EAAE;IACNC,EAAE,EAAE;AACN,CAAC;AAED;;;;CAIA,GACA,SAASC,aAAaA,CAACC,IAAI,AAAK,CAAC,CAAJ,CAAM,GAAG,CAAC;IACrC,IAAI,CAACA,IAAI,EAAE,OAAOA,IAAI;IACtB,MAAMC,CAAC,GAAGD,IAAI,CAACjC,OAAO,IAAI,CAAC,CAAC;IAC5B,MAAMmC,iBAAiB,GAAG;QACxB,GAAGD,CAAC;QACJtD,OAAO,EAAEsD,CAAC,CAACtD,OAAO,IAAIsD,CAAC,CAAC3C,WAAW,IAAI2C,CAAC,CAACE,YAAY,IAAI,IAAI;QAC7DvD,KAAK,EAAEqD,CAAC,CAACrD,KAAK,IAAIqD,CAAC,CAAC1C,SAAS,IAAI0C,CAAC,CAACG,UAAU,IAAI;IACnD,CAAC;IACD,OAAO;QAAE,GAAGJ,IAAI;QAAEjC,OAAO,EAAEmC;IAAkB,CAAC;AAChD;AAEe;;IACb,MAAMI,MAAM,OAAGlE;IACf,MAAM,CAAC4D,IAAI,EAAEO,OAAO,CAAC,OAAGrE,yKAAQ,CAACwB,CAAa,GAAT,CAAa,CAAC,CAAX,IAAI,CAAC;IAC7C,MAAM,CAAC8C,OAAO,EAAEC,UAAU,CAAC,OAAGvE,yKAAQ,EAAC,IAAI,CAAC;IAC5C,MAAM,CAACwE,QAAQ,EAAEC,WAAW,CAAC,OAAGzE,yKAAQ,EAAC,KAAK,CAAC;IAC/C,MAAM,CAAC0E,YAAY,EAAEC,eAAe,CAAC,OAAG3E,yKAAQ,EAAC,KAAK,CAAC;IACvD,MAAM,CAAC4E,QAAQ,EAAEC,WAAW,CAAC,OAAG7E,yKAAQ,CAAC,CAAkD,IAAI,CAAC;IAEhG,2BAAA;IACA,MAAM,CAACgF,UAAU,EAAEC,aAAa,CAAC,OAAGjF,yKAAQ,EAAC,KAAK,CAAC;IAEnD,8CAAA;IACA,MAAM,GAAGkF,OAAO,CAAC,OAAGlF,yKAAQ,EAAC,CAAC,CAAC;QAC/BD,0KAAS;iCAAC,MAAM;YACd,MAAM0B,EAAE,GAAG0D,WAAW;4CAAC,IAAMD,OAAO;qDAAEE,CAAC,GAAKA,CAAC,GAAG,CAAC,CAAC;;2CAAE,KAAK,CAAC;YAC1D;yCAAO,IAAMC,aAAa,CAAC5D,EAAE,CAAC;;QAChC,CAAC;gCAAE,EAAE,CAAC;IAEN,mEAAA;IACA1B,8KAAS;iCAAC,MAAM;YACd,IAAIuF,OAAO,GAAG,IAAI;YAClB,MAAMC,EAAE,GAAG,IAAIC,eAAe,CAAC,CAAC;YAEhC,eAAeC,IAAIA,CAAA,EAAG;gBACpB,IAAI;oBACF,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,SAAS,EAAE;wBAAEC,MAAM,EAAEL,EAAE,CAACK,MAAM;wBAAEC,WAAW,EAAE;oBAAU,CAAC,CAAC;oBACjF,IAAI,CAACH,GAAG,CAACI,EAAE,EAAE;wBACX,IAAI,CAACR,OAAO,EAAE;wBACdjB,OAAO,CAAC,IAAI,CAAC;wBACbQ,WAAW,CAAC,IAAI,CAAC;wBACjB;oBACF;oBACA,MAAMkB,IAAI,GAAG,MAAML,GAAG,CAACK,IAAI,CAAC,CAAC;oBAC7B,IAAI,CAACT,OAAO,EAAE;oBACd,6DAAA;oBACAjB,OAAO,CAACR,aAAa,CAACkC,IAAI,CAACjC,IAAI,IAAI,IAAI,CAAC,CAAC;oBACzCe,WAAW,CAACkB,IAAI,CAACnB,QAAQ,IAAI,IAAI,CAAC;gBACpC,CAAC,CAAC,OAAOoB,GAAG,EAAE,AAAK,GAAF;oBACf,IAAIA,GAAG,EAAErE,IAAI,KAAK,YAAY,EAAE;oBAChCsE,OAAO,CAACC,KAAK,CAAC,qBAAqB,EAAEF,GAAG,CAAC;oBACzC,IAAI,CAACV,OAAO,EAAE;oBACdjB,OAAO,CAAC,IAAI,CAAC;oBACbQ,WAAW,CAAC,IAAI,CAAC;gBACnB,CAAC,QAAS;oBACR,IAAIS,OAAO,EAAEf,UAAU,CAAC,KAAK,CAAC;gBAChC;YACF;YAEAkB,IAAI,CAAC,CAAC;YACN;yCAAO,MAAM;oBACXH,OAAO,GAAG,KAAK;oBACfC,EAAE,CAACY,KAAK,CAAC,CAAC;gBACZ,CAAC;;QACH,CAAC;gCAAE,EAAE,CAAC;IAEN,oEAAA;IACA,eAAeC,UAAUA,CAACC,OAAO,AAAmC,EAAjCC,AAAmC,OAA5B,CAAC9E,IAAI,GAAG;QAChD,MAAM+E,IAAI,GAAGzC,IAAI;QACjB,mCAAA;QACAO,OAAO,EAAEmC,KAAK,GAAMA,KAAK,GAAG;gBAAE,GAAGA,KAAK;gBAAE,GAAGH,OAAAA;YAAQ,CAAC,GAAGG,KAAM,CAAC;QAE9D,IAAI;YACF,MAAMd,KAAG,GAAG,MAAMC,KAAK,CAAC,SAAS,EAAE;gBACjCc,MAAM,EAAE,OAAO;gBACfC,OAAO,EAAE;oBAAE,cAAc,EAAE;gBAAmB,CAAC;gBAC/Cb,WAAW,EAAE,SAAS;gBACtBc,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACR,OAAO;YAC9B,CAAC,CAAC;YAEF,IAAI,CAACX,KAAG,CAACI,EAAE,EAAE;gBACX,MAAMgB,GAAG,GAAG,MAAMpB,KAAG,CAACqB,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,IAAM,WAAW,CAAC;gBACrDf,OAAO,CAACC,KAAK,CAAC,cAAc,EAAEY,GAAG,CAAC;gBAClCzC,OAAO,CAACkC,IAAI,IAAI,IAAI,CAAC;gBACrBU,KAAK,CAAC,uCAAuC,CAAC;gBAC9C,OAAO,KAAK;YACd;YAEA,MAAMlB,MAAI,GAAG,MAAML,KAAG,CAACK,IAAI,CAAC,CAAC,CAACiB,KAAK,CAAC,IAAM,IAAI,CAAC;YAC/Cf,OAAO,CAACiB,KAAK,CAAC,kBAAkB,EAAEnB,MAAI,CAAC;YACvC,IAAIA,MAAI,EAAEjC,IAAI,EAAE;gBACdO,OAAO,CAACR,aAAa,CAACkC,MAAI,CAACjC,IAAI,CAAC,CAAC;YACnC,CAAC,MAAM,IAAIiC,MAAI,EAAE;gBACf,yBAAA;gBACA1B,OAAO,EAAE8C,CAAC,GAAMA,CAAC,GAAG;wBAAE,GAAGA,CAAC;wBAAE,GAAGpB,MAAAA;oBAAK,CAAC,GAAGoB,CAAE,CAAC;YAC7C,CAAC,MAAM;gBACL9C,OAAO,CAACkC,IAAI,IAAI,IAAI,CAAC;YACvB;YAEA,IAAIR,MAAI,EAAEnB,QAAQ,EAAEC,WAAW,CAACkB,MAAI,CAACnB,QAAQ,CAAC;YAC9C,OAAO,IAAI;QACb,CAAC,CAAC,OAAOoB,KAAG,EAAE;YACZC,OAAO,CAACC,KAAK,CAAC,mBAAmB,EAAEF,KAAG,CAAC;YACvC3B,OAAO,CAACkC,IAAI,IAAI,IAAI,CAAC;YACrBU,KAAK,CAAC,0CAA0C,CAAC;YACjD,OAAO,KAAK;QACd;IACF;IAEA,qCAAA;IACA,eAAeG,cAAcA,CAAC1F,KAAK,AAAQ,EAAE,AAAR;QACnC,IAAI,CAACoC,IAAI,EAAE,OAAO,KAAK;QACvB,IAAI,CAAC,4BAA4B,CAACuD,IAAI,CAAC3F,KAAK,CAAC,EAAE;YAC7CuF,KAAK,CAAC,eAAe,CAAC;YACtB,OAAO,KAAK;QACd;QACA,MAAMV,MAAI,GAAGzC,IAAI;QACjB,MAAMwD,cAAc,GAAG;YAAE,GAAIxD,IAAI,CAACjC,OAAO,IAAI,CAAC,CAAC,CAAC;YAAEd,UAAU,EAAEW;QAAM,CAAC;QACrE2C,OAAO,CAAC;YAAE,GAAGP,IAAI;YAAEjC,OAAO,EAAEyF;QAAe,CAAC,CAAC;QAE7C,IAAI;YACF,MAAM5B,KAAG,GAAG,MAAMC,KAAK,CAAC,SAAS,EAAE;gBACjCc,MAAM,EAAE,OAAO;gBACfC,OAAO,EAAE;oBAAE,cAAc,EAAE;gBAAmB,CAAC;gBAC/Cb,WAAW,EAAE,SAAS;gBACtBc,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;oBAAEhF,OAAO,EAAEyF;gBAAe,CAAC;YAClD,CAAC,CAAC;YACF,IAAI,CAAC5B,KAAG,CAACI,EAAE,EAAE;gBACX,MAAMgB,KAAG,GAAG,MAAMpB,KAAG,CAACqB,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,IAAM,WAAW,CAAC;gBACrDf,OAAO,CAACC,KAAK,CAAC,mBAAmB,EAAEY,KAAG,CAAC;gBACvCzC,OAAO,CAACkC,MAAI,CAAC;gBACbU,KAAK,CAAC,sBAAsB,CAAC;gBAC7B,OAAO,KAAK;YACd;YACA,MAAMlB,MAAI,GAAG,MAAML,KAAG,CAACK,IAAI,CAAC,CAAC,CAACiB,KAAK,CAAC,IAAM,IAAI,CAAC;YAC/C,IAAIjB,MAAI,EAAEjC,IAAI,EAAEO,OAAO,CAACR,aAAa,CAACkC,MAAI,CAACjC,IAAI,CAAC,CAAC;YACjD,IAAIiC,MAAI,EAAEnB,QAAQ,EAAEC,WAAW,CAACkB,MAAI,CAACnB,QAAQ,CAAC;YAC9CD,eAAe,CAAC,KAAK,CAAC;YACtB,OAAO,IAAI;QACb,CAAC,CAAC,OAAOqB,KAAG,EAAE;YACZC,OAAO,CAACC,KAAK,CAACF,KAAG,CAAC;YAClB3B,OAAO,CAACkC,MAAI,CAAC;YACbU,KAAK,CAAC,gCAAgC,CAAC;YACvC,OAAO,KAAK;QACd;IACF;IAEA,0EAAA;IACA,eAAeM,sBAAsBA,CAAA,EAAG;QACtC,IAAI,CAACzD,IAAI,EAAE,OAAO,KAAK;QACvB,MAAMyC,MAAI,GAAGzC,IAAI;QACjB,MAAMwD,gBAAc,GAAG;YAAE,GAAIxD,IAAI,CAACjC,OAAO,IAAI,CAAC,CAAC,CAAC;YAAEd,UAAU,EAAE;QAAK,CAAC;QACpEsD,OAAO,CAAC;YAAE,GAAGP,IAAI;YAAEjC,OAAO,EAAEyF;QAAe,CAAC,CAAC;QAE7C,IAAI;YACF,MAAM5B,KAAG,GAAG,MAAMC,KAAK,CAAC,SAAS,EAAE;gBACjCc,MAAM,EAAE,OAAO;gBACfC,OAAO,EAAE;oBAAE,cAAc,EAAE;gBAAmB,CAAC;gBAC/Cb,WAAW,EAAE,SAAS;gBACtBc,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;oBAAEhF,OAAO,EAAEyF;gBAAe,CAAC;YAClD,CAAC,CAAC;YACF,IAAI,CAAC5B,KAAG,CAACI,EAAE,EAAE;gBACX,MAAMgB,KAAG,GAAG,MAAMpB,KAAG,CAACqB,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,IAAM,WAAW,CAAC;gBACrDf,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEY,KAAG,CAAC;gBAC1CzC,OAAO,CAACkC,MAAI,CAAC;gBACbU,KAAK,CAAC,yBAAyB,CAAC;gBAChC,OAAO,KAAK;YACd;YACA,MAAMlB,MAAI,GAAG,MAAML,KAAG,CAACK,IAAI,CAAC,CAAC,CAACiB,KAAK,CAAC,IAAM,IAAI,CAAC;YAC/C,IAAIjB,MAAI,EAAEjC,IAAI,EAAEO,OAAO,CAACR,aAAa,CAACkC,MAAI,CAACjC,IAAI,CAAC,CAAC;YACjD,IAAIiC,MAAI,EAAEnB,QAAQ,EAAEC,WAAW,CAACkB,MAAI,CAACnB,QAAQ,CAAC;YAC9C,OAAO,IAAI;QACb,CAAC,CAAC,OAAOoB,KAAG,EAAE;YACZC,OAAO,CAACC,KAAK,CAACF,KAAG,CAAC;YAClB3B,OAAO,CAACkC,MAAI,CAAC;YACbU,KAAK,CAAC,mCAAmC,CAAC;YAC1C,OAAO,KAAK;QACd;IACF;IAEA,yFAAA;IACA,eAAeO,yBAAyBA,CAACC,WAAW,AAAK,EAAH,AAAK;QACzD,IAAIA,WAAW,IAAIA,WAAW,CAAChG,EAAE,IAAIgG,WAAW,CAAC/F,KAAK,EAAE;YACtD2C,OAAO,CAACR,aAAa,CAAC4D,WAAW,CAAC,CAAC;YACnC,IAAIA,WAAW,CAAC7C,QAAQ,EAAEC,WAAW,CAAC4C,WAAW,CAAC7C,QAAQ,CAAC;YAC3D;QACF;QACA,mBAAA;QACA,IAAI;YACF,MAAM8C,CAAC,GAAG,MAAM/B,KAAK,CAAC,SAAS,EAAE;gBAAEE,WAAW,EAAE,SAAS;gBAAE8B,KAAK,EAAE;YAAW,CAAC,CAAC;YAC/E,IAAI,CAACD,CAAC,CAAC5B,EAAE,EAAE;YACX,MAAM8B,CAAC,GAAG,MAAMF,CAAC,CAAC3B,IAAI,CAAC,CAAC,CAACiB,KAAK,CAAC,IAAM,IAAI,CAAC;YAC1C,IAAIY,CAAC,EAAE9D,IAAI,EAAEO,OAAO,CAACR,aAAa,CAAC+D,CAAC,CAAC9D,IAAI,CAAC,CAAC;YAC3C,IAAI8D,CAAC,EAAEhD,QAAQ,EAAEC,WAAW,CAAC+C,CAAC,CAAChD,QAAQ,CAAC;QAC1C,CAAC,CAAC,OAAOoB,KAAG,EAAE;YACZC,OAAO,CAACC,KAAK,CAAC,mCAAmC,EAAEF,KAAG,CAAC;QACzD;IACF;IAEA,IAAI1B,OAAO,EAAE,qBAAO,6LAAC,GAAG;QAAC,SAAS,EAAC,KAAK;kBAAC,UAAU,EAAE,GAAG,CAAC;;;;;;IACzD,IAAI,CAACR,IAAI,EAAE,qBAAO,6LAAC,GAAG;QAAC,SAAS,EAAC,KAAK;kBAAC,aAAa,EAAE,GAAG,CAAC;;;;;;IAE1D,MAAMjC,OAAO,GAAG,AAACiC,IAAI,CAACjC,OAAO,IAAI,CAAC,CAAC,KAAKvB,OAAO;IAC/C,MAAMsB,IAAI,GAAG,CAACkC,IAAI,CAAClC,IAAI,IAAI,QAAQ,EAAEiG,QAAQ,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;IAE7D,gDAAA;IACA,MAAMC,cAAc,GAAGjE,IAAI,CAAChC,SAAS,IAAID,OAAO,EAAEC,SAAS,IAAI,IAAI;IACnE,MAAMkG,gBAAgB,GAAG9F,sBAAsB,CAAC6F,cAAc,CAAC;IAC/D,MAAME,kBAAkB,GAAGD,gBAAgB,KAAK,UAAU,GAAG,kBAAkB,GAAG,CAAA,QAAA,EAAWA,gBAAgB,EAAE;IAE/G,qBACE,6LAAC,IAAI;QAAC,SAAS,EAAC,mEAAmE,CAAC;;0BAClF,6LAAC,GAAG;gBAAC,SAAS,EAAC,6BAA6B,CAAC;;kCAE3C,6LAAC,GAAG;wBAAC,SAAS,EAAC,wCAAwC,CAAC;;0CACtD,6LAAC,GAAG;gCAAC,SAAS,EAAC,yBAAyB,CAAC;;kDACvC,6LAAC,GAAG;wCAAC,SAAS,EAAC,+GAA+G,CAAC;kDAC7H,2MAAC,GAAG;4CAAC,KAAK,EAAC,IAAI;4CAAC,MAAM,EAAC,IAAI;4CAAC,OAAO,EAAC,WAAW;4CAAC,IAAI,EAAC,MAAM;4CAAC,aAAW,CAAC;;8DACtE,6LAAC,IAAI;oDAAC,CAAC,EAAC,UAAU;oDAAC,MAAM,EAAC,OAAO;oDAAC,WAAW,EAAC,GAAG;oDAAC,aAAa,EAAC,OAAO,GAAG;;;;;;8DAC1E,6LAAC,IAAI;oDAAC,CAAC,EAAC,SAAS;oDAAC,MAAM,EAAC,OAAO;oDAAC,WAAW,EAAC,GAAG;oDAAC,aAAa,EAAC,OAAO,GAAG;;;;;;;;;;;;;;;;;kDAG7E,6LAAC,GAAG,CAAC;;0DACH,6LAAC,GAAG;gDAAC,SAAS,EAAC,sCAAsC;0DAAC,OAAO,EAAE,GAAG,CAAC;;;;;;0DACnE,6LAAC,GAAG;gDAAC,SAAS,EAAC,wBAAwB;0DAAC,6CAA6C,EAAE,GAAG,CAAC;;;;;;;;;;;;;;;;;;0CAI/F,6LAAC,GAAG;gCAAC,SAAS,EAAC,yBAAyB,CAAC;;kDACvC,6LAAC,GAAG;wCAAC,SAAS,EAAC,qGAAqG,CAAC;;0DACnH,6LAAC,MAAM;gDAAC,SAAS,EAAC,WAAW,CAAC;0DAACpG,IAAI,CAAC,EAAE,MAAM,CAAC;;;;;;0DAC7C,6LAAC,IAAI;gDAAC,SAAS,EAAC,wBAAwB;0DAAC,MAAM,EAAE,IAAI,CAAC;;;;;;;;;;;;kDAGxD,6LAAC,0JAAW;wCAAC,KAAK,CAAC,CAACkC,IAAI,CAACpC,KAAK,CAAC;wCAAC,SAAS,CAAC,CAACG,OAAO,EAAEhB,SAAS,CAAC,GAAG;;;;;;;;;;;;;;;;;;kCAIrE,6LAAC,GAAG;wBAAC,SAAS,EAAC,wCAAwC,CAAC;;0CAEtD,6LAAC,GAAG;gCAAC,SAAS,EAAC,eAAe,CAAC;;kDAC7B,6LAAC,OAAO;wCAAC,SAAS,EAAC,gFAAgF,CAAC;;0DAClG,6LAAC,GAAG;gDAAC,SAAS,EAAC,wBAAwB,CAAC;;kEACtC,6LAAC,GAAG;wDAAC,SAAS,EAAC,sFAAsF,CAAC;kEACnGgB,OAAO,EAAEhB,SAAS,GACjB,qDAAA;sEACA,6LAAC,GAAG;4DAAC,GAAG,CAAC,CAACgB,OAAO,CAAChB,SAAS,CAAC;4DAAC,GAAG,EAAC,QAAQ;4DAAC,SAAS,EAAC,4BAA4B,GAAG;;;;;iFAEnF,6LAAC,GAAG;4DAAC,SAAS,EAAC,uCAAuC,CAAC;sEAAC,CAACiD,IAAI,CAACnC,IAAI,IAAImC,IAAI,CAACpC,KAAK,IAAI,GAAG,EAAEwG,MAAM,CAAC,CAAC,CAAC,CAACJ,WAAW,CAAC,CAAC,CAAC,EAAE,GAAG,CACvH,CAAC;;;;;;;;;;;kEAGJ,6LAAC,GAAG;wDAAC,SAAS,EAAC,QAAQ,CAAC;;0EACtB,6LAAC,GAAG;gEAAC,SAAS,EAAC,yBAAyB,CAAC;;kFACvC,6LAAC,GAAG,CAAC;;0FACH,6LAAC,EAAE;gFAAC,SAAS,EAAC,mCAAmC,CAAC;0FAAChE,IAAI,CAACnC,IAAI,IAAI,GAAG,CAAC,EAAE,EAAE,CAAC;;;;;;0FACzE,6LAAC,GAAG;gFAAC,SAAS,EAAC,wBAAwB,CAAC;0FAACmC,IAAI,CAACpC,KAAK,CAAC,EAAE,GAAG,CAAC;;;;;;;;;;;;kFAG5D,6LAAC,GAAG;wEAAC,SAAS,EAAC,iCAAiC,CAAC;kFAC/C,2MAAC,MAAM;4EAAC,OAAO,CAAC,CAAC,IAAM+C,WAAW,CAAC,IAAI,CAAC,CAAC;4EAAC,SAAS,EAAC,qEAAqE;sFAAC;;;;;;;;;;;;;;;;;0EAO9H,6LAAC,GAAG;gEAAC,SAAS,EAAC,6BAA6B;;oEAAC;kFACtB,6LAAC,IAAI;wEAAC,SAAS,EAAC,4BAA4B,CAAC;kFAACuD,gBAAgB,CAAC,EAAE,IAAI,CAAC;;;;;;;;;;;;0EAG7F,6LAAC,GAAG;gEAAC,SAAS,EAAC,oDAAoD,CAAC;;kFAClE,6LAAC,GAAG,CAAC;;0FACH,6LAAC,GAAG;gFAAC,SAAS,EAAC,wBAAwB;0FAAC,SAAS,EAAE,GAAG,CAAC;;;;;;0FACvD,6LAAC,GAAG;gFAAC,SAAS,EAAC,MAAM,CAAC;0FAAClE,IAAI,CAACnC,IAAI,IAAI,GAAG,CAAC,EAAE,GAAG,CAAC;;;;;;;;;;;;kFAEhD,6LAAC,GAAG,CAAC;;0FACH,6LAAC,GAAG;gFAAC,SAAS,EAAC,wBAAwB;0FAAC,YAAY,EAAE,GAAG,CAAC;;;;;;0FAC1D,6LAAC,GAAG;gFAAC,SAAS,EAAC,MAAM,CAAC;0FAACE,OAAO,CAACtB,WAAW,IAAIuD,IAAI,CAACnC,IAAI,IAAI,GAAG,CAAC,EAAE,GAAG,CAAC;;;;;;;;;;;;kFAGvE,6LAAC,GAAG,CAAC;;0FACH,6LAAC,GAAG;gFAAC,SAAS,EAAC,wBAAwB;0FAAC,MAAM,EAAE,GAAG,CAAC;;;;;;0FACpD,6LAAC,GAAG;gFAAC,SAAS,EAAC,MAAM,CAAC;0FAACE,OAAO,CAACrB,MAAM,IAAI,uBAAuB,CAAC,EAAE,GAAG,CAAC;;;;;;;;;;;;kFAGzE,6LAAC,GAAG,CAAC;;0FACH,6LAAC,GAAG;gFAAC,SAAS,EAAC,wBAAwB;0FAAC,cAAc,EAAE,GAAG,CAAC;;;;;;0FAC5D,6LAAC,GAAG;gFAAC,SAAS,EAAC,MAAM,CAAC;0FAACqB,OAAO,CAACpB,OAAO,IAAI,GAAG,CAAC,EAAE,GAAG,CAAC;;;;;;;;;;;;kFAGtD,6LAAC,GAAG,CAAC;;0FACH,6LAAC,GAAG;gFAAC,SAAS,EAAC,wBAAwB;0FAAC,KAAK,EAAE,GAAG,CAAC;;;;;;0FACnD,6LAAC,GAAG;gFAAC,SAAS,EAAC,MAAM,CAAC;0FAACoB,OAAO,CAACnB,KAAK,IAAI,GAAG,CAAC,EAAE,GAAG,CAAC;;;;;;;;;;;;kFAGpD,6LAAC,GAAG,CAAC;;0FACH,6LAAC,GAAG;gFAAC,SAAS,EAAC,wBAAwB;0FAAC,QAAQ,EAAE,GAAG,CAAC;;;;;;0FACtD,6LAAC,GAAG;gFAAC,SAAS,EAAC,MAAM,CAAC;0FAACmB,OAAO,CAAClB,QAAQ,IAAI,SAAS,CAAC,EAAE,GAAG,CAAC;;;;;;;;;;;;kFAG7D,6LAAC,GAAG;wEAAC,SAAS,EAAC,YAAY,CAAC;;0FAC1B,6LAAC,GAAG;gFAAC,SAAS,EAAC,wBAAwB;0FAAC,SAAS,EAAE,GAAG,CAAC;;;;;;0FACvD,6LAAC,GAAG;gFAAC,SAAS,EAAC,6BAA6B,CAAC;0FAACkB,OAAO,CAACjB,QAAQ,IAAI,iDAAiD,CAAC,EAAE,GAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0DAMlI,6LAAC,GAAG;gDAAC,SAAS,EAAC,MAAM,CAAC;;kEACpB,6LAAC,EAAE;wDAAC,SAAS,EAAC,2CAA2C;kEAAC,KAAK,EAAE,EAAE,CAAC;;;;;;kEACpE,6LAAC,CAAC;wDAAC,SAAS,EAAC,wBAAwB;kEAAC,4JAA4J,EAAE,CAAC,CAAC;;;;;;;;;;;;;;;;;;kDAK1M,6LAAC,OAAO;wCAAC,SAAS,EAAC,8DAA8D,CAAC;;0DAChF,6LAAC,GAAG;gDAAC,SAAS,EAAC,kCAAkC,CAAC;;kEAChD,6LAAC,GAAG,CAAC;;0EACH,6LAAC,EAAE;gEAAC,SAAS,EAAC,4BAA4B;0EAAC,kBAAkB,EAAE,EAAE,CAAC;;;;;;0EAClE,6LAAC,CAAC;gEAAC,SAAS,EAAC,6BAA6B;0EAAC,iEAAiE,EAAE,CAAC,CAAC;;;;;;;;;;;;kEAGlH,6LAAC,GAAG;wDAAC,SAAS,EAAC,wBAAwB,CAAC;kEAACqH,kBAAkB,CAAC,EAAE,GAAG,CAAC;;;;;;;;;;;;0DAGpE,6LAAC,GAAG;gDAAC,SAAS,EAAC,uBAAuB,CAAC;wEACrC,6LAAC,GAAG;oDAAC,SAAS,EAAC,mCAAmC,CAAC;;sEACjD,6LAAC,GAAG;4DAAC,SAAS,EAAC,yBAAyB,CAAC;;8EACvC,6LAAC,GAAG;oEAAC,SAAS,EAAC,mFAAmF;8EAAC,EAAE,EAAE,GAAG,CAAC;;;;;;8EAC3G,6LAAC,GAAG,CAAC;;sFACH,6LAAC,GAAG;4EAAC,SAAS,EAAC,aAAa,CAAC;sFAACnE,IAAI,CAACpC,KAAK,CAAC,EAAE,GAAG,CAAC;;;;;;sFAC/C,6LAAC,GAAG;4EAAC,SAAS,EAAC,wBAAwB;sFAAC,mCAAmC,EAAE,GAAG,CAAC;;;;;;;;;;;;;;;;;;sEAIrF,6LAAC,GAAG;4DAAC,SAAS,EAAC,yBAAyB,CAAC;sEAEtC,CAACG,OAAO,EAAEd,UAAU,iBACnB,6LAAC,MAAM;gEAAC,SAAS,EAAC,qDAAqD;gEAAC,OAAO,CAAC,CAAC,IAAM4D,eAAe,CAAC,IAAI,CAAC,CAAC;0EAAC;;;;;qFAI9G,6LAAC,GAAG;gEAAC,SAAS,EAAC,yBAAyB,CAAC;;kFACvC,6LAAC,GAAG;wEAAC,SAAS,EAAC,SAAS,CAAC;kFAAC9C,OAAO,CAACd,UAAU,CAAC,EAAE,GAAG,CAAC;;;;;;kFACnD,6LAAC,MAAM;wEAAC,SAAS,EAAC,kDAAkD;wEAAC,OAAO,CAAC,CAAC,IAAM,KAAKwG,sBAAsB,CAAC,CAAC,CAAC;kFAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kDAW/H,6LAAC,OAAO;wCAAC,SAAS,EAAC,8DAA8D,CAAC;;0DAChF,6LAAC,EAAE;gDAAC,SAAS,EAAC,4BAA4B;0DAAC,iBAAiB,EAAE,EAAE,CAAC;;;;;;0DACjE,6LAAC,CAAC;gDAAC,SAAS,EAAC,6BAA6B;0DAAC,gEAAgE,EAAE,CAAC,CAAC;;;;;;0DAE/G,6LAAC,GAAG;gDAAC,SAAS,EAAC,uBAAuB,CAAC;wEACrC,6LAAC,GAAG;oDAAC,SAAS,EAAC,mCAAmC,CAAC;;sEACjD,6LAAC,GAAG;4DAAC,SAAS,EAAC,yBAAyB,CAAC;;8EACvC,6LAAC,GAAG;oEAAC,SAAS,EAAC,qFAAqF;8EAAC,EAAE,EAAE,GAAG,CAAC;;;;;;8EAC7G,6LAAC,GAAG,CAAC;;sFACH,6LAAC,GAAG;4EAAC,SAAS,EAAC,aAAa,CAAC;sFAAC1F,OAAO,EAAEb,WAAW,IAAI,GAAG,CAAC,EAAE,GAAG,CAAC;;;;;;sFAChE,6LAAC,GAAG;4EAAC,SAAS,CAAC,CAAC,CAAA,QAAA,EAAWa,OAAO,EAAEZ,aAAa,GAAG,gBAAgB,GAAG,gBAAgB,EAAE,CAAC,CAAC;sFACxFY,OAAO,EAAEZ,aAAa,GAAG,CAAA,WAAA,EAAcY,OAAO,CAACX,eAAe,GAAG,IAAImB,IAAI,CAACR,OAAO,CAACX,eAAe,CAAC,CAACiH,cAAc,CAAC,CAAC,GAAG,EAAE,EAAE,GAAG,cAAc,CAAC;;;;;;;;;;;;;;;;;;sEAKnJ,6LAAC,GAAG;4DAAC,SAAS,EAAC,yBAAyB,CAAC;sEACtC,CAACtG,OAAO,EAAEZ,aAAa,iBACtB,6LAAC,MAAM;gEAAC,SAAS,EAAC,kDAAkD;gEAAC,OAAO,CAAC,CAAC,IAAMgE,aAAa,CAAC,IAAI,CAAC,CAAC;0EAAC;;;;;qFAIzG,6LAAC,MAAM;gEAAC,SAAS,EAAC,sDAAsD;gEAAC,OAAO,CAAC,CAAC,IAAMA,aAAa,CAAC,IAAI,CAAC,CAAC;0EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0CAWzH,6LAAC,KAAK;gCAAC,SAAS,EAAC,yBAAyB,CAAC;;kDACzC,6LAAC,GAAG;wCAAC,SAAS,EAAC,4DAA4D,CAAC;;0DAC1E,6LAAC,GAAG;gDAAC,SAAS,EAAC,mCAAmC,CAAC;;kEACjD,6LAAC,EAAE;wDAAC,SAAS,EAAC,sCAAsC;kEAAC,0BAA0B,EAAE,EAAE,CAAC;;;;;;kEACpF,6LAAC,IAAI;wDAAC,SAAS,EAAC,wBAAwB,CAAC;kEAACgD,kBAAkB,CAAC,EAAE,IAAI,CAAC;;;;;;;;;;;;0DAGtE,6LAAC,GAAG;gDAAC,SAAS,EAAC,MAAM,CAAC;wEACpB,6LAAC,GAAG;oDAAC,SAAS,EAAC,sBAAsB,CAAC;;sEACpC,6LAAC,GAAG,CAAC;;8EACH,6LAAC,GAAG;oEAAC,SAAS,EAAC,oBAAoB,CAAC;8EAACrD,QAAQ,GAAGA,QAAQ,CAACE,SAAS,GAAG,GAAG,CAAC,EAAE,GAAG,CAAC;;;;;;8EAC/E,6LAAC,GAAG;oEAAC,SAAS,EAAC,wBAAwB;8EAAC,YAAY,EAAE,GAAG,CAAC;;;;;;;;;;;;sEAE5D,6LAAC,GAAG,CAAC;;8EACH,6LAAC,GAAG;oEAAC,SAAS,EAAC,oBAAoB,CAAC;8EAACF,QAAQ,GAAGA,QAAQ,CAACG,UAAU,GAAG,GAAG,CAAC,EAAE,GAAG,CAAC;;;;;;8EAChF,6LAAC,GAAG;oEAAC,SAAS,EAAC,wBAAwB;8EAAC,qBAAqB,EAAE,GAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kDAM3E,6LAAC,GAAG;wCAAC,SAAS,EAAC,4DAA4D,CAAC;;0DAC1E,6LAAC,EAAE;gDAAC,SAAS,EAAC,2CAA2C;0DAAC,aAAa,EAAE,EAAE,CAAC;;;;;;0DAC5E,6LAAC,GAAG;gDAAC,SAAS,EAAC,qBAAqB,CAAC;;kEACnC,6LAAC,MAAM;wDAAC,SAAS,EAAC,4CAA4C;wDAAC,OAAO,CAAC,CAAC,IAAMX,MAAM,CAACgE,IAAI,CAAC,QAAQ,CAAC,CAAC;kEAAC,UAAU,EAAE,MAAM,CAAC;;;;;;kEACxH,6LAAC,0KAAI;wDAAC,SAAS,EAAC,4CAA4C;wDAAC,IAAI,EAAC,WAAW;kEAAC,uBAAuB,EAAE,IAAI,CAAC;;;;;;kEAC5G,6LAAC,0KAAI;wDAAC,SAAS,EAAC,4CAA4C;wDAAC,IAAI,EAAC,WAAW;kEAAC,QAAQ,EAAE,IAAI,CAAC;;;;;;;;;;;;;;;;;;kDAIjG,6LAAC,GAAG;wCAAC,SAAS,EAAC,oCAAoC;kDAAC,gEAAgE,EAAE,GAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;;;0BAMhI,6LAAC,0JAAgB;gBACf,IAAI,CAAC,CAAC5D,QAAQ,CAAC;gBACf,OAAO,CAAC,CAAC,IAAMC,WAAW,CAAC,KAAK,CAAC,CAAC;gBAClC,IAAI,CAAC,CAACX,IAAI,CAAC;gBACX,MAAM,CAAC,CAAC,OAAOuE,OAAO,IAAK;oBACzB,MAAMvC,EAAE,GAAG,MAAMM,UAAU,CAACiC,OAAO,CAAC;oBACpC,IAAIvC,EAAE,EAAErB,WAAW,CAAC,KAAK,CAAC;oBAC1B,OAAOqB,EAAE;gBACX,CAAC,CAAC,GACF;;;;;;0BAGF,6LAAC,4JAAa;gBACZ,IAAI,CAAC,CAACpB,YAAY,CAAC;gBACnB,OAAO,CAAC,CAAC,IAAMC,eAAe,CAAC,KAAK,CAAC,CAAC;gBACtC,KAAK,CAAC,CAACyC,cAAc,CAAC,GACtB;;;;;;YAGDpC,UAAU,kBACT,6LAAC,gBAAgB;gBACf,cAAc,CAAC,CAACnD,OAAO,CAAC;gBACxB,OAAO,CAAC,CAAC,IAAMoD,aAAa,CAAC,KAAK,CAAC,CAAC;gBACpC,UAAU,CAAC,EAAEwC,aAAW,IAAK;oBAC3BD,yBAAyB,CAACC,aAAW,CAAC;oBACtCxC,aAAa,CAAC,KAAK,CAAC;gBACtB,CAAC,CAAC,GAEL,CAAC;;;;;;;;;;;;AAGR;;;0JA5b0B,CAAC,CAAC;;;KADJd,WAAWA,CAAA,EAAG;AA+btC,8EAAA,GACA;;;;;8EAKA,GAEA,0BAA0B,EACxBoE,cAAc,EACdC,OAAO,EACPC,UAAAA,EAKD,EAAE;;IACD,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,OAAG3I,yKAAQ,CAAC4I,CAAsD,EAAE,CAAC,CAApD,CAAC;IACjD,MAAM,CAACG,gBAAgB,EAAEC,mBAAmB,CAAC,OAAGhJ,yKAAQ,EAAC,IAAI,CAAC;IAC9D,MAAM,CAACiJ,cAAc,EAAEC,iBAAiB,CAAC,OAAGlJ,yKAAQ,CAAC,CAAe,IAAI,CAAC,AAAd,GAAG,IAAI,CAAC;IAEnE,MAAMmJ,WAAW,GAAG,AAAC,CAACZ,cAAc,EAAEpH,WAAW,IAAI,IAAI,EAAa2G,GAAR,MAAM,EAAa,CAAC,CAAC,IAAI,IAAI;IAC3F,MAAM,CAACsB,WAAW,EAAEC,cAAc,CAAC,OAAGrJ,yKAAQ,CAAC,CAAQmJ,KAAF,CAAC,KAAY,CAAC;IAEnE,MAAM,CAACG,QAAQ,EAAEC,WAAW,CAAC,OAAGvJ,yKAAQ,CAAC,CAAQ+B,KAAF,CAAC,MAAa,CAAC;IAC9D,MAAM,CAACyH,UAAU,EAAEC,aAAa,CAAC,OAAGzJ,yKAAQ,CAAC,CAAQkD,KAAF,CAAC,SAAgB,CAACiG,WAAW,CAAC,IAAInH,uBAAuB,CAAC;IAE7G,kEAAA;IACA,MAAM,CAAC0H,MAAM,EAAEC,SAAS,CAAC,OAAG3J,yKAAQ,CAAC,MAAM,EAAE,CAAC;qCAAC,IAAM4I,KAAK,CAACY,UAAU,CAAC,CAACI,IAAI,CAAC,EAAE,CAAC,CAAC;;IAChF7J,8KAAS;sCAAC,MAAM;YACd4J,SAAS;+CAAEpD,IAAI,IAAK;oBAClB,MAAMsD,IAAI,GAAGjB,KAAK,CAACY,UAAU,CAAC,CAACI,IAAI,CAAC,EAAE,CAAC;oBACvC,IAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGnH,IAAI,CAACoH,GAAG,CAACxD,IAAI,CAACyD,MAAM,EAAEH,IAAI,CAACG,MAAM,CAAC,EAAEF,CAAC,EAAE,CAAED,IAAI,CAACC,CAAC,CAAC,GAAGvD,IAAI,CAACuD,CAAC,CAAC;oBAC9E,OAAOD,IAAI;gBACb,CAAC,CAAC;;QACJ,CAAC;qCAAE;QAACL,UAAU;KAAC,CAAC;IAEhB,MAAMS,cAAc,GAAGnK,wKAAK,CAACoK,MAAM,CAACtB,AAAgC,EAAE,CAAC,EAA9B,CAACuB,gBAAgB,GAAG,IAAI,CAAC,CAAC;IAEnE,yCAAA;IACA,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,OAAGrK,yKAAQ,CAAC,CAAeuI,KAAT,GAAG,IAAI,CAAC,CAAe,EAAEvH,WAAW,IAAI,IAAI,CAAC;IAE9F,MAAM,CAACsJ,OAAO,EAAEC,UAAU,CAAC,GAAGvK,6KAAQ,EAAC,KAAK,CAAC;IAC7C,MAAM,CAACwK,SAAS,EAAEC,YAAY,CAAC,OAAGzK,yKAAQ,CAAC,CAAe,IAAI,CAAb,AAAc,GAAX,IAAI,CAAC;IACzD,MAAM,CAAC0K,SAAS,EAAEC,YAAY,CAAC,OAAG3K,yKAAQ,CAAC,MAAM,EAAE,CAAC;qCAAC,IAAM4I,KAAK,CAAC3G,OAAO,CAAC,CAAC2H,IAAI,CAAC,EAAE,CAAC,CAAC;;IACnF,MAAMgB,YAAY,GAAG9K,wKAAK,CAACoK,MAAM,CAACtB,AAAgC,EAAE,CAAC,EAA9B,CAACuB,gBAAgB,GAAG,IAAI,CAAC,CAAC;IACjE,MAAM,CAACU,OAAO,EAAEC,UAAU,CAAC,OAAG9K,yKAAQ,EAAC,KAAK,CAAC;IAC7C,MAAM,CAAC+K,SAAS,EAAEC,YAAY,CAAC,OAAGhL,yKAAQ,EAAC,KAAK,CAAC;IACjD,MAAM,CAACiL,OAAO,EAAEC,UAAU,CAAC,OAAGlL,yKAAQ,CAAC,CAAsC,IAAI,CAAC;IAElF,qDAAA;QACAD,0KAAS;sCAAC,MAAM;YACd,IAAIoL,SAAS,GAAG,KAAK;YACrBnC,mBAAmB,CAAC,IAAI,CAAC;YACzBE,iBAAiB,CAAC,IAAI,CAAC;YACvB;8CAAC,YAAY;oBACX,IAAI;wBACF,MAAMxD,GAAG,GAAG,MAAMC,KAAK,CAAC,yDAAyD,CAAC;wBAClF,IAAI,CAACD,GAAG,CAACI,EAAE,EAAE,MAAM,IAAIsF,KAAK,CAAC,0BAA0B,CAAC;wBACxD,MAAMC,GAAG,GAAG,MAAM3F,GAAG,CAACK,IAAI,CAAC,CAAC;wBAC5B,IAAIoF,SAAS,EAAE;wBACf,MAAMG,IAAI,GAAGD,GAAG,CACbE,GAAG;+DAAC,CAACC,CAAC,EAAE,GAAG,KAAK;gCACf,MAAM3C,IAAI,GAAG,CAAC2C,CAAC,CAAC3C,IAAI,IAAI,EAAE,EAAEhB,QAAQ,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;gCACpD,MAAMnG,IAAI,GAAI6J,CAAC,CAAC7J,IAAI,IAAA,CAAK6J,CAAC,CAAC7J,IAAI,CAAC8J,MAAM,IAAID,CAAC,CAAC7J,IAAI,CAAC+J,QAAQ,CAAC,IAAK7C,IAAI;gCACnE,IAAIC,IAAI,EAAE,CAAqB6C,KAAf,GAAG,CAAqB,QAAZ;gCAC5B,IAAI;oCACF,MAAMC,GAAG,GAAGJ,CAAC,CAACI,GAAG,IAAI,CAAC,CAAC;oCACvB,MAAMC,IAAI,GAAGD,GAAG,CAACC,IAAI,IAAI,EAAE;oCAC3B,MAAMC,QAAQ,EAAE,CAAWF,GAAG,CAACE,CAAT,EAAE,KAAe,IAAI,EAAE;oCAC7C,IAAID,IAAI,EAAE;wCACR/C,IAAI,GAAGgD,QAAQ,IAAIA,QAAQ,CAAC9B,MAAM,GAAG,CAAC,IAAI8B,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAGD,IAAI,GAAGC,QAAQ,CAAC,CAAC,CAAC,EAAE,GAAGD,IAAI;oCACxF;gCACF,CAAC,CAAC,OAAOE,CAAC,EAAE;oCACVjD,IAAI,GAAG6C,SAAS;gCAClB;gCACA,OAAO;oCAAE9C,IAAI;oCAAElH,IAAI;oCAAEmH;gCAAK,CAAC;4BAC7B,CAAC,CAAC;8DACDkD,MAAM,CAACC,OAAO,CAAC,CACfC,IAAI;+DAAC,CAACC,CAAC,EAAE,AAAKC,CAAC,EAAH,AAAK,CAAQD,CAAC,CAAN,AAAOxK,IAAI,CAAC0K,aAAa,CAACD,CAAC,CAACzK,IAAI,CAAC,CAAC;;wBACzDgH,YAAY,CAAC2C,IAAI,CAAC;oBACpB,CAAC,CAAC,OAAOtF,GAAG,EAAE;wBACZC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,GAAG,CAAC;wBAC3CkD,iBAAiB,CAAC,0BAA0B,CAAC;oBAC/C,CAAC,QAAS;wBACR,IAAI,CAACiC,SAAS,EAAEnC,mBAAmB,CAAC,KAAK,CAAC;oBAC5C;gBACF;aAAC,EAAE,CAAC;YACJ;8CAAO,MAAM;oBACXmC,SAAS,GAAG,IAAI;gBAClB,CAAC;;QACH,CAAC;qCAAE,EAAE,CAAC;IAEN,8EAAA;IACApL,8KAAS;sCAAC,MAAM;YACd,MAAMuM,IAAI,GAAG5D,SAAS,CAAC6D,IAAI;oDAAEf,GAAC,GAAKA,GAAC,CAAC3C,IAAI,KAAKO,WAAW,CAAC;;YAC1D,IAAIkD,IAAI,IAAIA,IAAI,CAACxD,IAAI,EAAES,WAAW,CAAC+C,IAAI,CAACxD,IAAI,CAAC,CAAC;iBACzCS,WAAW,CAACxH,YAAY,CAAC;YAE9B,MAAMyK,GAAG,GAAGtJ,eAAe,CAACkG,WAAW,CAAC,IAAIpH,uBAAuB;YACnEyH,aAAa,CAAC+C,GAAG,CAAC;QACpB,CAAC;qCAAE;QAACpD,WAAW;QAAEV,SAAS;KAAC,CAAC;IAE5B,kCAAA;QACA3I,0KAAS;sCAAC,MAAM;YACd,MAAM0M,CAAC,GAAGC,UAAU;gDAAC,IAAMzC,cAAc,CAAC0C,OAAO,CAAC,CAAC,CAAC,EAAEC,KAAK,CAAC,CAAC;+CAAE,EAAE,CAAC;YAClE,SAASC,KAAKA,CAACd,GAAC,AAAe,EAAbe,AAAe;gBAC/B,IAAIf,GAAC,CAACgB,GAAG,KAAK,QAAQ,EAAEvE,OAAO,CAAC,CAAC;YACnC;YACAwE,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAEJ,KAAK,CAAC;YACzC;8CAAO,MAAM;oBACXK,YAAY,CAACT,CAAC,CAAC;oBACfO,MAAM,CAACG,mBAAmB,CAAC,SAAS,EAAEN,KAAK,CAAC;gBAC9C,CAAC;;QACH,CAAC;qCAAE;QAACrE,OAAO;KAAC,CAAC;IAEb,MAAM4E,UAAU,GAAGA,CAAChI,CAAC,EAAE,CAAWA,CAAC,CAACiI,GAAP,IAAc,CAAC,KAAK,EAAE,EAAE,CAAC;IACtD,MAAMC,aAAa,GAAGA,CAACxD,GAAC,EAAE,AAAQyD,GAAG,EAAE,CAAP,KAAa,KAAK;QAChD,MAAMC,CAAC,GAAGJ,UAAU,CAACG,GAAG,CAAC,CAACE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;QACrC9D,SAAS,EAAEpD,MAAI,IAAK;YAClB,MAAMsD,MAAI,GAAGtD,MAAI,CAACkH,KAAK,CAAC,CAAC;YACzB5D,MAAI,CAACC,GAAC,CAAC,GAAG0D,CAAC;YACX,OAAO3D,MAAI;QACb,CAAC,CAAC;QACF,IAAI2D,CAAC,IAAI1D,GAAC,GAAGN,UAAU,GAAG,CAAC,EAAES,cAAc,CAAC0C,OAAO,CAAC7C,GAAC,GAAG,CAAC,CAAC,EAAE8C,KAAK,CAAC,CAAC;IACrE,CAAC;IACD,MAAMc,UAAU,GAAGA,CAAC5D,GAAC,EAAE,AAAQiC,GAAC,EAAEjM,CAAL,IAAU,CAACgN,aAAa,CAAC3C,gBAAgB,CAAC,KAAK;QAC1E,IAAI4B,GAAC,CAACgB,GAAG,KAAK,WAAW,IAAIrD,MAAM,CAACI,GAAC,CAAC,KAAK,EAAE,IAAIA,GAAC,GAAG,CAAC,EAAEG,cAAc,CAAC0C,OAAO,CAAC7C,GAAC,GAAG,CAAC,CAAC,EAAE8C,KAAK,CAAC,CAAC;IAChG,CAAC;IAED,MAAMe,WAAW,GAAGjE,MAAM,CAACkE,IAAI,CAAC,EAAE,CAAC;IACnC,MAAMC,aAAa,GAAGF,WAAW,CAAC3D,MAAM,KAAKR,UAAU;IAEvD,eAAA;IACA,MAAMsE,WAAW,GAAGA,CAAChE,GAAC,EAAE,AAAQiE,CAAC,EAAE,GAAL,GAAW,KAAK;QAC5C,MAAMP,GAAC,GAAGJ,UAAU,CAACW,CAAC,CAAC,CAACN,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;QACnC9C,YAAY,EAAEpE,MAAI,IAAK;YACrB,MAAMsD,MAAI,GAAGtD,MAAI,CAACkH,KAAK,CAAC,CAAC;YACzB5D,MAAI,CAACC,GAAC,CAAC,GAAG0D,GAAC;YACX,OAAO3D,MAAI;QACb,CAAC,CAAC;QACF,IAAI2D,GAAC,IAAI1D,GAAC,GAAG7H,OAAO,GAAG,CAAC,EAAE2I,YAAY,CAAC+B,OAAO,CAAC7C,GAAC,GAAG,CAAC,CAAC,EAAE8C,KAAK,CAAC,CAAC;IAChE,CAAC;IACD,MAAMoB,QAAQ,GAAGA,CAAClE,GAAC,EAAUiC,AAAR,GAAS,EAAEjM,CAAL,IAAU,CAACgN,aAAa,CAAC3C,gBAAgB,CAAC,KAAK;QACxE,IAAI4B,GAAC,CAACgB,GAAG,KAAK,WAAW,IAAIrC,SAAS,CAACZ,GAAC,CAAC,KAAK,EAAE,IAAIA,GAAC,GAAG,CAAC,EAAEc,YAAY,CAAC+B,OAAO,CAAC7C,GAAC,GAAG,CAAC,CAAC,EAAE8C,KAAK,CAAC,CAAC;QAC/F,IAAIb,GAAC,CAACgB,GAAG,KAAK,OAAO,EAAEkB,YAAY,CAAC,CAAC;IACvC,CAAC;IACD,MAAMC,QAAQ,GAAGxD,SAAS,CAACkD,IAAI,CAAC,EAAE,CAAC;IAEnC,eAAeO,OAAOA,CAAA,EAAG;QACvB,IAAI,CAACN,aAAa,EAAE;YAClB3C,UAAU,CAAC;gBAAEnE,IAAI,EAAE,CAAA,MAAA,EAASyC,UAAU,CAAA,OAAA,CAAS;gBAAE1D,EAAE,EAAE;YAAM,CAAC,CAAC;YAC7D;QACF;QACA,MAAMsI,IAAI,GAAG,GAAG9E,QAAQ,GAAGqE,WAAW,EAAE;QACxC,gDAAA;QACAtD,YAAY,CAAC+D,IAAI,CAAC;QAElBtD,UAAU,CAAC,IAAI,CAAC;QAChBI,UAAU,CAAC,IAAI,CAAC;QAChB,IAAI;YACF,MAAMxF,KAAG,GAAG,MAAMC,KAAK,CAAC,qBAAqB,EAAE;gBAC7Cc,MAAM,EAAE,MAAM;gBACdC,OAAO,EAAE;oBAAE,cAAc,EAAE;gBAAmB,CAAC;gBAC/Cb,WAAW,EAAE,SAAS;gBACtBc,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;oBAAEwH,KAAK,EAAED,IAAI;oBAAEE,MAAM,EAAErM;gBAAQ,CAAC;YACvD,CAAC,CAAC;YACF,MAAM8D,IAAI,GAAG,MAAML,KAAG,CAACK,IAAI,CAAC,CAAC,CAACiB,KAAK,CAAC,IAAM,IAAI,CAAC;YAC/Cf,OAAO,CAACiB,KAAK,CAAC,uCAAuC,EAAExB,KAAG,CAAC6I,MAAM,EAAExI,IAAI,CAAC;YACxE,IAAI,CAACL,KAAG,CAACI,EAAE,IAAIC,IAAI,EAAEG,KAAK,EAAE;gBAC1BgF,UAAU,CAAC;oBAAEnE,IAAI,EAAEhB,IAAI,EAAEG,KAAK,IAAI,oBAAoB;oBAAEJ,EAAE,EAAE;gBAAM,CAAC,CAAC;gBACpEyE,UAAU,CAAC,KAAK,CAAC;YACnB,CAAC,MAAM;gBACLW,UAAU,CAAC;oBAAEnE,IAAI,EAAE,iDAAiD;oBAAEjB,EAAE,EAAE;gBAAK,CAAC,CAAC;gBACjFyE,UAAU,CAAC,IAAI,CAAC;gBAChBE,YAAY,CAACpI,IAAI,CAACI,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC;gBACxCiK,UAAU,CAAC,IAAM9B,YAAY,CAAC+B,OAAO,CAAC,CAAC,CAAC,EAAEC,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC;YACzD;QACF,CAAC,CAAC,OAAO5G,KAAG,EAAE;YACZC,OAAO,CAACC,KAAK,CAACF,KAAG,CAAC;YAClBkF,UAAU,CAAC;gBAAEnE,IAAI,EAAE,2BAA2B;gBAAEjB,EAAE,EAAE;YAAM,CAAC,CAAC;YAC5DyE,UAAU,CAAC,KAAK,CAAC;QACnB,CAAC,QAAS;YACRO,UAAU,CAAC,KAAK,CAAC;QACnB;IACF;IAEA,eAAemD,YAAYA,CAAA,EAAG;QAC5B,IAAI,CAAC7D,SAAS,EAAE;YACdc,UAAU,CAAC;gBAAEnE,IAAI,EAAE,gBAAgB;gBAAEjB,EAAE,EAAE;YAAM,CAAC,CAAC;YACjD;QACF;QAEA,MAAM0I,aAAa,GAAG9D,SAAS,CAACkD,IAAI,CAAC,EAAE,CAAC;QACxC,IAAIY,aAAa,CAACxE,MAAM,KAAK/H,OAAO,EAAE;YACpCiJ,UAAU,CAAC;gBAAEnE,IAAI,EAAE,CAAA,MAAA,EAAS9E,OAAO,CAAA,WAAA,CAAa;gBAAE6D,EAAE,EAAE;YAAM,CAAC,CAAC;YAC9D;QACF;QAEAkF,YAAY,CAAC,IAAI,CAAC;QAClBE,UAAU,CAAC,IAAI,CAAC;QAEhB,MAAM7C,OAAO,GAAG;YAAEgG,KAAK,EAAEjE,SAAS;YAAEqE,GAAG,EAAED;QAAc,CAAC;QACxDvI,OAAO,CAACiB,KAAK,CAAC,oCAAoC,EAAEmB,OAAO,CAAC;QAE5D,IAAI;YACF,MAAM3C,KAAG,GAAG,MAAMC,KAAK,CAAC,uBAAuB,EAAE;gBAC/Cc,MAAM,EAAE,MAAM;gBACdC,OAAO,EAAE;oBAAE,cAAc,EAAE;gBAAmB,CAAC;gBAC/Cb,WAAW,EAAE,SAAS;gBACtBc,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACwB,OAAO;YAC9B,CAAC,CAAC;YAEF,IAAI1B,IAAI,EAAE,CAAM,EAAH,EAAO;YACpB,IAAI;gBACFA,IAAI,GAAG,MAAMjB,KAAG,CAACK,IAAI,CAAC,CAAC,CAACiB,KAAK,CAAC,IAAM,IAAI,CAAC;YAC3C,CAAC,CAAC,OAAO+E,GAAC,EAAE;gBACVpF,IAAI,GAAG,IAAI;YACb;YAEAV,OAAO,CAACiB,KAAK,CAAC,4CAA4C,EAAExB,KAAG,CAAC6I,MAAM,EAAE,OAAO,EAAE5H,IAAI,CAAC;YAEtF,IAAI,CAACjB,KAAG,CAACI,EAAE,EAAE;gBACX,MAAM4I,MAAM,GACT/H,IAAI,IAAA,CAAKA,IAAI,CAACT,KAAK,IAAIS,IAAI,CAACsE,OAAO,CAAC,IACpC,MAAMvF,KAAG,CAACqB,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,IAAM,IAAI,CAAC,CAAC,GACpC,CAAA,KAAA,EAAQtB,KAAG,CAAC6I,MAAM,EAAE;gBACtBrD,UAAU,CAAC;oBAAEnE,IAAI,EAAE2H,MAAM;oBAAE5I,EAAE,EAAE;gBAAM,CAAC,CAAC;gBACvC6E,YAAY,CAAC/B,KAAK,CAAC3G,OAAO,CAAC,CAAC2H,IAAI,CAAC,EAAE,CAAC,CAAC;gBACrCgB,YAAY,CAAC+B,OAAO,CAAC,CAAC,CAAC,EAAEC,KAAK,CAAC,CAAC;gBAChC;YACF;YAEA,UAAA;YACA1B,UAAU,CAAC;gBAAEnE,IAAI,EAAE,uBAAuB;gBAAEjB,EAAE,EAAE;YAAK,CAAC,CAAC;YACvDyE,UAAU,CAAC,KAAK,CAAC;YACjBI,YAAY,CAAC/B,KAAK,CAAC3G,OAAO,CAAC,CAAC2H,IAAI,CAAC,EAAE,CAAC,CAAC;YAErC,IAAIjD,IAAI,IAAIA,IAAI,CAAC7C,IAAI,EAAE;gBACrB,2DAAA;gBACA,IAAI;oBACF2E,UAAU,CAAC9B,IAAI,CAAC7C,IAAI,CAAC;gBACvB,CAAC,CAAC,OAAOiI,GAAC,EAAE;oBACV9F,OAAO,CAAC0I,IAAI,CAAC,sCAAsC,EAAE5C,GAAC,CAAC;gBACzD;YACF,CAAC,MAAM;gBACL,iFAAA;gBACA,IAAI;oBACF,MAAMrE,CAAC,GAAG,MAAM/B,KAAK,CAAC,SAAS,EAAE;wBAAEE,WAAW,EAAE,SAAS;wBAAE8B,KAAK,EAAE;oBAAW,CAAC,CAAC;oBAC/E,IAAID,CAAC,CAAC5B,EAAE,EAAE;wBACR,MAAM8B,CAAC,GAAG,MAAMF,CAAC,CAAC3B,IAAI,CAAC,CAAC,CAACiB,KAAK,CAAC,IAAM,IAAI,CAAC;wBAC1CyB,UAAU,CAACb,CAAC,EAAE9D,IAAI,IAAI,IAAI,CAAC;oBAC7B,CAAC,MAAM;wBACL2E,UAAU,CAAC,IAAI,CAAC;oBAClB;gBACF,CAAC,CAAC,OAAOzC,KAAG,EAAE;oBACZC,OAAO,CAACC,KAAK,CAAC,mDAAmD,EAAEF,KAAG,CAAC;oBACvEyC,UAAU,CAAC,IAAI,CAAC;gBAClB;YACF;QACF,CAAC,CAAC,OAAOzC,KAAG,EAAE;YACZC,OAAO,CAACC,KAAK,CAAC,0CAA0C,EAAEF,KAAG,CAAC;YAC9DkF,UAAU,CAAC;gBAAEnE,IAAI,EAAE,6BAA6B;gBAAEjB,EAAE,EAAE;YAAM,CAAC,CAAC;QAChE,CAAC,QAAS;YACRkF,YAAY,CAAC,KAAK,CAAC;QACrB;IACF;IAEA,SAAS4D,QAAQA,CAAA,EAAG;QAClBrE,UAAU,CAAC,KAAK,CAAC;QACjBI,YAAY,CAAC/B,KAAK,CAAC3G,OAAO,CAAC,CAAC2H,IAAI,CAAC,EAAE,CAAC,CAAC;QACrCa,YAAY,CAAC,IAAI,CAAC;QAClBS,UAAU,CAAC,IAAI,CAAC;QAChBwB,UAAU,CAAC,IAAMzC,cAAc,CAAC0C,OAAO,CAAC,CAAC,CAAC,EAAEC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;IAC1D;IAEA,SAASiC,iBAAiBA,CAAC9C,GAAC,AAAwC,EAAtCjM,AAAwC,KAAnC,CAACgP,cAAc,CAAC3E,gBAAgB;QACjE,MAAMpD,IAAI,GAAGgF,GAAC,CAACgD,aAAa,CAACC,OAAO,CAAC,MAAM,CAAC;QAC5C,MAAMC,IAAI,GAAG7B,UAAU,CAACrG,IAAI,CAAC,CAAC0G,KAAK,CAAC,CAAC,EAAEjE,UAAU,CAAC;QAClD,IAAIyF,IAAI,CAACjF,MAAM,KAAKR,UAAU,EAAE;YAC9BG,SAAS,CAACsF,IAAI,CAACC,KAAK,CAAC,EAAE,CAAC,CAAC;YACzBxC,UAAU,CAAC,IAAMyB,OAAO,CAAC,CAAC,EAAE,EAAE,CAAC;QACjC;IACF;IAEA,MAAMgB,aAAa,GAAG,qDAAqD;IAC3E,MAAMC,WAAW,GAAG,qDAAqD;IAEzE,qBACE,6LAAC,GAAG;QAAC,SAAS,EAAC,gEAAgE,CAAC;;0BAC9E,6LAAC,GAAG;gBAAC,SAAS,EAAC,8BAA8B;gBAAC,OAAO,CAAC,CAAC5G,OAAO,CAAC;gBAAC,aAAW,GAAG;;;;;;0BAC9E,6LAAC,GAAG;gBAAC,SAAS,EAAC,2GAA2G,CAAC;;kCACzH,6LAAC,GAAG;wBAAC,SAAS,EAAC,qDAAqD,CAAC;;0CACnE,6LAAC,GAAG,CAAC;;kDACH,6LAAC,EAAE;wCAAC,SAAS,EAAC,sCAAsC;kDAAC,mBAAmB,EAAE,EAAE,CAAC;;;;;;kDAC7E,6LAAC,CAAC;wCAAC,SAAS,EAAC,6BAA6B;;4CAAC,qFAAqF;4CAACvG,OAAO;4CAAC,YAAY,EAAE,CAAC,CAAC;;;;;;;;;;;;;0CAE3J,6LAAC,GAAG,CAAC;wDACH,6LAAC,MAAM;oCAAC,UAAU,IAAC,OAAO;oCAAC,OAAO,CAAC,CAACuG,OAAO,CAAC;oCAAC,SAAS,EAAC,kDAAkD;8CAAC,CAAC,EAAE,MAAM,CAAC;;;;;;;;;;;;;;;;;kCAIxH,6LAAC,GAAG;wBAAC,SAAS,EAAC,eAAe,CAAC;;0CAE7B,6LAAC,GAAG;gCAAC,SAAS,EAAC,iDAAiD,CAAC;;kDAC/D,6LAAC,GAAG;wCAAC,SAAS,EAAC,gBAAgB,CAAC;;0DAC9B,6LAAC,KAAK;gDAAC,SAAS,EAAC,SAAS;0DAAC,OAAO,EAAE,KAAK,CAAC;;;;;;0DAC1C,6LAAC,MAAM;gDACL,KAAK,CAAC,CAACY,WAAW,CAAC;gDACnB,QAAQ,CAAC,EAAE2C,GAAC,GAAK1C,cAAc,CAAC0C,GAAC,CAACsD,MAAM,CAACC,KAAK,CAAC,CAAC;gDAChD,SAAS,EAAC,yCAAyC,CACpD;0DACEvG,gBAAgB,iBACf,6LAAC,MAAM;8DAAC,oBAAoB,EAAE,MAAM,CAAC;;;;;yEAErC,EAAE;;wDACCL,SAAS,CAAC6C,GAAG,EAAEC,GAAC,iBACf,6LAAC,MAAM,CAAC,GAAG,CAAC;gEAAS,KAAK,CAAC,CAACA,GAAC,CAAC3C,IAAI,CAAC,CAAC;;oEACjC2C,GAAC,CAAC7J,IAAI;oEAAC,CAAC;oEAAC6J,GAAC,CAAC1C,IAAI,GAAG,CAAA,CAAA,EAAI0C,GAAC,CAAC1C,IAAI,CAAA,CAAA,CAAG,GAAG,EAAE,CAAC;;+DAD3B0C,GAAC,CAAC3C,IAAI,CAAC;;;;;sEAItB,6LAAC,MAAM;4DAAC,KAAK,EAAC,OAAO;sEAAC,KAAK,EAAE,MAAM,CAAC;;;;;;;;;;;;;;;;;;;kDAM5C,6LAAC,GAAG;wCAAC,SAAS,EAAC,0CAA0C,CAAC;;0DACxD,6LAAC,GAAG;gDAAC,SAAS,EAAC,yBAAyB,CAAC;;kEACvC,6LAAC,GAAG;wDAAC,SAAS,EAAC,0DAA0D,CAAC;kEAACS,QAAQ,CAAC,EAAE,GAAG,CAAC;;;;;;kEAE1F,6LAAC,GAAG;wDAAC,OAAO,CAAC,CAACuF,iBAAiB,CAAC;wDAAC,SAAS,EAAC,sBAAsB;wDAAC,KAAK,CAAC,CAAC;4DAAEU,QAAQ,EAAE;wDAAO,CAAC,CAAC,CAAC;kEAC5F3G,KAAK,CAAC4G,IAAI,CAAC;4DAAExF,MAAM,EAAER;wDAAW,CAAC,CAAC,CAAC+B,GAAG,CAAC,CAACkE,CAAC,EAAE3F,GAAC,iBAC3C,6LAAC,KAAK,CACJ,GAAG,CAAC;gEACJ,GAAG,CAAC,EAAE4F,EAAE,GAAMzF,cAAc,CAAC0C,OAAO,CAAC7C,GAAC,CAAC,GAAG4F,EAAG,CAAC;gEAC9C,SAAS,EAAC,SAAS;gEACnB,SAAS,CAAC,CAAC,CAAC,CAAC;gEACb,KAAK,CAAC,CAAChG,MAAM,CAACI,GAAC,CAAC,IAAI,EAAE,CAAC;gEACvB,QAAQ,CAAC,EAAEiC,GAAC,GAAKuB,aAAa,CAACxD,GAAC,EAAEiC,GAAC,CAACsD,MAAM,CAACC,KAAK,CAAC,CAAC;gEAClD,SAAS,CAAC,EAAEvD,GAAC,GAAK2B,UAAU,CAAC5D,GAAC,EAAEiC,GAAC,CAAC,CAAC;gEACnC,SAAS,CAAC,CAAC,GAAGoD,aAAa,EAAE,CAAC;gEAC9B,UAAU,CAAC,GAAC,CAAA,YAAA,EAAerF,GAAC,GAAG,CAAC,EAAE,CAAC;gEACnC,KAAK,CAAC,CAAC;oEAAE6F,SAAS,EAAE;gEAAS,CAAC,CAAC,GAElC,CAAC,CAAC;+DAXM7F,GAAC,CAAC;;;;;;;;;;;;;;;;0DAef,6LAAC,GAAG;gDAAC,SAAS,EAAC,SAAS,CAAC;0DACtB,CAACQ,OAAO,iBACP,6LAAC,MAAM;oDACL,OAAO,CAAC,CAAC,IAAM6D,OAAO,CAAC,CAAC,CAAC;oDACzB,QAAQ,CAAC,CAAC,CAACN,aAAa,IAAIhD,OAAO,CAAC;oDACpC,SAAS,CAAC,CAAC,CAAA,kBAAA,EAAqBgD,aAAa,GAAG,wBAAwB,GAAG,6BAA6B,EAAE,CAAC,CAC5G;8DACEhD,OAAO,GAAG,YAAY,GAAG,UAAU,CAAC;;;;;yEAGvC,6LAAC,MAAM;oDAAC,OAAO,CAAC,CAAC,IAAM+D,QAAQ,CAAC,CAAC,CAAC;oDAAC,SAAS,EAAC,8CAA8C;8DAAC,MAAM,EAAE,MAAM,CAC3G,CAAC;;;;;;;;;;;;;;;;;;;;;;;4BAMPtE,OAAO,kBACN,6LAAC,GAAG;gCAAC,SAAS,EAAC,iDAAiD,CAAC;;kDAC/D,6LAAC,GAAG;wCAAC,SAAS,EAAC,sBAAsB,CAAC;kDACnC1B,KAAK,CAAC4G,IAAI,CAAC;4CAAExF,MAAM,EAAE/H;wCAAQ,CAAC,CAAC,CAACsJ,GAAG,CAAC,CAACkE,GAAC,EAAE3F,GAAC,iBACxC,6LAAC,KAAK,CACJ,GAAG,CAAC;gDACJ,GAAG,CAAC,EAAE4F,IAAE,GAAM9E,YAAY,CAAC+B,OAAO,CAAC7C,GAAC,CAAC,GAAG4F,IAAG,CAAC;gDAC5C,SAAS,EAAC,SAAS;gDACnB,SAAS,CAAC,CAAC,CAAC,CAAC;gDACb,KAAK,CAAC,CAAChF,SAAS,CAACZ,GAAC,CAAC,IAAI,EAAE,CAAC;gDAC1B,QAAQ,CAAC,EAAEiC,GAAC,GAAK+B,WAAW,CAAChE,GAAC,EAAEiC,GAAC,CAACsD,MAAM,CAACC,KAAK,CAAC,CAAC;gDAChD,SAAS,CAAC,EAAEvD,IAAC,GAAKiC,QAAQ,CAAClE,GAAC,EAAEiC,IAAC,CAAC,CAAC;gDACjC,SAAS,CAAC,CAAC,GAAGqD,WAAW,EAAE,CAAC;gDAC5B,UAAU,CAAC,GAAC,CAAA,IAAA,EAAOtF,GAAC,GAAG,CAAC,EAAE,CAAC,GAE9B,CAAC,CAAC;+CAVMA,GAAC,CAAC;;;;;;;;;;kDAab,6LAAC,GAAG;wCAAC,SAAS,EAAC,iCAAiC,CAAC;;0DAC/C,6LAAC,MAAM;gDAAC,OAAO,CAAC,CAAC,IAAMmE,YAAY,CAAC,CAAC,CAAC;gDAAC,QAAQ,CAAC,CAAClD,SAAS,CAAC;gDAAC,SAAS,EAAC,2CAA2C,CAAC;0DAC/GA,SAAS,GAAG,cAAc,GAAG,YAAY,CAAC;;;;;;0DAE7C,6LAAC,GAAG;gDAAC,SAAS,EAAC,wBAAwB,CAAC;0DAACP,SAAS,GAAG,CAAA,WAAA,EAAc7H,IAAI,CAACiN,GAAG,CAAC,CAAC,EAAEjN,IAAI,CAACkN,IAAI,CAAC,CAACrF,SAAS,GAAGnI,IAAI,CAACI,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAA,CAAA,CAAG,GAAG,EAAE,CAAC,EAAE,GAAG,CAAC;;;;;;;;;;;;;;;;;;4BAK9IwI,OAAO,kBAAI,6LAAC,GAAG;gCAAC,SAAS,CAAC,CAAC,CAAA,QAAA,EAAWA,OAAO,CAACnF,EAAE,GAAG,gBAAgB,GAAG,eAAe,EAAE,CAAC,CAAC;0CAACmF,OAAO,CAAClE,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;;;;;;4BAC9GkC,cAAc,kBAAI,6LAAC,GAAG;gCAAC,SAAS,EAAC,uBAAuB,CAAC;0CAACA,cAAc,CAAC,EAAE,GAAG,CAAC,CAAC;;;;;;0CAEjF,6LAAC,GAAG;gCAAC,SAAS,EAAC,6BAA6B,CAAC;wDAC3C,6LAAC,MAAM;oCAAC,OAAO,CAAC,CAACT,OAAO,CAAC;oCAAC,SAAS,EAAC,6BAA6B;8CAAC,KAAK,EAAE,MAAM,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM5F;;MA3YSF,gBAAgBA","ignoreList":[],"debugId":null}}]
}