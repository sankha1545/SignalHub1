{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///E:/Attack%20Capital/SignalHub/frontend/src/app/api/auth/phone/send/route.ts"],"sourcesContent":["// File: app/api/auth/phone/send/route.ts\r\nimport { NextResponse } from \"next/server\";\r\nimport Twilio from \"twilio\";\r\n\r\nconst twilioClient = Twilio(\r\n  process.env.TWILIO_ACCOUNT_SID!,\r\n  process.env.TWILIO_AUTH_TOKEN!\r\n);\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const { phone } = await req.json();\r\n    if (!phone) {\r\n      return NextResponse.json({ ok: false, error: \"Phone required\" }, { status: 400 });\r\n    }\r\n\r\n    // Generate OTP (example: 6-digit)\r\n    const otp = Math.floor(100000 + Math.random() * 900000).toString();\r\n\r\n    // Send SMS via Twilio\r\n    const message = await twilioClient.messages.create({\r\n      body: `Your SignalHub verification code is ${otp}`,\r\n      from: process.env.TWILIO_PHONE_NUMBER!, // must be SMS-capable\r\n      to: phone,\r\n    });\r\n\r\n    console.log(\"Twilio sent:\", {\r\n      sid: message.sid,\r\n      status: message.status,\r\n      to: message.to,\r\n      errorCode: message.errorCode,\r\n      errorMessage: message.errorMessage,\r\n    });\r\n\r\n    // Optionally save { phone, otp, sid } to DB for verification later\r\n    return NextResponse.json({ ok: true, sid: message.sid, status: message.status });\r\n  } catch (err: any) {\r\n    console.error(\"SMS send failed:\", err);\r\n    return NextResponse.json({ ok: false, error: String(err) }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,yCAAyC;;;;;AACzC;AACA;;;AAEA,MAAM,eAAe,IAAA,mJAAM,EACzB,QAAQ,GAAG,CAAC,kBAAkB,EAC9B,QAAQ,GAAG,CAAC,iBAAiB;AAGxB,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,IAAI;QAChC,IAAI,CAAC,OAAO;YACV,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,IAAI;gBAAO,OAAO;YAAiB,GAAG;gBAAE,QAAQ;YAAI;QACjF;QAEA,kCAAkC;QAClC,MAAM,MAAM,KAAK,KAAK,CAAC,SAAS,KAAK,MAAM,KAAK,QAAQ,QAAQ;QAEhE,sBAAsB;QACtB,MAAM,UAAU,MAAM,aAAa,QAAQ,CAAC,MAAM,CAAC;YACjD,MAAM,CAAC,oCAAoC,EAAE,KAAK;YAClD,MAAM,QAAQ,GAAG,CAAC,mBAAmB;YACrC,IAAI;QACN;QAEA,QAAQ,GAAG,CAAC,gBAAgB;YAC1B,KAAK,QAAQ,GAAG;YAChB,QAAQ,QAAQ,MAAM;YACtB,IAAI,QAAQ,EAAE;YACd,WAAW,QAAQ,SAAS;YAC5B,cAAc,QAAQ,YAAY;QACpC;QAEA,mEAAmE;QACnE,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAM,KAAK,QAAQ,GAAG;YAAE,QAAQ,QAAQ,MAAM;QAAC;IAChF,EAAE,OAAO,KAAU;QACjB,QAAQ,KAAK,CAAC,oBAAoB;QAClC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAO,OAAO,OAAO;QAAK,GAAG;YAAE,QAAQ;QAAI;IAC5E;AACF","debugId":null}}]
}