{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///E:/Attack%20Capital/SignalHub/frontend/src/app/api/countries/route.ts"],"sourcesContent":["// app/api/countries/route.ts\r\nimport { NextResponse } from \"next/server\";\r\n\r\nexport async function GET() {\r\n  try {\r\n    // âœ… include fields parameter to avoid 400\r\n    const endpoint = \"https://restcountries.com/v3.1/all?fields=name,cca2,idd,flags\";\r\n    const r = await fetch(endpoint, { cache: \"no-store\" }); // no headers\r\n\r\n    if (!r.ok) {\r\n      const msg = await r.text().catch(() => \"\");\r\n      console.error(\"RestCountries error:\", r.status, msg);\r\n      return NextResponse.json(\r\n        { error: \"Failed to fetch countries\", status: r.status },\r\n        { status: r.status }\r\n      );\r\n    }\r\n\r\n    const json = await r.json();\r\n\r\n    // normalize output\r\n    const parsed = (json || [])\r\n      .map((c: any) => {\r\n        let callingCode = \"\";\r\n        if (c?.idd?.root) {\r\n          const root = c.idd.root;\r\n          const suffix = Array.isArray(c.idd.suffixes) ? c.idd.suffixes[0] : \"\";\r\n          callingCode = `${root}${suffix || \"\"}`;\r\n        }\r\n\r\n        if (callingCode && !callingCode.startsWith(\"+\")) callingCode = `+${callingCode}`;\r\n        return {\r\n          name: c?.name?.common || \"Unknown\",\r\n          cca2: c?.cca2 || \"\",\r\n          callingCode,\r\n          flag: c?.flags?.svg || c?.flags?.png || \"\",\r\n        };\r\n      })\r\n      .filter((x: any) => x.callingCode)\r\n      .sort((a: any, b: any) => a.name.localeCompare(b.name));\r\n\r\n    return NextResponse.json(parsed, { status: 200 });\r\n  } catch (err) {\r\n    console.error(\"Proxy fetch failed:\", err);\r\n    return NextResponse.json({ error: \"Internal server error\" }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;AAC7B;;AAEO,eAAe;IACpB,IAAI;QACF,0CAA0C;QAC1C,MAAM,WAAW;QACjB,MAAM,IAAI,MAAM,MAAM,UAAU;YAAE,OAAO;QAAW,IAAI,aAAa;QAErE,IAAI,CAAC,EAAE,EAAE,EAAE;YACT,MAAM,MAAM,MAAM,EAAE,IAAI,GAAG,KAAK,CAAC,IAAM;YACvC,QAAQ,KAAK,CAAC,wBAAwB,EAAE,MAAM,EAAE;YAChD,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;gBAA6B,QAAQ,EAAE,MAAM;YAAC,GACvD;gBAAE,QAAQ,EAAE,MAAM;YAAC;QAEvB;QAEA,MAAM,OAAO,MAAM,EAAE,IAAI;QAEzB,mBAAmB;QACnB,MAAM,SAAS,CAAC,QAAQ,EAAE,EACvB,GAAG,CAAC,CAAC;YACJ,IAAI,cAAc;YAClB,IAAI,GAAG,KAAK,MAAM;gBAChB,MAAM,OAAO,EAAE,GAAG,CAAC,IAAI;gBACvB,MAAM,SAAS,MAAM,OAAO,CAAC,EAAE,GAAG,CAAC,QAAQ,IAAI,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAE,GAAG;gBACnE,cAAc,GAAG,OAAO,UAAU,IAAI;YACxC;YAEA,IAAI,eAAe,CAAC,YAAY,UAAU,CAAC,MAAM,cAAc,CAAC,CAAC,EAAE,aAAa;YAChF,OAAO;gBACL,MAAM,GAAG,MAAM,UAAU;gBACzB,MAAM,GAAG,QAAQ;gBACjB;gBACA,MAAM,GAAG,OAAO,OAAO,GAAG,OAAO,OAAO;YAC1C;QACF,GACC,MAAM,CAAC,CAAC,IAAW,EAAE,WAAW,EAChC,IAAI,CAAC,CAAC,GAAQ,IAAW,EAAE,IAAI,CAAC,aAAa,CAAC,EAAE,IAAI;QAEvD,OAAO,gJAAY,CAAC,IAAI,CAAC,QAAQ;YAAE,QAAQ;QAAI;IACjD,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF","debugId":null}}]
}