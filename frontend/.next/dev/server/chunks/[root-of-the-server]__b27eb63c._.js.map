{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///E:/Attack%20Capital/SignalHub/frontend/src/lib/prisma.ts"],"sourcesContent":["// lib/prisma.ts\r\nimport { PrismaClient } from \"@prisma/client\";\r\n\r\ndeclare global {\r\n  // eslint-disable-next-line\r\n  var __prisma__: PrismaClient | undefined;\r\n}\r\nexport const prisma =\r\n  global.__prisma__ ??\r\n  new PrismaClient({\r\n    log: process.env.NODE_ENV === \"development\" ? [\"query\", \"warn\", \"error\"] : [\"error\"],\r\n  });\r\n\r\nif (process.env.NODE_ENV !== \"production\") global.__prisma__ = prisma;\r\n"],"names":[],"mappings":"AAAA,gBAAgB;;;;;AAChB;;AAMO,MAAM,SACX,OAAO,UAAU,IACjB,IAAI,6IAAY,CAAC;IACf,KAAK,uCAAyC;QAAC;QAAS;QAAQ;KAAQ,GAAG;AAC7E;AAEF,wCAA2C,OAAO,UAAU,GAAG","debugId":null}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///E:/Attack%20Capital/SignalHub/frontend/src/lib/jwt.ts"],"sourcesContent":["// src/lib/jwt.ts\r\nimport jwt, { JwtPayload } from \"jsonwebtoken\";\r\n\r\nconst SECRET = process.env.JWT_SECRET;\r\nif (!SECRET) {\r\n  if (process.env.NODE_ENV === \"production\") {\r\n    throw new Error(\"JWT_SECRET environment variable must be set in production!\");\r\n  } else {\r\n    console.warn(\"[JWT] Using fallback secret for development\");\r\n  }\r\n}\r\n\r\n/**\r\n * üîê Create a short-lived temp token (email/phone verification)\r\n */\r\nexport function signTemp(payload: Record<string, any>, expiresIn: string = \"15m\"): string {\r\n  const safePayload = { ...payload };\r\n  delete safePayload.exp;\r\n  return jwt.sign(safePayload, SECRET!, { expiresIn });\r\n}\r\n\r\n/**\r\n * ‚úÖ Verify short-lived temp tokens\r\n * Returns payload object or null if invalid/expired\r\n */\r\nexport function verifyTemp(token: string): Record<string, any> | null {\r\n  try {\r\n    return jwt.verify(token, SECRET!) as Record<string, any>;\r\n  } catch (err) {\r\n    console.warn(\"[JWT] verifyTemp failed:\", (err as Error).message);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * üíæ Create a long-lived session token for logged-in users\r\n */\r\nexport function signSession(payload: Record<string, any>, expiresIn: string = \"7d\"): string {\r\n  const safePayload = { ...payload };\r\n  delete safePayload.exp;\r\n  return jwt.sign(safePayload, SECRET!, { expiresIn });\r\n}\r\n\r\n/**\r\n * üîé Verify a session token\r\n * Returns payload object or null if invalid/expired\r\n */\r\nexport function verifySession(token: string): Record<string, any> | null {\r\n  try {\r\n    return jwt.verify(token, SECRET!) as Record<string, any>;\r\n  } catch (err) {\r\n    console.warn(\"[JWT] verifySession failed:\", (err as Error).message);\r\n    return null;\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,iBAAiB;;;;;;;;;;;AACjB;;AAEA,MAAM,SAAS,QAAQ,GAAG,CAAC,UAAU;AACrC,IAAI,CAAC,QAAQ;IACX;;SAEO;QACL,QAAQ,IAAI,CAAC;IACf;AACF;AAKO,SAAS,SAAS,OAA4B,EAAE,YAAoB,KAAK;IAC9E,MAAM,cAAc;QAAE,GAAG,OAAO;IAAC;IACjC,OAAO,YAAY,GAAG;IACtB,OAAO,kJAAG,CAAC,IAAI,CAAC,aAAa,QAAS;QAAE;IAAU;AACpD;AAMO,SAAS,WAAW,KAAa;IACtC,IAAI;QACF,OAAO,kJAAG,CAAC,MAAM,CAAC,OAAO;IAC3B,EAAE,OAAO,KAAK;QACZ,QAAQ,IAAI,CAAC,4BAA4B,AAAC,IAAc,OAAO;QAC/D,OAAO;IACT;AACF;AAKO,SAAS,YAAY,OAA4B,EAAE,YAAoB,IAAI;IAChF,MAAM,cAAc;QAAE,GAAG,OAAO;IAAC;IACjC,OAAO,YAAY,GAAG;IACtB,OAAO,kJAAG,CAAC,IAAI,CAAC,aAAa,QAAS;QAAE;IAAU;AACpD;AAMO,SAAS,cAAc,KAAa;IACzC,IAAI;QACF,OAAO,kJAAG,CAAC,MAAM,CAAC,OAAO;IAC3B,EAAE,OAAO,KAAK;QACZ,QAAQ,IAAI,CAAC,+BAA+B,AAAC,IAAc,OAAO;QAClE,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///E:/Attack%20Capital/SignalHub/frontend/src/lib/auth.ts"],"sourcesContent":["// src/lib/auth.ts\r\nimport { prisma } from \"@/lib/prisma\";\r\nimport { verifySession } from \"@/lib/jwt\";\r\n\r\nexport type SessionUser = {\r\n  id: string;\r\n  email?: string | null;\r\n  role: string;\r\n  organizationId?: string | null;\r\n};\r\n\r\nexport async function getSessionUser(req: Request): Promise<SessionUser | null> {\r\n  try {\r\n    // 1Ô∏è‚É£ Prefer Authorization header: \"Bearer <token>\"\r\n    let token: string | null = null;\r\n    const authHeader = req.headers.get(\"authorization\");\r\n    if (authHeader?.startsWith(\"Bearer \")) {\r\n      token = authHeader.slice(\"Bearer \".length).trim();\r\n    }\r\n\r\n    // 2Ô∏è‚É£ Fallback to cookies\r\n    if (!token) {\r\n      const cookieHeader = req.headers.get(\"cookie\") || \"\";\r\n      const cookies: Record<string, string> = Object.fromEntries(\r\n        cookieHeader\r\n          .split(\";\")\r\n          .map(c => c.trim().split(\"=\"))\r\n          .map(([k, v]) => [decodeURIComponent(k), decodeURIComponent(v)])\r\n      );\r\n      token = cookies[\"session\"] || cookies[\"token\"] || null;\r\n    }\r\n\r\n    if (!token) return null;\r\n\r\n    // 3Ô∏è‚É£ Verify token safely\r\n    const payload = verifySession(token);\r\n    if (!payload?.id) return null;\r\n\r\n    // 4Ô∏è‚É£ Fetch user from DB\r\n    const user = await prisma.user.findUnique({ where: { id: payload.id } });\r\n    if (!user) return null;\r\n\r\n    return {\r\n      id: user.id,\r\n      email: user.email ?? null,\r\n      role: user.role,\r\n      organizationId: user.organizationId,\r\n    };\r\n  } catch (err: any) {\r\n    console.warn(\"[getSessionUser] error:\", err?.message || err);\r\n    return null;\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,kBAAkB;;;;;AAClB;AACA;;;AASO,eAAe,eAAe,GAAY;IAC/C,IAAI;QACF,oDAAoD;QACpD,IAAI,QAAuB;QAC3B,MAAM,aAAa,IAAI,OAAO,CAAC,GAAG,CAAC;QACnC,IAAI,YAAY,WAAW,YAAY;YACrC,QAAQ,WAAW,KAAK,CAAC,UAAU,MAAM,EAAE,IAAI;QACjD;QAEA,0BAA0B;QAC1B,IAAI,CAAC,OAAO;YACV,MAAM,eAAe,IAAI,OAAO,CAAC,GAAG,CAAC,aAAa;YAClD,MAAM,UAAkC,OAAO,WAAW,CACxD,aACG,KAAK,CAAC,KACN,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,GAAG,KAAK,CAAC,MACxB,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAK;oBAAC,mBAAmB;oBAAI,mBAAmB;iBAAG;YAEnE,QAAQ,OAAO,CAAC,UAAU,IAAI,OAAO,CAAC,QAAQ,IAAI;QACpD;QAEA,IAAI,CAAC,OAAO,OAAO;QAEnB,0BAA0B;QAC1B,MAAM,UAAU,IAAA,oIAAa,EAAC;QAC9B,IAAI,CAAC,SAAS,IAAI,OAAO;QAEzB,yBAAyB;QACzB,MAAM,OAAO,MAAM,gIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YAAE,OAAO;gBAAE,IAAI,QAAQ,EAAE;YAAC;QAAE;QACtE,IAAI,CAAC,MAAM,OAAO;QAElB,OAAO;YACL,IAAI,KAAK,EAAE;YACX,OAAO,KAAK,KAAK,IAAI;YACrB,MAAM,KAAK,IAAI;YACf,gBAAgB,KAAK,cAAc;QACrC;IACF,EAAE,OAAO,KAAU;QACjB,QAAQ,IAAI,CAAC,2BAA2B,KAAK,WAAW;QACxD,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///E:/Attack%20Capital/SignalHub/frontend/src/app/api/chats/route.ts"],"sourcesContent":["// src/app/api/chats/route.ts\r\n\r\nimport { NextResponse } from \"next/server\";\r\nimport { prisma } from \"@/lib/prisma\";\r\nimport { getSessionUser } from \"@/lib/auth\";\r\nimport { cookies } from \"next/headers\";\r\nimport jwt from \"jsonwebtoken\";\r\n\r\nconst JWT_SECRET = process.env.JWT_SECRET || \"\";\r\n\r\n/* -------------------------------------------------------\r\n   Helpers\r\n------------------------------------------------------- */\r\n\r\nasync function safeJson(req: Request) {\r\n  try {\r\n    return await req.json();\r\n  } catch {\r\n    return {};\r\n  }\r\n}\r\n\r\n/**\r\n * Resolve logged-in user from:\r\n * 1. next-auth helper\r\n * 2. Authorization header\r\n * 3. Session cookie\r\n */\r\nasync function resolveSessionUser(req: Request) {\r\n  // #1 next-auth\r\n  try {\r\n    const u = await getSessionUser(req);\r\n    if (u?.id) return u;\r\n  } catch {}\r\n\r\n  // #2 bearer\r\n  try {\r\n    const auth =\r\n      req.headers.get(\"authorization\") ??\r\n      req.headers.get(\"Authorization\");\r\n    if (auth?.toLowerCase().startsWith(\"bearer \")) {\r\n      const token = auth.slice(7).trim();\r\n      if (token && JWT_SECRET) {\r\n        const payload = jwt.verify(token, JWT_SECRET) as any;\r\n        if (payload?.id) return payload;\r\n      }\r\n    }\r\n  } catch {}\r\n\r\n  // #3 cookie\r\n  try {\r\n    const store = await cookies();\r\n    const token = store.get(\"session\")?.value;\r\n    if (token && JWT_SECRET) {\r\n      const payload = jwt.verify(token, JWT_SECRET) as any;\r\n      if (payload?.id) return payload;\r\n    }\r\n  } catch {}\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Authorize that user can access a team.\r\n * ADMIN ‚Üí always pass\r\n * Manager or Member of team ‚Üí pass\r\n */\r\nasync function authorizeTeamAccess(userId: string, userRole: string | null, teamId: string) {\r\n  if (userRole === \"ADMIN\") return true;\r\n\r\n  const team = await prisma.team.findUnique({\r\n    where: { id: teamId },\r\n    select: { managerId: true }\r\n  });\r\n\r\n  if (!team) return false;\r\n\r\n  // Is manager?\r\n  if (team.managerId === userId) return true;\r\n\r\n  // Is team member?\r\n  const member = await prisma.teamMember.findFirst({\r\n    where: { teamId, userId },\r\n    select: { id: true }\r\n  });\r\n\r\n  return !!member;\r\n}\r\n\r\n/**\r\n * Normalize a chat for frontend use\r\n */\r\nfunction normalizeChat(chat: any) {\r\n  return {\r\n    id: chat.id,\r\n    name: chat.name ?? (chat.team ? `Team: ${chat.team.name}` : \"Chat\"),\r\n    type: chat.type,\r\n    teamId: chat.teamId ?? null,\r\n    createdBy: chat.createdBy\r\n      ? { id: chat.createdBy.id, name: chat.createdBy.name }\r\n      : null,\r\n    members:\r\n      chat.members?.map((m: any) => ({\r\n        id: m.user.id,\r\n        name: m.user.name,\r\n        email: m.user.email,\r\n        role: m.role,\r\n      })) ?? [],\r\n    lastMessageAt: chat.lastMessageAt?.toISOString?.() ?? null,\r\n    createdAt: chat.createdAt?.toISOString?.() ?? null,\r\n  };\r\n}\r\n\r\n/* -------------------------------------------------------\r\n   GET /api/chats\r\n   - Without query ‚Üí get all chats user is a member of\r\n   - With ?teamId= ‚Üí get team chat (0 or 1)\r\n------------------------------------------------------- */\r\n\r\nexport async function GET(req: Request) {\r\n  try {\r\n    const session = await resolveSessionUser(req);\r\n    if (!session) {\r\n      return NextResponse.json(\r\n        { ok: false, error: \"Unauthorized\", chats: [] },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    const userId = String(session.id);\r\n    const url = new URL(req.url);\r\n    const teamId = url.searchParams.get(\"teamId\");\r\n\r\n    /* ----------------------------------------------\r\n       TEAM CHAT MODE\r\n    ---------------------------------------------- */\r\n    if (teamId) {\r\n      const chat = await prisma.chat.findFirst({\r\n        where: { teamId },\r\n        include: {\r\n          members: {\r\n            include: {\r\n              user: { select: { id: true, name: true, email: true } },\r\n            },\r\n          },\r\n          team: { select: { id: true, name: true } },\r\n          createdBy: { select: { id: true, name: true } },\r\n        },\r\n      });\r\n\r\n      return NextResponse.json(\r\n        { ok: true, chat: chat ? normalizeChat(chat) : null },\r\n        { status: 200 }\r\n      );\r\n    }\r\n\r\n    /* ----------------------------------------------\r\n       ALL CHATS FOR THIS USER\r\n    ---------------------------------------------- */\r\n\r\n    const membership = await prisma.chatMember.findMany({\r\n      where: { userId },\r\n      select: { chatId: true },\r\n    });\r\n\r\n    if (membership.length === 0) {\r\n      return NextResponse.json({ ok: true, chats: [] });\r\n    }\r\n\r\n    const chatIds = membership.map((m) => m.chatId);\r\n\r\n    const chats = await prisma.chat.findMany({\r\n      where: { id: { in: chatIds } },\r\n      include: {\r\n        members: {\r\n          include: {\r\n            user: { select: { id: true, name: true, email: true } },\r\n          },\r\n        },\r\n        team: { select: { id: true, name: true } },\r\n        createdBy: { select: { id: true, name: true } },\r\n      },\r\n      orderBy: { lastMessageAt: \"desc\" },\r\n    });\r\n\r\n    return NextResponse.json({\r\n      ok: true,\r\n      chats: chats.map(normalizeChat),\r\n    });\r\n  } catch (err) {\r\n    console.error(\"GET /api/chats error:\", err);\r\n    return NextResponse.json(\r\n      { ok: false, error: \"Internal Server Error\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n/* -------------------------------------------------------\r\n   POST /api/chats\r\n   Creates a chat (team group chat or direct chat)\r\n   Body:\r\n     {\r\n       name?: string,\r\n       teamId?: string,\r\n       memberIds?: string[]\r\n     }\r\n------------------------------------------------------- */\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const session = await resolveSessionUser(req);\r\n    if (!session) {\r\n      return NextResponse.json(\r\n        { ok: false, error: \"Unauthorized\", chat: null },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    const userId = String(session.id);\r\n    const userRole = session.role ?? null;\r\n\r\n    const body = await safeJson(req);\r\n    const name = typeof body.name === \"string\" ? body.name.trim() : undefined;\r\n    const teamId =\r\n      typeof body.teamId === \"string\" ? body.teamId.trim() : undefined;\r\n\r\n    let memberIds: string[] = Array.isArray(body.memberIds)\r\n      ? body.memberIds.filter((x: any) => typeof x === \"string\")\r\n      : [];\r\n\r\n    /* ----------------------------------------------\r\n       TEAM CHAT\r\n    ---------------------------------------------- */\r\n    if (teamId) {\r\n      const team = await prisma.team.findUnique({\r\n        where: { id: teamId },\r\n        select: { id: true },\r\n      });\r\n\r\n      if (!team) {\r\n        return NextResponse.json(\r\n          { ok: false, error: \"Team not found\" },\r\n          { status: 404 }\r\n        );\r\n      }\r\n\r\n      const allowed = await authorizeTeamAccess(\r\n        userId,\r\n        userRole,\r\n        teamId\r\n      );\r\n\r\n      if (!allowed) {\r\n        return NextResponse.json(\r\n          { ok: false, error: \"Forbidden\" },\r\n          { status: 403 }\r\n        );\r\n      }\r\n\r\n      const existingTeamChat = await prisma.chat.findFirst({\r\n        where: { teamId },\r\n        include: {\r\n          members: {\r\n            include: { user: { select: { id: true, name: true, email: true } } },\r\n          },\r\n          team: true,\r\n          createdBy: true,\r\n        },\r\n      });\r\n\r\n      if (existingTeamChat) {\r\n        return NextResponse.json({\r\n          ok: true,\r\n          created: false,\r\n          chat: normalizeChat(existingTeamChat),\r\n        });\r\n      }\r\n\r\n      const teamMembers = await prisma.teamMember.findMany({\r\n        where: { teamId },\r\n        select: { userId: true },\r\n      });\r\n\r\n      memberIds = Array.from(\r\n        new Set([...memberIds, userId, ...teamMembers.map((x) => x.userId)])\r\n      );\r\n    }\r\n\r\n    /* ----------------------------------------------\r\n       DIRECT CHAT\r\n    ---------------------------------------------- */\r\n    const uniqueMemberIds = Array.from(new Set([...memberIds, userId]));\r\n\r\n    const chat = await prisma.chat.create({\r\n      data: {\r\n        name: name ?? null,\r\n        type: teamId ? \"TEAM\" : \"DIRECT\",\r\n        organization: {\r\n          connect: { id: session.organizationId },\r\n        },\r\n        team: teamId ? { connect: { id: teamId } } : undefined,\r\n        createdBy: { connect: { id: userId } },\r\n        members: {\r\n          create: uniqueMemberIds.map((mid) => ({\r\n            user: { connect: { id: mid } },\r\n            role: mid === userId ? \"ADMIN\" : \"MEMBER\",\r\n          })),\r\n        },\r\n      },\r\n      include: {\r\n        members: {\r\n          include: {\r\n            user: { select: { id: true, name: true, email: true } },\r\n          },\r\n        },\r\n        team: { select: { id: true, name: true } },\r\n        createdBy: { select: { id: true, name: true } },\r\n      },\r\n    });\r\n\r\n    return NextResponse.json(\r\n      { ok: true, created: true, chat: normalizeChat(chat) },\r\n      { status: 201 }\r\n    );\r\n  } catch (err) {\r\n    console.error(\"POST /api/chats error:\", err);\r\n    return NextResponse.json(\r\n      { ok: false, error: \"Internal Server Error\", chat: null },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}