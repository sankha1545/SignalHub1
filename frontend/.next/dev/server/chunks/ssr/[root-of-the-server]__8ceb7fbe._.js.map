{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///E:/Attack%20Capital/SignalHub/frontend/src/components/forms/ProfileMenu.tsx"],"sourcesContent":["// src/components/ProfileMenu.tsx\r\n\"use client\";\r\n\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\n\r\ntype User = {\r\n  id: string;\r\n  name?: string | null;\r\n  email?: string | null;\r\n  role?: string | null;\r\n  profile?: { avatarUrl?: string | null; displayName?: string | null } | null;\r\n};\r\n\r\nexport default function ProfileMenu() {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [open, setOpen] = useState(false);\r\n  const router = useRouter();\r\n  const ref = useRef<HTMLDivElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function load() {\r\n      try {\r\n        const res = await fetch(\"/api/me\");\r\n        if (!res.ok) {\r\n          setUser(null);\r\n          return;\r\n        }\r\n        const json = await res.json().catch(() => null);\r\n        if (mounted && json?.ok && json.user) setUser(json.user);\r\n      } catch (err) {\r\n        // ignore\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, []);\r\n\r\n  // click outside to close menu\r\n  useEffect(() => {\r\n    function onDoc(e: MouseEvent) {\r\n      if (!ref.current) return;\r\n      if (!ref.current.contains(e.target as Node)) setOpen(false);\r\n    }\r\n    document.addEventListener(\"mousedown\", onDoc);\r\n    return () => document.removeEventListener(\"mousedown\", onDoc);\r\n  }, []);\r\n\r\n  function initials(name?: string | null, email?: string | null) {\r\n    const source = name || email || \"U\";\r\n    return (source.trim().charAt(0) || \"U\").toUpperCase();\r\n  }\r\n\r\n  async function handleLogout() {\r\n    try {\r\n      // call logout endpoint if present; otherwise fallback to redirect\r\n      await fetch(\"/api/auth/logout\", { method: \"POST\" }).catch(() => {});\r\n    } finally {\r\n      // clear client-side and force redirect to login\r\n      router.push(\"/login\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div ref={ref} className=\"relative\">\r\n      <button\r\n        onClick={() => setOpen((v) => !v)}\r\n        className=\"flex items-center gap-2 border px-2 py-1 rounded hover:shadow-sm bg-white\"\r\n        aria-haspopup=\"true\"\r\n        aria-expanded={open}\r\n      >\r\n        <div className=\"w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-sm text-slate-700 overflow-hidden\">\r\n          {user?.profile?.avatarUrl ? (\r\n            // eslint-disable-next-line @next/next/no-img-element\r\n            <img src={user.profile.avatarUrl} alt=\"avatar\" className=\"w-full h-full object-cover\" />\r\n          ) : (\r\n            <span>{initials(user?.name, user?.email)}</span>\r\n          )}\r\n        </div>\r\n        <span className=\"hidden sm:inline text-sm text-slate-700\">{user?.name || user?.email || (loading ? \"Loading...\" : \"Account\")}</span>\r\n      </button>\r\n\r\n      {open && (\r\n        <div className=\"absolute right-0 mt-2 w-48 bg-white border rounded shadow z-50\">\r\n          <div className=\"p-3 border-b\">\r\n            <div className=\"text-sm font-semibold\">{user?.profile?.displayName || user?.name || user?.email}</div>\r\n            <div className=\"text-xs text-slate-500\">{user?.role}</div>\r\n          </div>\r\n\r\n          <div className=\"flex flex-col py-1\">\r\n            <Link href=\"/account\" onClick={() => setOpen(false)} className=\"px-3 py-2 text-sm hover:bg-slate-50\">\r\n              View profile\r\n            </Link>\r\n            <Link href=\"/dashboard\" onClick={() => setOpen(false)} className=\"px-3 py-2 text-sm hover:bg-slate-50\">\r\n              Dashboard\r\n            </Link>\r\n            <button onClick={handleLogout} className=\"text-left px-3 py-2 text-sm hover:bg-slate-50\">\r\n              Sign out\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,iCAAiC;;;;;;AAGjC;AACA;AACA;AAJA;;;;;AAce,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,MAAM,IAAA,+MAAM,EAAwB;IAE1C,IAAA,kNAAS,EAAC;QACR,IAAI,UAAU;QACd,eAAe;YACb,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM;gBACxB,IAAI,CAAC,IAAI,EAAE,EAAE;oBACX,QAAQ;oBACR;gBACF;gBACA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;gBAC1C,IAAI,WAAW,MAAM,MAAM,KAAK,IAAI,EAAE,QAAQ,KAAK,IAAI;YACzD,EAAE,OAAO,KAAK;YACZ,SAAS;YACX,SAAU;gBACR,IAAI,SAAS,WAAW;YAC1B;QACF;QACA;QACA,OAAO;YACL,UAAU;QACZ;IACF,GAAG,EAAE;IAEL,8BAA8B;IAC9B,IAAA,kNAAS,EAAC;QACR,SAAS,MAAM,CAAa;YAC1B,IAAI,CAAC,IAAI,OAAO,EAAE;YAClB,IAAI,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,EAAE,MAAM,GAAW,QAAQ;QACvD;QACA,SAAS,gBAAgB,CAAC,aAAa;QACvC,OAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;IACzD,GAAG,EAAE;IAEL,SAAS,SAAS,IAAoB,EAAE,KAAqB;QAC3D,MAAM,SAAS,QAAQ,SAAS;QAChC,OAAO,CAAC,OAAO,IAAI,GAAG,MAAM,CAAC,MAAM,GAAG,EAAE,WAAW;IACrD;IAEA,eAAe;QACb,IAAI;YACF,kEAAkE;YAClE,MAAM,MAAM,oBAAoB;gBAAE,QAAQ;YAAO,GAAG,KAAK,CAAC,KAAO;QACnE,SAAU;YACR,gDAAgD;YAChD,OAAO,IAAI,CAAC;QACd;IACF;IAEA,qBACE,8OAAC;QAAI,KAAK;QAAK,WAAU;;0BACvB,8OAAC;gBACC,SAAS,IAAM,QAAQ,CAAC,IAAM,CAAC;gBAC/B,WAAU;gBACV,iBAAc;gBACd,iBAAe;;kCAEf,8OAAC;wBAAI,WAAU;kCACZ,MAAM,SAAS,YACd,qDAAqD;sCACrD,8OAAC;4BAAI,KAAK,KAAK,OAAO,CAAC,SAAS;4BAAE,KAAI;4BAAS,WAAU;;;;;iDAEzD,8OAAC;sCAAM,SAAS,MAAM,MAAM,MAAM;;;;;;;;;;;kCAGtC,8OAAC;wBAAK,WAAU;kCAA2C,MAAM,QAAQ,MAAM,SAAS,CAAC,UAAU,eAAe,SAAS;;;;;;;;;;;;YAG5H,sBACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CAAyB,MAAM,SAAS,eAAe,MAAM,QAAQ,MAAM;;;;;;0CAC1F,8OAAC;gCAAI,WAAU;0CAA0B,MAAM;;;;;;;;;;;;kCAGjD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,uKAAI;gCAAC,MAAK;gCAAW,SAAS,IAAM,QAAQ;gCAAQ,WAAU;0CAAsC;;;;;;0CAGrG,8OAAC,uKAAI;gCAAC,MAAK;gCAAa,SAAS,IAAM,QAAQ;gCAAQ,WAAU;0CAAsC;;;;;;0CAGvG,8OAAC;gCAAO,SAAS;gCAAc,WAAU;0CAAgD;;;;;;;;;;;;;;;;;;;;;;;;AAQrG","debugId":null}},
    {"offset": {"line": 224, "column": 0}, "map": {"version":3,"sources":["file:///E:/Attack%20Capital/SignalHub/frontend/src/components/ui/Sidebar.tsx"],"sourcesContent":["// components/Sidebar.tsx\r\n\"use client\";\r\nimport React from \"react\";\r\nimport clsx from \"clsx\";\r\n\r\nconst nav = [\r\n  { id: \"overview\", label: \"Overview\", icon: \"â–¦\" },\r\n  { id: \"inbox\", label: \"Inbox\", icon: \"âœ‰\", badge: 12 },\r\n  { id: \"sent\", label: \"Sent\", icon: \"âž¤\" },\r\n  { id: \"teams\", label: \"Teams\", icon: \"ðŸ‘¥\" },\r\n  { id: \"analytics\", label: \"Analytics\", icon: \"ðŸ“ˆ\" },\r\n  { id: \"settings\", label: \"Settings\", icon: \"âš™\" },\r\n];\r\n\r\nexport default function Sidebar({ active = \"analytics\" }: { active?: string }) {\r\n  return (\r\n    <aside className=\"w-72 min-h-screen border-r bg-white flex flex-col justify-between\">\r\n      <div className=\"p-4\">\r\n        <div className=\"flex items-center gap-3 mb-4\">\r\n          <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-emerald-300 to-indigo-300 flex items-center justify-center text-white font-bold\">MH</div>\r\n          <div>\r\n            <div className=\"text-sm font-semibold\">MessengerHub</div>\r\n            <div className=\"text-xs text-slate-400\">Unified Inbox</div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mb-3\">\r\n          <input placeholder=\"Search...\" className=\"w-full px-3 py-2 border rounded-lg text-sm\" />\r\n        </div>\r\n\r\n        <nav className=\"space-y-1 mt-3\">\r\n          {nav.map((n) => (\r\n            <button key={n.id} className={clsx(\r\n                \"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm hover:bg-slate-50\",\r\n                active === n.id ? \"bg-emerald-50 text-emerald-700 font-semibold\" : \"text-slate-700\"\r\n              )}>\r\n              <span className=\"w-6 text-center\">{n.icon}</span>\r\n              <span className=\"flex-1 text-left\">{n.label}</span>\r\n              {n.badge ? <span className=\"text-xs px-2 py-0.5 rounded-full bg-emerald-600 text-white\">{n.badge}</span> : null}\r\n            </button>\r\n          ))}\r\n        </nav>\r\n      </div>\r\n\r\n      <div className=\"p-4 border-t\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <img src=\"/avatar-placeholder.png\" alt=\"me\" className=\"w-10 h-10 rounded-full\" />\r\n          <div>\r\n            <div className=\"text-xs font-medium\">John Doe</div>\r\n            <div className=\"text-xs text-slate-400\">john@company.com</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </aside>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,yBAAyB;;;;;;AAGzB;AAFA;;;AAIA,MAAM,MAAM;IACV;QAAE,IAAI;QAAY,OAAO;QAAY,MAAM;IAAI;IAC/C;QAAE,IAAI;QAAS,OAAO;QAAS,MAAM;QAAK,OAAO;IAAG;IACpD;QAAE,IAAI;QAAQ,OAAO;QAAQ,MAAM;IAAI;IACvC;QAAE,IAAI;QAAS,OAAO;QAAS,MAAM;IAAK;IAC1C;QAAE,IAAI;QAAa,OAAO;QAAa,MAAM;IAAK;IAClD;QAAE,IAAI;QAAY,OAAO;QAAY,MAAM;IAAI;CAChD;AAEc,SAAS,QAAQ,EAAE,SAAS,WAAW,EAAuB;IAC3E,qBACE,8OAAC;QAAM,WAAU;;0BACf,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CAA8H;;;;;;0CAC7I,8OAAC;;kDACC,8OAAC;wCAAI,WAAU;kDAAwB;;;;;;kDACvC,8OAAC;wCAAI,WAAU;kDAAyB;;;;;;;;;;;;;;;;;;kCAI5C,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAM,aAAY;4BAAY,WAAU;;;;;;;;;;;kCAG3C,8OAAC;wBAAI,WAAU;kCACZ,IAAI,GAAG,CAAC,CAAC,kBACR,8OAAC;gCAAkB,WAAW,IAAA,gJAAI,EAC9B,iFACA,WAAW,EAAE,EAAE,GAAG,iDAAiD;;kDAErE,8OAAC;wCAAK,WAAU;kDAAmB,EAAE,IAAI;;;;;;kDACzC,8OAAC;wCAAK,WAAU;kDAAoB,EAAE,KAAK;;;;;;oCAC1C,EAAE,KAAK,iBAAG,8OAAC;wCAAK,WAAU;kDAA8D,EAAE,KAAK;;;;;+CAAW;;+BANhG,EAAE,EAAE;;;;;;;;;;;;;;;;0BAYvB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,KAAI;4BAA0B,KAAI;4BAAK,WAAU;;;;;;sCACtD,8OAAC;;8CACC,8OAAC;oCAAI,WAAU;8CAAsB;;;;;;8CACrC,8OAAC;oCAAI,WAAU;8CAAyB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMpD","debugId":null}},
    {"offset": {"line": 436, "column": 0}, "map": {"version":3,"sources":["file:///E:/Attack%20Capital/SignalHub/frontend/src/components/ui/Topbar.tsx"],"sourcesContent":["// components/Topbar.tsx\r\n\"use client\";\r\nimport React from \"react\";\r\n\r\nexport default function Topbar({ title = \"Dashboard\" }: { title?: string }) {\r\n  return (\r\n    <header className=\"flex items-center justify-between p-4 bg-white border-b\">\r\n      <div className=\"text-sm text-slate-500\">\r\n        Dashboard &nbsp;â€º&nbsp; <span className=\"font-semibold text-slate-700\">{title}</span>\r\n      </div>\r\n\r\n      <div className=\"flex items-center gap-3\">\r\n        <div className=\"hidden sm:block\">\r\n          <input placeholder=\"Search conversations...\" className=\"px-3 py-2 border rounded-lg text-sm w-96\" />\r\n        </div>\r\n        <button className=\"px-3 py-2 rounded-lg border bg-white\">ðŸ””</button>\r\n        <button className=\"px-3 py-2 text-white rounded-lg bg-gradient-to-br from-rose-400 to-emerald-400\">+ Create</button>\r\n        <img src=\"/globe.svg\" alt=\"avatar\" className=\"w-9 h-9 rounded-full border\" />\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;;;AACxB;;AAGe,SAAS,OAAO,EAAE,QAAQ,WAAW,EAAsB;IACxE,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;gBAAI,WAAU;;oBAAyB;kCACd,8OAAC;wBAAK,WAAU;kCAAgC;;;;;;;;;;;;0BAG1E,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAM,aAAY;4BAA0B,WAAU;;;;;;;;;;;kCAEzD,8OAAC;wBAAO,WAAU;kCAAuC;;;;;;kCACzD,8OAAC;wBAAO,WAAU;kCAAiF;;;;;;kCACnG,8OAAC;wBAAI,KAAI;wBAAa,KAAI;wBAAS,WAAU;;;;;;;;;;;;;;;;;;AAIrD","debugId":null}}]
}