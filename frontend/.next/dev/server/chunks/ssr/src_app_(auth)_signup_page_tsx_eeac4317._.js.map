{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/Attack%20Capital/SignalHub/frontend/src/app/%28auth%29/signup/page.tsx"],"sourcesContent":["// File: app/(auth)/signup/page.tsx\r\n\"use client\";\r\n\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\n/* ---------- types ---------- */\r\ntype ApiResp = { ok?: boolean; tempToken?: string; sessionToken?: string; activated?: boolean; error?: string; reason?: string; [k: string]: any };\r\ntype Country = { name: string; cca2: string; callingCode: string; flag?: string };\r\n\r\n/* ---------- helpers ---------- */\r\nasync function postJSON(url: string, body: any): Promise<ApiResp> {\r\n  try {\r\n    const res = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(body),\r\n      credentials: \"include\",\r\n    });\r\n    try {\r\n      return await res.json();\r\n    } catch {\r\n      return { ok: res.ok, error: res.statusText || \"Unexpected response\" };\r\n    }\r\n  } catch (err: any) {\r\n    return { error: err?.message || String(err) };\r\n  }\r\n}\r\n\r\n/* ---------- CountryDropdown component ---------- */\r\nfunction useOnClickOutside(ref: React.RefObject<HTMLElement>, handler: () => void) {\r\n  useEffect(() => {\r\n    function listener(e: MouseEvent | TouchEvent) {\r\n      if (!ref.current || ref.current.contains(e.target as Node)) return;\r\n      handler();\r\n    }\r\n    document.addEventListener(\"mousedown\", listener);\r\n    document.addEventListener(\"touchstart\", listener);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", listener);\r\n      document.removeEventListener(\"touchstart\", listener);\r\n    };\r\n  }, [ref, handler]);\r\n}\r\n\r\nfunction CountryDropdown({\r\n  countries,\r\n  value,\r\n  onChange,\r\n  disabled,\r\n  placeholder = \"Select country\",\r\n}: {\r\n  countries: Country[] | null;\r\n  value: Country | null;\r\n  onChange: (c: Country | null) => void;\r\n  disabled?: boolean;\r\n  placeholder?: string;\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n  const [query, setQuery] = useState(\"\");\r\n  const [highlight, setHighlight] = useState(0);\r\n  const rootRef = useRef<HTMLDivElement | null>(null);\r\n  const searchRef = useRef<HTMLInputElement | null>(null);\r\n  const listRef = useRef<HTMLUListElement | null>(null);\r\n\r\n  useOnClickOutside(rootRef, () => setOpen(false));\r\n\r\n  useEffect(() => {\r\n    setHighlight(0);\r\n  }, [query, open]);\r\n\r\n  const items = (countries || []).filter((c) => {\r\n    if (!query) return true;\r\n    const q = query.toLowerCase();\r\n    return c.name.toLowerCase().includes(q) || (c.callingCode || \"\").includes(q) || (c.cca2 || \"\").toLowerCase().includes(q);\r\n  });\r\n\r\n  function handleKeyDown(e: React.KeyboardEvent) {\r\n    if (!open && (e.key === \"ArrowDown\" || e.key === \"Enter\")) {\r\n      e.preventDefault();\r\n      setOpen(true);\r\n      setTimeout(() => searchRef.current?.focus(), 10);\r\n      return;\r\n    }\r\n    if (!open) return;\r\n\r\n    if (e.key === \"ArrowDown\") {\r\n      e.preventDefault();\r\n      setHighlight((h) => Math.min(h + 1, Math.max(0, items.length - 1)));\r\n      const nextIdx = Math.min(highlight + 1, items.length - 1);\r\n      listRef.current?.querySelectorAll(\"li\")[nextIdx]?.scrollIntoView({ block: \"nearest\" });\r\n    } else if (e.key === \"ArrowUp\") {\r\n      e.preventDefault();\r\n      setHighlight((h) => Math.max(h - 1, 0));\r\n      const prevIdx = Math.max(highlight - 1, 0);\r\n      listRef.current?.querySelectorAll(\"li\")[prevIdx]?.scrollIntoView({ block: \"nearest\" });\r\n    } else if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      const pick = items[Math.min(highlight, items.length - 1)];\r\n      if (pick) {\r\n        onChange(pick);\r\n        setOpen(false);\r\n      }\r\n    } else if (e.key === \"Escape\") {\r\n      e.preventDefault();\r\n      setOpen(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"relative w-full\" ref={rootRef}>\r\n      <button\r\n        type=\"button\"\r\n        aria-haspopup=\"listbox\"\r\n        aria-expanded={open}\r\n        onClick={() => {\r\n          if (disabled) return;\r\n          setOpen((v) => !v);\r\n          setTimeout(() => searchRef.current?.focus(), 10);\r\n        }}\r\n        onKeyDown={handleKeyDown}\r\n        className={`w-full text-left px-3 py-2 rounded border flex items-center gap-3 bg-white ${disabled ? \"opacity-60 pointer-events-none\" : \"hover:shadow-sm\"} transition`}\r\n      >\r\n        <div className=\"flex items-center gap-3 min-w-0\">\r\n          {value?.flag ? (\r\n            <img src={value.flag} alt={`${value.name} flag`} className=\"w-6 h-4 object-cover rounded-sm shadow-sm flex-shrink-0\" />\r\n          ) : (\r\n            <div className=\"w-6 h-4 bg-slate-100 rounded-sm flex-shrink-0\" />\r\n          )}\r\n          <div className=\"truncate\">\r\n            <div className=\"font-medium text-sm truncate\">{value ? value.name : <span className=\"text-slate-400\">{placeholder}</span>}</div>\r\n            <div className=\"text-xs text-slate-500 truncate\">{value ? value.callingCode : \"Select country code\"}</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"ml-auto text-slate-400 text-sm\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className={`h-5 w-5 transition-transform ${open ? \"rotate-180\" : \"\"}`} viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n            <path fillRule=\"evenodd\" d=\"M5.23 7.21a.75.75 0 011.06.02L10 11.584l3.71-4.355a.75.75 0 011.14.976l-4.25 5a.75.75 0 01-1.14 0l-4.25-5a.75.75 0 01.02-1.06z\" clipRule=\"evenodd\" />\r\n          </svg>\r\n        </div>\r\n      </button>\r\n\r\n      {/* Dropdown panel */}\r\n      <div\r\n        className={`absolute z-50 mt-2 w-full bg-white rounded-lg shadow-lg border overflow-hidden transform transition-all duration-150 ${open ? \"opacity-100 scale-100\" : \"opacity-0 pointer-events-none scale-95\"}`}\r\n        role=\"dialog\"\r\n        aria-modal=\"false\"\r\n      >\r\n        <div className=\"p-2\">\r\n          <input\r\n            ref={searchRef}\r\n            value={query}\r\n            onChange={(e) => setQuery(e.target.value)}\r\n            placeholder=\"Search country name, code, or dial (+91)\"\r\n            onKeyDown={handleKeyDown}\r\n            className=\"w-full px-3 py-2 rounded border focus:ring-2 focus:ring-indigo-300 outline-none text-sm\"\r\n            aria-label=\"Search country\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"max-h-56 overflow-auto\">\r\n          <ul role=\"listbox\" ref={listRef} aria-label=\"Country options\" className=\"divide-y\">\r\n            {items.length === 0 ? (\r\n              <li className=\"px-4 py-3 text-sm text-slate-500\">No matches</li>\r\n            ) : (\r\n              items.map((c, idx) => {\r\n                const isActive = idx === highlight;\r\n                return (\r\n                  <li\r\n                    key={`${c.callingCode}-${c.cca2}-${c.name}`}\r\n                    role=\"option\"\r\n                    aria-selected={value?.callingCode === c.callingCode && value?.cca2 === c.cca2}\r\n                    onMouseEnter={() => setHighlight(idx)}\r\n                    onClick={() => {\r\n                      onChange(c);\r\n                      setOpen(false);\r\n                    }}\r\n                    className={`px-3 py-2 flex items-center gap-3 cursor-pointer hover:bg-slate-50 ${isActive ? \"bg-indigo-50\" : \"\"}`}\r\n                  >\r\n                    {c.flag ? <img src={c.flag} alt={`${c.name} flag`} className=\"w-6 h-4 object-cover rounded-sm shadow-sm flex-shrink-0\" /> : <div className=\"w-6 h-4 bg-slate-100 rounded-sm flex-shrink-0\" />}\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div className=\"text-sm font-medium truncate\">{c.name}</div>\r\n                      <div className=\"text-xs text-slate-500 truncate\">{c.callingCode} • {c.cca2}</div>\r\n                    </div>\r\n                    <div className=\"text-sm text-slate-600\">{value?.callingCode === c.callingCode && value?.cca2 === c.cca2 ? \"Selected\" : \"\"}</div>\r\n                  </li>\r\n                );\r\n              })\r\n            )}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ---------- Signup page component ---------- */\r\nexport default function SignupPage(): JSX.Element {\r\n  const router = useRouter();\r\n\r\n  // Mode / flow\r\n  type Mode = \"choose\" | \"email\" | \"verifyEmail\" | \"phone\" | \"verifyPhone\" | \"org\" | \"done\";\r\n  const [mode, setMode] = useState<Mode>(\"choose\");\r\n\r\n  // Fields\r\n  const [email, setEmail] = useState(\"\");\r\n  const [emailOtp, setEmailOtp] = useState(Array(6).fill(\"\"));\r\n  const [emailCode, setEmailCode] = useState(\"\");\r\n  const [tempToken, setTempToken] = useState<string | null>(null);\r\n\r\n  const [country, setCountry] = useState<Country | null>(null);\r\n  const [countries, setCountries] = useState<Country[] | null>(null);\r\n  const [countryLoading, setCountryLoading] = useState(true);\r\n  const [countryError, setCountryError] = useState<string | null>(null);\r\n\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [phoneOtp, setPhoneOtp] = useState(Array(6).fill(\"\"));\r\n  const [phoneCode, setPhoneCode] = useState(\"\");\r\n\r\n  const [orgName, setOrgName] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n\r\n  // password visibility toggles\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n\r\n  // password validation UI\r\n  const [passwordTouched, setPasswordTouched] = useState(false);\r\n  const [passwordErrors, setPasswordErrors] = useState<string[]>([]);\r\n  const [passwordsMatch, setPasswordsMatch] = useState(true);\r\n\r\n  // UI\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState<string | null>(null);\r\n\r\n  // Resend timers\r\n  const [emailResendAvailableAt, setEmailResendAvailableAt] = useState<number | null>(null);\r\n  const [phoneResendAvailableAt, setPhoneResendAvailableAt] = useState<number | null>(null);\r\nconst [now, setNow] = useState<number>(0); // stable on server\r\nuseEffect(() => {\r\n  setNow(Date.now()); // now real client time\r\n  const id = window.setInterval(() => setNow(Date.now()), 1000);\r\n  return () => window.clearInterval(id);\r\n}, []);\r\n\r\n\r\n  function modeToStep(m: Mode) {\r\n    switch (m) {\r\n      case \"choose\":\r\n        return 1;\r\n      case \"email\":\r\n      case \"verifyEmail\":\r\n        return 2;\r\n      case \"phone\":\r\n      case \"verifyPhone\":\r\n        return 3;\r\n      case \"org\":\r\n      case \"done\":\r\n        return 4;\r\n      default:\r\n        return 1;\r\n    }\r\n  }\r\n  const step = modeToStep(mode);\r\n\r\n  /* ---------- Country fetch (robust) ---------- */\r\n\r\n  const BUILT_IN_FALLBACK: Country[] = [\r\n    { name: \"India\", cca2: \"IN\", callingCode: \"+91\", flag: \"https://flagcdn.com/w40/in.png\" },\r\n    { name: \"United States\", cca2: \"US\", callingCode: \"+1\", flag: \"https://flagcdn.com/w40/us.png\" },\r\n    { name: \"United Kingdom\", cca2: \"GB\", callingCode: \"+44\", flag: \"https://flagcdn.com/w40/gb.png\" },\r\n    { name: \"Canada\", cca2: \"CA\", callingCode: \"+1\", flag: \"https://flagcdn.com/w40/ca.png\" },\r\n    { name: \"Australia\", cca2: \"AU\", callingCode: \"+61\", flag: \"https://flagcdn.com/w40/au.png\" },\r\n  ];\r\n\r\n  function normalizeCallingCode(raw: any): string {\r\n    try {\r\n      if (!raw) return \"\";\r\n      if (typeof raw === \"string\") {\r\n        const s = raw.trim();\r\n        if (!s) return \"\";\r\n        if (s.startsWith(\"+\")) return s;\r\n        const digits = s.replace(/[^\\d]/g, \"\");\r\n        return digits ? `+${digits}` : \"\";\r\n      }\r\n      if (Array.isArray(raw) && raw.length > 0) return normalizeCallingCode(raw[0]);\r\n      if (typeof raw === \"object\") {\r\n        if (raw.root) {\r\n          const root = String(raw.root || \"\").trim();\r\n          const suffix = Array.isArray(raw.suffixes) && raw.suffixes.length > 0 ? String(raw.suffixes[0]) : \"\";\r\n          const combined = `${root}${suffix}`;\r\n          return combined.startsWith(\"+\") ? combined : combined ? `+${combined.replace(/[^\\d+]/g, \"\")}` : \"\";\r\n        }\r\n        if (raw.callingCodes && Array.isArray(raw.callingCodes) && raw.callingCodes[0]) {\r\n          return normalizeCallingCode(raw.callingCodes[0]);\r\n        }\r\n      }\r\n      return \"\";\r\n    } catch {\r\n      return \"\";\r\n    }\r\n  }\r\n\r\n  function extractFlag(raw: any, cca2?: string) {\r\n    try {\r\n      if (!raw) return cca2 ? `https://flagcdn.com/w40/${cca2.toLowerCase()}.png` : undefined;\r\n      if (raw.flag) return raw.flag;\r\n      if (raw.flags) {\r\n        if (typeof raw.flags === \"string\") return raw.flags;\r\n        if (raw.flags.svg) return raw.flags.svg;\r\n        if (raw.flags.png) return raw.flags.png;\r\n      }\r\n      if (raw.emoji) return raw.emoji;\r\n    } catch {}\r\n    return cca2 ? `https://flagcdn.com/w40/${(cca2 || \"\").toLowerCase()}.png` : undefined;\r\n  }\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async function loadCountries() {\r\n      setCountryLoading(true);\r\n      setCountryError(null);\r\n\r\n      try {\r\n        const res = await fetch(\"/api/countries\", { cache: \"no-store\" }).catch(() => null);\r\n        let rawList: any[] | null = null;\r\n\r\n        if (res && res.ok) {\r\n          const text = await res.text().catch(() => \"\");\r\n          let json: any = null;\r\n          try {\r\n            json = text ? JSON.parse(text) : null;\r\n          } catch {\r\n            json = null;\r\n          }\r\n\r\n          if (Array.isArray(json)) rawList = json;\r\n          else if (json && Array.isArray(json.countries)) rawList = json.countries;\r\n          else if (json && Array.isArray(json.data)) rawList = json.data;\r\n        }\r\n\r\n        // fallback to /api/meta/countries if /api/countries yields nothing\r\n        if ((!rawList || rawList.length === 0)) {\r\n          try {\r\n            const mres = await fetch(\"/api/meta/countries\", { cache: \"no-store\" }).catch(() => null);\r\n            if (mres && mres.ok) {\r\n              const mjson = await mres.json().catch(() => null);\r\n              if (Array.isArray(mjson)) rawList = mjson;\r\n              else if (mjson && Array.isArray(mjson.countries)) rawList = mjson.countries;\r\n            }\r\n          } catch (e) {\r\n            // ignore\r\n          }\r\n        }\r\n\r\n        // Map to Country shape\r\n        let parsed: Country[] = [];\r\n        if (Array.isArray(rawList) && rawList.length > 0) {\r\n          parsed = rawList\r\n            .map((c: any) => {\r\n              const cca2 = (c.cca2 || c.code || c.CCA2 || \"\").toString().toUpperCase();\r\n              const name = (typeof c.name === \"string\" ? c.name : (c.name && (c.name.common || c.name.official)) || c.common || c.country || c.name) || \"\";\r\n              const callingCode = String(c.callingCode || c.dialCode || c.callCode || c.phoneCode || normalizeCallingCode(c.callingCodes) || normalizeCallingCode(c.idd) || \"\").trim() || \"\";\r\n              const callingCodeNormalized = callingCode ? (callingCode.startsWith(\"+\") ? callingCode : `+${callingCode.replace(/[^\\d]/g, \"\")}`) : \"\";\r\n              const flag = extractFlag(c, cca2);\r\n              return {\r\n                name: name || (cca2 || \"\"),\r\n                cca2: cca2 || (name ? name.slice(0, 2).toUpperCase() : \"\"),\r\n                callingCode: callingCodeNormalized,\r\n                flag,\r\n              } as Country;\r\n            })\r\n            .filter((c: Country) => c.name && (c.callingCode || c.cca2));\r\n\r\n          // dedupe\r\n          const seen = new Map<string, Country>();\r\n          for (const it of parsed) {\r\n            const key = (it.cca2 || it.callingCode || it.name).toUpperCase();\r\n            if (!seen.has(key)) seen.set(key, it);\r\n          }\r\n          parsed = Array.from(seen.values()).sort((a, b) => a.name.localeCompare(b.name));\r\n        }\r\n\r\n        // final fallback\r\n        if (!Array.isArray(parsed) || parsed.length === 0) {\r\n          parsed = BUILT_IN_FALLBACK;\r\n          setCountryError(\"Country list unavailable — using fallback. You can type your country manually.\");\r\n        } else {\r\n          setCountryError(null);\r\n        }\r\n\r\n        if (!mounted) return;\r\n        setCountries(parsed);\r\n\r\n        // pick default by locale -> +91 -> +1 -> first\r\n        const locale = (navigator.language || (navigator.languages && navigator.languages[0]) || \"\").toLowerCase();\r\n        const match = locale.match(/-([a-z]{2})$/i);\r\n        let defaultCountry: Country | null = null;\r\n        if (match) {\r\n          const cca = match[1].toUpperCase();\r\n          defaultCountry = parsed.find((c) => c.cca2 === cca) || null;\r\n        }\r\n        if (!defaultCountry) defaultCountry = parsed.find((c) => c.callingCode === \"+91\") || parsed.find((c) => c.callingCode === \"+1\") || parsed[0] || null;\r\n        if (mounted) setCountry(defaultCountry);\r\n      } catch (err: any) {\r\n        if (!mounted) return;\r\n        setCountries(BUILT_IN_FALLBACK);\r\n        setCountryError(String(err?.message || err) || \"Failed to load countries\");\r\n      } finally {\r\n        if (mounted) setCountryLoading(false);\r\n      }\r\n    })();\r\n\r\n    return () => {\r\n      // cleanup\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n      (mounted = false);\r\n    };\r\n  }, []);\r\n\r\n  // When user selects a country, ensure the prefix shows up in UI and assist placeholder\r\n  useEffect(() => {\r\n    if (!country) return;\r\n    // If phone is empty, prefill placeholder hint by setting phone to empty (placeholder uses country in UI)\r\n    // We avoid modifying a non-empty phone typed by user.\r\n    // This effect merely ensures UI shows prefix; logic to send uses buildFullPhone.\r\n  }, [country]);\r\n\r\n  // helpers: countdown formatter\r\n  function formatCountdown(unixMs: number | null) {\r\n    if (!unixMs) return null;\r\n    const s = Math.max(0, Math.ceil((unixMs - now) / 1000));\r\n    if (s <= 0) return null;\r\n    return `${s}s`;\r\n  }\r\n  function setResendDeadline(setter: (v: number | null) => void, seconds = 30) {\r\n    setter(Date.now() + seconds * 1000);\r\n  }\r\n\r\n  // OTP utils\r\n  function handleOtpInput(e: React.KeyboardEvent<HTMLInputElement>, idx: number, otpArr: string[], setOtpArr: (a: string[]) => void) {\r\n    const target = e.target as HTMLInputElement;\r\n    const key = e.key;\r\n    if (key === \"Backspace\") {\r\n      e.preventDefault();\r\n      const next = [...otpArr];\r\n      if (next[idx]) {\r\n        next[idx] = \"\";\r\n        setOtpArr(next);\r\n      } else {\r\n        const prev = Math.max(0, idx - 1);\r\n        const prevInput = document.getElementById(`otp-${target.dataset.for}-${prev}`) as HTMLInputElement | null;\r\n        if (prevInput) {\r\n          prevInput.focus();\r\n          const n = [...otpArr];\r\n          n[prev] = \"\";\r\n          setOtpArr(n);\r\n        }\r\n      }\r\n    } else if (/^[0-9]$/.test(key)) {\r\n      e.preventDefault();\r\n      const next = [...otpArr];\r\n      next[idx] = key;\r\n      setOtpArr(next);\r\n      const nextIdx = Math.min(next.length - 1, idx + 1);\r\n      const nextInput = document.getElementById(`otp-${target.dataset.for}-${nextIdx}`) as HTMLInputElement | null;\r\n      if (nextInput) nextInput.focus();\r\n    } else if (key === \"ArrowLeft\") {\r\n      e.preventDefault();\r\n      const prev = Math.max(0, idx - 1);\r\n      const prevInput = document.getElementById(`otp-${target.dataset.for}-${prev}`) as HTMLInputElement | null;\r\n      prevInput?.focus();\r\n    } else if (key === \"ArrowRight\") {\r\n      e.preventDefault();\r\n      const nxt = Math.min(otpArr.length - 1, idx + 1);\r\n      const nextInput = document.getElementById(`otp-${target.dataset.for}-${nxt}`) as HTMLInputElement | null;\r\n      nextInput?.focus();\r\n    }\r\n  }\r\n\r\n  function handleOtpPaste(e: React.ClipboardEvent<HTMLInputElement>, otpArr: string[], setOtpArr: (a: string[]) => void) {\r\n    e.preventDefault();\r\n    const paste = e.clipboardData.getData(\"text\").trim();\r\n    const digits = paste.replace(/\\D/g, \"\").slice(0, otpArr.length).split(\"\");\r\n    if (digits.length === 0) return;\r\n    const next = [...otpArr];\r\n    for (let i = 0; i < digits.length; i++) next[i] = digits[i];\r\n    setOtpArr(next);\r\n    const firstEmpty = next.findIndex((c) => !c);\r\n    const focusIdx = firstEmpty === -1 ? next.length - 1 : firstEmpty;\r\n    const el = document.getElementById(`otp-${(e.target as HTMLInputElement).dataset.for}-${focusIdx}`) as HTMLInputElement | null;\r\n    el?.focus();\r\n  }\r\n\r\n  useEffect(() => setEmailCode(emailOtp.join(\"\")), [emailOtp]);\r\n  useEffect(() => setPhoneCode(phoneOtp.join(\"\")), [phoneOtp]);\r\n\r\n  // password validation\r\n  function validatePassword(pw: string): string[] {\r\n    const errs: string[] = [];\r\n    if (!pw || pw.length < 8) errs.push(\"Password must be at least 8 characters.\");\r\n    if (!/[A-Z]/.test(pw)) errs.push(\"Include at least one uppercase letter.\");\r\n    if (!/[a-z]/.test(pw)) errs.push(\"Include at least one lowercase letter.\");\r\n    if (!/[0-9]/.test(pw)) errs.push(\"Include at least one number.\");\r\n    if (!/[^A-Za-z0-9]/.test(pw)) errs.push(\"Include at least one symbol (e.g. !@#$%).\");\r\n    return errs;\r\n  }\r\n\r\n  useEffect(() => {\r\n    const errs = validatePassword(password);\r\n    setPasswordErrors(errs);\r\n    setPasswordsMatch(password === confirmPassword || confirmPassword.length === 0);\r\n  }, [password, confirmPassword]);\r\n\r\n  // API actions\r\n  async function handleSendEmailOtp(e?: React.FormEvent) {\r\n    e?.preventDefault();\r\n    setError(null);\r\n    if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)) {\r\n      setError(\"Please enter a valid email address.\");\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      const data = await postJSON(\"/api/auth/email/send\", { email });\r\n      if (data?.ok) {\r\n        setMode(\"verifyEmail\");\r\n        setResendDeadline(setEmailResendAvailableAt, 45);\r\n        setEmailOtp(Array(6).fill(\"\"));\r\n        setTimeout(() => document.getElementById(\"otp-email-0\")?.focus(), 120);\r\n      } else setError(data?.error || \"Failed to send OTP. Try again.\");\r\n    } catch (err: any) {\r\n      setError(err?.message || String(err));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function handleVerifyEmailOtp(e?: React.FormEvent) {\r\n    e?.preventDefault();\r\n    setError(null);\r\n    if (emailCode.length < 4) {\r\n      setError(\"Enter the full code received by email.\");\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      const data = await postJSON(\"/api/auth/email/verify\", { email, code: emailCode, flow: \"signup\" });\r\n      if (data?.ok) {\r\n        if (data.activated && data.sessionToken) {\r\n          setSuccess(\"Email verified — signing you in...\");\r\n          setTimeout(() => router.push(\"/account\"), 700);\r\n          return;\r\n        }\r\n        if (data.tempToken) {\r\n          setTempToken(data.tempToken);\r\n          setMode(\"phone\");\r\n          setResendDeadline(setPhoneResendAvailableAt, 45);\r\n          setPhoneOtp(Array(6).fill(\"\"));\r\n          setTimeout(() => document.getElementById(\"otp-phone-0\")?.focus(), 120);\r\n          return;\r\n        }\r\n        setMode(\"phone\");\r\n        setTempToken(data.tempToken ?? null);\r\n      } else {\r\n        setError(data?.error || data?.reason || \"Invalid or expired code.\");\r\n      }\r\n    } catch (err: any) {\r\n      setError(err?.message || String(err));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function handleSendPhoneOtp(e?: React.FormEvent) {\r\n    e?.preventDefault();\r\n    setError(null);\r\n    const full = buildFullPhone(phone, country);\r\n    if (!full || !/^\\+?[0-9]{7,20}$/.test(full)) {\r\n      setError(\"Please enter a valid phone number including country code (or select country).\");\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      const data = await postJSON(\"/api/auth/phone/send\", { phone: full });\r\n      if (data?.ok) {\r\n        setMode(\"verifyPhone\");\r\n        setResendDeadline(setPhoneResendAvailableAt, 45);\r\n        setPhoneOtp(Array(6).fill(\"\"));\r\n        setTimeout(() => document.getElementById(\"otp-phone-0\")?.focus(), 120);\r\n      } else {\r\n        // If Twilio trial fallback returns ok but with flags, handle it\r\n        if (data?.twilioTrialUnverified || data?.devOtpLogged) {\r\n          // treat as ok for dev/test\r\n          setMode(\"verifyPhone\");\r\n          setResendDeadline(setPhoneResendAvailableAt, 45);\r\n          setPhoneOtp(Array(6).fill(\"\"));\r\n          setTimeout(() => document.getElementById(\"otp-phone-0\")?.focus(), 120);\r\n          return;\r\n        }\r\n        setError(data?.error || \"Failed to send SMS OTP.\");\r\n      }\r\n    } catch (err: any) {\r\n      setError(String(err));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function handleVerifyPhoneOtp(e?: React.FormEvent) {\r\n    e?.preventDefault();\r\n    setError(null);\r\n    if (phoneCode.length < 4) {\r\n      setError(\"Enter the full SMS code you received.\");\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      const full = buildFullPhone(phone, country);\r\n      const res = await postJSON(\"/api/auth/phone/verify\", { phone: full, code: phoneCode, tempToken });\r\n      if (res?.ok) {\r\n        if (res.activated && res.sessionToken) {\r\n          setSuccess(\"Phone verified — signing you in...\");\r\n          setTimeout(() => router.push(\"/account\"), 700);\r\n          return;\r\n        }\r\n        if (res.tempToken) {\r\n          setTempToken(res.tempToken);\r\n          setMode(\"org\");\r\n          return;\r\n        }\r\n        setMode(\"org\");\r\n      } else {\r\n        setError(res?.reason || res?.error || \"Phone verification failed.\");\r\n      }\r\n    } catch (err: any) {\r\n      setError(String(err));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  function buildFullPhone(typed: string | undefined, country?: { callingCode?: string }) {\r\n    if (!typed) return null;\r\n    const raw = typed.trim();\r\n    if (raw.startsWith(\"+\")) {\r\n      const digits = raw.replace(/[^\\d+]/g, \"\");\r\n      return digits;\r\n    }\r\n    const cc = country?.callingCode ?? \"\";\r\n    const onlyDigits = raw.replace(/\\D/g, \"\");\r\n    if (!cc && !onlyDigits) return null;\r\n    const normalizedCc = cc.startsWith(\"+\") ? cc : cc ? `+${cc.replace(/[^\\d]/g, \"\")}` : \"\";\r\n    return `${normalizedCc}${onlyDigits}`;\r\n  }\r\n\r\n  async function handleFinalize(e?: React.FormEvent) {\r\n    e?.preventDefault();\r\n    setError(null);\r\n\r\n    setPasswordTouched(true);\r\n    const errs = validatePassword(password);\r\n    if (errs.length > 0) {\r\n      setPasswordErrors(errs);\r\n      setError(\"Please fix the password requirements.\");\r\n      return;\r\n    }\r\n    if (password !== confirmPassword) {\r\n      setPasswordsMatch(false);\r\n      setError(\"Passwords do not match.\");\r\n      return;\r\n    }\r\n    if (!orgName?.trim()) {\r\n      setError(\"Organization name is required.\");\r\n      return;\r\n    }\r\n    if (!name?.trim()) {\r\n      setError(\"Your name is required.\");\r\n      return;\r\n    }\r\n\r\n    const normalizedPhone = buildFullPhone(phone, country);\r\n\r\n    const payload: Record<string, any> = {\r\n      tempToken,\r\n      organizationName: orgName.trim(),\r\n      password,\r\n      name: name.trim(),\r\n    };\r\n    if (email) payload.email = email;\r\n    if (normalizedPhone) payload.phone = normalizedPhone;\r\n    if (country) payload.country = { name: country.name, cca2: country.cca2, callingCode: country.callingCode };\r\n\r\n    setLoading(true);\r\n    try {\r\n      const res = await postJSON(\"/api/auth/signup/finalize\", payload);\r\n\r\n      if (res?.ok) {\r\n        setSuccess(\"Account created — signing you in...\");\r\n        setMode(\"done\");\r\n        setTimeout(() => router.push(\"/account\"), 700);\r\n        return;\r\n      }\r\n\r\n      if (res?.activated === false && res?.tempToken) {\r\n        setTempToken(res.tempToken);\r\n        setError(\"Account created but not yet activated. Please complete verification.\");\r\n        setMode(res.tempToken ? \"org\" : \"verifyEmail\");\r\n        return;\r\n      }\r\n\r\n      setError(res?.error || res?.reason || \"Failed to finalize signup.\");\r\n    } catch (err: any) {\r\n      setError(String(err) || \"Unexpected error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function handleResendEmail() {\r\n    if (emailResendAvailableAt && emailResendAvailableAt > Date.now()) return;\r\n    setError(null);\r\n    setLoading(true);\r\n    try {\r\n      const data = await postJSON(\"/api/auth/email/send\", { email, resend: true });\r\n      if (data?.ok) setResendDeadline(setEmailResendAvailableAt, 45);\r\n      else setError(data?.error || \"Unable to resend OTP.\");\r\n    } catch (err: any) {\r\n      setError(String(err));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function handleResendPhone() {\r\n    if (phoneResendAvailableAt && phoneResendAvailableAt > Date.now()) return;\r\n    setError(null);\r\n    setLoading(true);\r\n    try {\r\n      const full = buildFullPhone(phone, country);\r\n      const data = await postJSON(\"/api/auth/phone/send\", { phone: full, resend: true });\r\n      if (data?.ok) setResendDeadline(setPhoneResendAvailableAt, 45);\r\n      else setError(data?.error || \"Unable to resend SMS OTP.\");\r\n    } catch (err: any) {\r\n      setError(String(err));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  // compute fill percent (0..100)\r\n  function computeFillPercent() {\r\n    const s = step;\r\n    if (s <= 1) return 0;\r\n    return Math.round(((s - 1) / 3) * 100);\r\n  }\r\n  const fillPercent = computeFillPercent();\r\n\r\n  /* ---------- UI (responsive & accessible) ---------- */\r\n  return (\r\n    <div className=\"min-h-screen w-full bg-gradient-to-b from-slate-50 to-white flex items-center justify-center p-4 sm:p-6\">\r\n      <div className=\"w-full max-w-7xl bg-white/95 rounded-3xl shadow-2xl overflow-hidden grid grid-cols-1 md:grid-cols-2 ring-1 ring-slate-100\">\r\n        {/* LEFT: form/card */}\r\n        <div className=\"p-6 sm:p-10 flex items-start\">\r\n          <div className=\"w-full max-w-md mx-auto\">\r\n            {/* header */}\r\n            <div className=\"flex items-center gap-4 mb-6\">\r\n              <div className=\"w-12 h-12 sm:w-14 sm:h-14 rounded-2xl bg-gradient-to-tr from-indigo-600 to-violet-500 flex items-center justify-center text-white font-extrabold shadow-xl\">U</div>\r\n              <div>\r\n                <h1 className=\"text-2xl sm:text-3xl font-extrabold text-slate-900\">Welcome to SignalHub</h1>\r\n                <p className=\"text-sm text-slate-500 mt-1\">Create an admin account and organization — secure by default.</p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Progress */}\r\n            <div className=\"mb-5\">\r\n              <div className=\"relative\">\r\n                <div className=\"absolute left-4 right-4 top-6 h-0.5 bg-slate-100 rounded\" />\r\n                <div\r\n                  className=\"absolute left-4 top-6 h-0.5 bg-gradient-to-r from-indigo-600 to-emerald-400 rounded transition-all duration-500 ease-out\"\r\n                  style={{ width: `${fillPercent}%` }}\r\n                />\r\n                <div className=\"relative flex items-center justify-between px-2\">\r\n                  {[1, 2, 3, 4].map((n) => {\r\n                    const isActive = n === step;\r\n                    const isCompleted = n < step;\r\n                    return (\r\n                      <div key={n} className=\"flex-1 flex flex-col items-center text-center px-1\">\r\n                        <div\r\n                          className={`w-9 h-9 sm:w-11 sm:h-11 rounded-full flex items-center justify-center text-sm font-semibold transition ${\r\n                            isCompleted ? \"bg-indigo-600 text-white shadow-lg scale-105\" : isActive ? \"bg-indigo-600 text-white ring-4 ring-indigo-100 animate-pulse\" : \"bg-white border border-slate-200 text-slate-600\"\r\n                          }`}\r\n                        >\r\n                          {n}\r\n                        </div>\r\n                        <div className=\"text-[11px] text-slate-500 mt-2\">{[\"Choose\", \"Email\", \"Phone\", \"Org\"][n - 1]}</div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* status */}\r\n            <div role=\"status\" aria-live=\"polite\" className=\"min-h-[1.4rem] mb-4\">\r\n              {error && <div className=\"text-sm text-red-600\">{error}</div>}\r\n              {success && <div className=\"text-sm text-emerald-600\">{success}</div>}\r\n            </div>\r\n\r\n            {/* Forms */}\r\n            <div>\r\n              {/* CHOOSE */}\r\n              {mode === \"choose\" && (\r\n                <div className=\"space-y-4\">\r\n                  <button onClick={() => (window.location.href = \"/api/auth/oauth/google/start?flow=signup\")} className=\"w-full p-3 border rounded-lg flex items-center gap-3 justify-center hover:shadow-lg transition\">\r\n                    <img src=\"/google.png\" alt=\"Google\" className=\"w-6 h-6\" />\r\n                    <span className=\"text-sm font-medium text-slate-700\">Continue with Google</span>\r\n                  </button>\r\n\r\n                  <div className=\"text-center text-sm text-slate-400\">or</div>\r\n\r\n                  <button onClick={() => setMode(\"email\")} className=\"w-full p-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition shadow-md\">\r\n                    Sign up with Email\r\n                  </button>\r\n                  <div className=\"text-sm mt-2\">Already have an account? <a className=\"text-blue-700 underline\" href=\"/login\">Login</a></div>\r\n                </div>\r\n              )}\r\n\r\n              {/* EMAIL - send */}\r\n              {mode === \"email\" && (\r\n                <form onSubmit={handleSendEmailOtp} className=\"space-y-3\" noValidate>\r\n                  <label className=\"block text-sm font-medium text-slate-600\">Email</label>\r\n                  <input value={email} onChange={(e) => setEmail(e.target.value)} className=\"w-full p-3 border rounded focus:ring-2 focus:ring-indigo-300 focus:outline-none\" placeholder=\"you@example.com\" type=\"email\" />\r\n                  <div className=\"flex gap-3 flex-wrap\">\r\n                    <button type=\"submit\" disabled={loading} className=\"flex-1 px-4 py-2 bg-indigo-600 text-white rounded\">\r\n                      {loading ? \"Sending...\" : \"Send code\"}\r\n                    </button>\r\n                    <button type=\"button\" onClick={() => setMode(\"choose\")} className=\"px-4 py-2 border rounded\">\r\n                      Back\r\n                    </button>\r\n                  </div>\r\n                  <p className=\"text-xs text-slate-400\">A one-time code will be sent to verify your email.</p>\r\n                </form>\r\n              )}\r\n\r\n              {/* EMAIL - verify */}\r\n              {mode === \"verifyEmail\" && (\r\n                <form onSubmit={handleVerifyEmailOtp} className=\"space-y-3\" noValidate>\r\n                  <p className=\"text-sm text-slate-600\">Enter the code sent to <strong>{email}</strong></p>\r\n                  <label className=\"block text-sm font-medium text-slate-600\">Code</label>\r\n                  <div className=\"flex gap-2\">\r\n                    {emailOtp.map((digit, i) => (\r\n                      <input\r\n                        key={i}\r\n                        id={`otp-email-${i}`}\r\n                        data-for=\"email\"\r\n                        inputMode=\"numeric\"\r\n                        pattern=\"[0-9]*\"\r\n                        maxLength={1}\r\n                        value={digit}\r\n                        onPaste={(e) => handleOtpPaste(e, emailOtp, setEmailOtp)}\r\n                        onKeyDown={(e) => handleOtpInput(e, i, emailOtp, setEmailOtp)}\r\n                        onChange={() => {}}\r\n                        aria-label={`Email code digit ${i + 1}`}\r\n                        className=\"w-12 h-12 text-center text-lg rounded border border-slate-200 focus:ring-2 focus:ring-indigo-300\"\r\n                      />\r\n                    ))}\r\n                  </div>\r\n\r\n                  <div className=\"flex gap-3\">\r\n                    <button type=\"submit\" disabled={loading} className=\"flex-1 px-4 py-2 bg-indigo-600 text-white rounded\">\r\n                      {loading ? \"Verifying...\" : \"Verify\"}\r\n                    </button>\r\n                    <button type=\"button\" onClick={() => setMode(\"email\")} className=\"px-4 py-2 border rounded\">\r\n                      Back\r\n                    </button>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between text-xs text-slate-500\">\r\n                    <div>\r\n                      {formatCountdown(emailResendAvailableAt) ? (\r\n                        <span>Resend in {formatCountdown(emailResendAvailableAt)}</span>\r\n                      ) : (\r\n                        <button type=\"button\" onClick={handleResendEmail} className=\"underline text-indigo-600\">\r\n                          Resend code\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"text-right\">Didn't receive? Check spam.</div>\r\n                  </div>\r\n                </form>\r\n              )}\r\n\r\n              {/* PHONE - send */}\r\n              {mode === \"phone\" && (\r\n                <form onSubmit={handleSendPhoneOtp} className=\"space-y-3\" noValidate>\r\n                  <label className=\"block text-sm font-medium text-slate-600\">Phone</label>\r\n\r\n                  <div className=\"flex gap-2 items-start flex-col sm:flex-row\">\r\n                    <div className=\"w-full sm:w-44\">\r\n                      <CountryDropdown\r\n                        countries={countries}\r\n                        value={country}\r\n                        onChange={(c) => {\r\n                          setCountry(c);\r\n                          // if phone is empty, add calling code as hint to input (we don't auto-prepend to typed number)\r\n                          // we leave actual submission to buildFullPhone\r\n                        }}\r\n                        disabled={countryLoading || !!countryError}\r\n                        placeholder={countryLoading ? \"Loading...\" : countryError ? \"Unavailable\" : \"Select country\"}\r\n                      />\r\n                      <div className=\"text-xs text-slate-400 mt-2\">{countryLoading ? \"Loading dial codes...\" : countryError ? <span className=\"text-red-500\">Unable to load list</span> : \"Select country code\"}</div>\r\n                    </div>\r\n\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div className=\"flex gap-2\">\r\n                        <div className=\"flex items-center px-3 border rounded bg-slate-50 text-sm whitespace-nowrap\">\r\n                          <span className=\"mr-2\">{country?.flag ? <img src={country.flag} alt={country.name} className=\"w-5 h-4 object-cover inline-block\" /> : null}</span>\r\n                          <span className=\"font-medium\">{country?.callingCode ?? \"+\"}</span>\r\n                        </div>\r\n                        <input\r\n                          value={phone}\r\n                          onChange={(e) => setPhone(e.target.value)}\r\n                          placeholder={country ? `${country.callingCode} 98765 43210` : \"98765 43210\"}\r\n                          className=\"flex-1 p-2 border rounded focus:ring-2 focus:ring-indigo-300 bg-indigo-50\"\r\n                          aria-label=\"Phone number\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex gap-3\">\r\n                    <button type=\"submit\" disabled={loading} className=\"flex-1 px-4 py-2 bg-indigo-600 text-white rounded\">\r\n                      {loading ? \"Sending...\" : \"Send SMS\"}\r\n                    </button>\r\n                    <button type=\"button\" onClick={() => setMode(\"verifyEmail\")} className=\"px-4 py-2 border rounded\">\r\n                      Back\r\n                    </button>\r\n                  </div>\r\n\r\n                  <p className=\"text-xs text-slate-400\">Standard SMS rates may apply.</p>\r\n                </form>\r\n              )}\r\n\r\n              {/* PHONE - verify */}\r\n              {mode === \"verifyPhone\" && (\r\n                <form onSubmit={handleVerifyPhoneOtp} className=\"space-y-3\" noValidate>\r\n                  <p className=\"text-sm text-slate-600\">Enter the SMS code sent to <strong>{country?.callingCode ?? \"\"} {phone}</strong></p>\r\n\r\n                  <label className=\"block text-sm font-medium text-slate-600\">SMS Code</label>\r\n                  <div className=\"flex gap-2\">\r\n                    {phoneOtp.map((digit, i) => (\r\n                      <input\r\n                        key={i}\r\n                        id={`otp-phone-${i}`}\r\n                        data-for=\"phone\"\r\n                        inputMode=\"numeric\"\r\n                        pattern=\"[0-9]*\"\r\n                        maxLength={1}\r\n                        value={digit}\r\n                        onPaste={(e) => handleOtpPaste(e, phoneOtp, setPhoneOtp)}\r\n                        onKeyDown={(e) => handleOtpInput(e, i, phoneOtp, setPhoneOtp)}\r\n                        onChange={() => {}}\r\n                        aria-label={`Phone code digit ${i + 1}`}\r\n                        className=\"w-12 h-12 text-center text-lg rounded border border-slate-200 focus:ring-2 focus:ring-indigo-300\"\r\n                      />\r\n                    ))}\r\n                  </div>\r\n\r\n                  <div className=\"flex gap-3\">\r\n                    <button type=\"submit\" disabled={loading} className=\"flex-1 px-4 py-2 bg-indigo-600 text-white rounded\">\r\n                      {loading ? \"Verifying...\" : \"Verify\"}\r\n                    </button>\r\n                    <button type=\"button\" onClick={() => setMode(\"phone\")} className=\"px-4 py-2 border rounded\">\r\n                      Back\r\n                    </button>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between text-xs text-slate-500\">\r\n                    <div>\r\n                      {formatCountdown(phoneResendAvailableAt) ? (\r\n                        <span>Resend in {formatCountdown(phoneResendAvailableAt)}</span>\r\n                      ) : (\r\n                        <button type=\"button\" onClick={handleResendPhone} className=\"underline text-indigo-600\">\r\n                          Resend SMS\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n                    <div>Contact support if you don't receive SMS.</div>\r\n                  </div>\r\n                </form>\r\n              )}\r\n\r\n              {/* ORG finalize */}\r\n              {mode === \"org\" && (\r\n                <form onSubmit={handleFinalize} className=\"space-y-4\" noValidate>\r\n                  <label className=\"block text-sm font-medium text-slate-600\">Organization name</label>\r\n                  <input value={orgName} placeholder=\"Enter the name\" onChange={(e) => setOrgName(e.target.value)} className=\"w-full p-3 border rounded focus:ring-2 focus:ring-indigo-300\" />\r\n\r\n                  <label className=\"block text-sm font-medium text-slate-600\">Your name</label>\r\n                  <input value={name} onChange={(e) => setName(e.target.value)} className=\"w-full p-3 border rounded focus:ring-2 focus:ring-indigo-300\" />\r\n\r\n                  <label className=\"block text-sm font-medium text-slate-600\">Password</label>\r\n                  <div className=\"relative\">\r\n                    <input\r\n                      type={showPassword ? \"text\" : \"password\"}\r\n                      value={password}\r\n                      onChange={(e) => {\r\n                        setPasswordTouched(true);\r\n                        setPassword(e.target.value);\r\n                      }}\r\n                      onBlur={() => setPasswordTouched(true)}\r\n                      placeholder=\"Create a strong password\"\r\n                      className=\"w-full p-3 border rounded focus:ring-2 focus:ring-indigo-300 pr-12\"\r\n                      aria-required\r\n                    />\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowPassword((v) => !v)}\r\n                      aria-label={showPassword ? \"Hide password\" : \"Show password\"}\r\n                      className=\"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded hover:bg-slate-100\"\r\n                    >\r\n                      {showPassword ? \"Hide\" : \"Show\"}\r\n                    </button>\r\n                  </div>\r\n\r\n                  <label className=\"block text-sm font-medium text-slate-600\">Retype password</label>\r\n                  <div className=\"relative\">\r\n                    <input\r\n                      type={showConfirmPassword ? \"text\" : \"password\"}\r\n                      value={confirmPassword}\r\n                      onChange={(e) => setConfirmPassword(e.target.value)}\r\n                      onBlur={() => setPasswordTouched(true)}\r\n                      placeholder=\"Retype password\"\r\n                      className={`w-full p-3 border rounded focus:ring-2 focus:ring-indigo-300 pr-12 ${passwordTouched && !passwordsMatch ? \"border-red-400\" : \"\"}`}\r\n                      aria-required\r\n                    />\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowConfirmPassword((v) => !v)}\r\n                      aria-label={showConfirmPassword ? \"Hide password\" : \"Show password\"}\r\n                      className=\"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded hover:bg-slate-100\"\r\n                    >\r\n                      {showConfirmPassword ? \"Hide\" : \"Show\"}\r\n                    </button>\r\n                  </div>\r\n\r\n                  {/* Password requirements */}\r\n                  <div className=\"text-xs text-slate-500 mt-2\">\r\n                    <div className=\"mb-1\">Password must contain:</div>\r\n                    <ul className=\"grid grid-cols-1 sm:grid-cols-2 gap-1\">\r\n                      {[\r\n                        { ok: password.length >= 8, label: \"8+ characters\" },\r\n                        { ok: /[A-Z]/.test(password), label: \"Uppercase letter\" },\r\n                        { ok: /[a-z]/.test(password), label: \"Lowercase letter\" },\r\n                        { ok: /[0-9]/.test(password), label: \"Number\" },\r\n                        { ok: /[^\\w\\s]/.test(password), label: \"Symbol\" },\r\n                      ].map((r) => (\r\n                        <li key={r.label} className=\"flex items-center gap-2 text-[13px]\">\r\n                          <span className={`w-4 h-4 rounded-sm flex items-center justify-center ${r.ok ? \"bg-emerald-600 text-white\" : \"bg-slate-200 text-slate-400\"}`}>\r\n                            {r.ok ? \"✓\" : \"•\"}\r\n                          </span>\r\n                          <span className={`${r.ok ? \"text-slate-700\" : \"text-slate-400\"}`}>{r.label}</span>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                    {!passwordsMatch && confirmPassword.length > 0 && (\r\n                      <div className=\"mt-2 text-sm text-red-600\">Passwords do not match.</div>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"flex gap-3 pt-3\">\r\n                    <button disabled={loading} className={`flex-1 px-4 py-2 bg-indigo-600 text-white rounded ${loading ? \"opacity-70\" : \"hover:brightness-95\"}`} type=\"submit\">\r\n                      {loading ? \"Creating...\" : \"Create organization\"}\r\n                    </button>\r\n                    <button type=\"button\" onClick={() => setMode(\"phone\")} className=\"px-4 py-2 border rounded\">\r\n                      Back\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              )}\r\n\r\n              {/* DONE */}\r\n              {mode === \"done\" && (\r\n                <div className=\"text-center py-6\">\r\n                  <h3 className=\"text-lg font-semibold text-emerald-700\">Success</h3>\r\n                  <p className=\"text-sm text-slate-600 mt-2\">{success || \"Your organization has been created.\"}</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* RIGHT: hero/illustration */}\r\n        <div className=\"hidden md:block relative bg-gradient-to-br from-indigo-500 to-emerald-300\">\r\n          <img src=\"/signup-hero.jpg\" alt=\"Signup hero\" className=\"w-full h-full object-cover min-h-[520px]\" />\r\n          <div className=\"absolute inset-0 bg-gradient-to-tr from-transparent via-white/10 to-transparent pointer-events-none\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}